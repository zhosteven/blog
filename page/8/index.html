<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="dns-prefetch" href="http://www.zhos.me">
  <title>A+</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ç ”ç©¶æ€§ææ–™(ç®—æ³•)">
<meta property="og:type" content="website">
<meta property="og:title" content="A+">
<meta property="og:url" content="http://www.zhos.me/page/8/index.html">
<meta property="og:site_name" content="A+">
<meta property="og:description" content="ç ”ç©¶æ€§ææ–™(ç®—æ³•)">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A+">
<meta name="twitter:description" content="ç ”ç©¶æ€§ææ–™(ç®—æ³•)">
  
    <link rel="alternative" href="/atom.xml" title="A+" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>
</html>
<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">Zhos</a></h1>
		</hgroup>
		
		<p class="header-subtitle">ai &amp; bigdata &amp; ml</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">å‹é“¾</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/zhosteven" title="github"><i class="icon-github"></i></a>
		        
					<a class="qq" target="_blank" href="/187063598" title="qq"><i class="icon-qq"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:ujujzhao@gmail.com" title="mail"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Zhos</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>ai &amp; bigdata &amp; ml<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zhosteven" title="github"><i class="icon-github"></i></a>
			        
						<a class="qq" target="_blank" href="/187063598" title="qq"><i class="icon-qq"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:ujujzhao@gmail.com" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 100%"><a href="/">ä¸»é¡µ</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/">ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½</a>
    </h1>
  

        
        <a href="/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/" class="archive-article-date">
  	<time datetime="2019-03-15T08:33:35.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-03-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è¿™ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘ä»¬ä½¿ç”¨<a href="https://mlflow.org/" target="_blank" rel="noopener"><strong>MLflow</strong></a>çš„åˆæ­¥ç»éªŒã€‚<br>æˆ‘ä»¬å°†é€šè¿‡è®°å½•æ‰€æœ‰æ¢ç´¢æ€§è¿­ä»£ï¼Œå¼€å§‹ä½¿ç”¨è‡ªå·±çš„<a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener">è·Ÿè¸ªæœåŠ¡å™¨</a>å‘ç°MLflow ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨UDFå°†Sparkä¸MLflowç›¸å…³è”çš„ç»éªŒã€‚<br><a name="50f198f0"></a></p>
<h4 id="ä¸Šä¸‹æ–‡"><a href="#ä¸Šä¸‹æ–‡" class="headerlink" title="ä¸Šä¸‹æ–‡"></a>ä¸Šä¸‹æ–‡</h4><p>æˆ‘ä»¬åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½çš„åŠ›é‡ï¼Œä½¿äººä»¬èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„å¥åº·å’Œç¦ç¥‰ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› æ­¤æ˜¯æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ•°æ®äº§å“çš„æ ¸å¿ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆMLFLowï¼Œä¸€ä¸ªæ¶µç›–MLç”Ÿå‘½å‘¨æœŸæ‰€æœ‰æ–¹é¢çš„å¼€æºå¹³å°å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚<br><a name="MLflow"></a></p>
<h3 id="MLflow"><a href="#MLflow" class="headerlink" title="MLflow"></a>MLflow</h3><p>MLflowçš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨MLä¹‹ä¸Šæä¾›é¢å¤–çš„å±‚ï¼Œå…è®¸æ•°æ®ç§‘å­¦å®¶ä¸å‡ ä¹ä»»ä½•æœºå™¨å­¦ä¹ åº“ï¼ˆ<a href="https://github.com/h2oai" target="_blank" rel="noopener"><em>h2oï¼Œ</em></a><a href="https://keras.io/" target="_blank" rel="noopener"><em>kerasï¼Œ</em></a><a href="http://mleap-docs.combust.ml/" target="_blank" rel="noopener"><em>mleapï¼Œ</em></a><a href="https://pytorch.org/" target="_blank" rel="noopener"><em>pytorchï¼Œ</em></a><a href="http://scikit-learn.org/stable/" target="_blank" rel="noopener"><em>sklearnå’Œ</em></a><a href="https://www.tensorflow.org/" target="_blank" rel="noopener"><em>tensorflow</em></a>ï¼‰ä¸€èµ·å·¥ä½œï¼ŒåŒæ—¶ï¼Œå®ƒå°†ä»–ä»¬çš„å·¥ä½œå¸¦åˆ°å¦ä¸€ä¸ªå±‚æ¬¡ã€‚<br>MLflowæä¾›ä¸‰ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener"><strong>è·Ÿè¸ª</strong></a> â€Š- è®°å½•å’ŒæŸ¥è¯¢å®éªŒï¼šä»£ç ï¼Œæ•°æ®ï¼Œé…ç½®å’Œç»“æœã€‚è·Ÿè¸ªå»ºæ¨¡è¿›åº¦éå¸¸æœ‰ç”¨ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/projects.html" target="_blank" rel="noopener"><strong>é¡¹ç›®</strong></a> â€Š- åœ¨ä»»ä½•å¹³å°ï¼ˆ<strong>_å³_</strong> <a href="https://aws.amazon.com/sagemaker" target="_blank" rel="noopener"><em>Sagemaker</em></a>ï¼‰ä¸Šå¯é‡å¤è¿è¡Œçš„åŒ…è£…æ ¼å¼ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/models.html" target="_blank" rel="noopener"><strong>æ¨¡å‹</strong></a> â€Š- å°†æ¨¡å‹å‘é€åˆ°å„ç§éƒ¨ç½²å·¥å…·çš„é€šç”¨æ ¼å¼ã€‚<blockquote>
<p><strong>MLflow</strong>ï¼ˆç›®å‰å¤„äºalphaç‰ˆæœ¬ï¼‰æ˜¯ä¸€ä¸ªç®¡ç†MLç”Ÿå‘½å‘¨æœŸçš„å¼€æºå¹³å°ï¼ŒåŒ…æ‹¬å®éªŒï¼Œå¯é‡å¤æ€§å’Œéƒ¨ç½²ã€‚<br><a name="181d871e"></a></p>
</blockquote>
<h4 id="è®¾ç½®MLflow"><a href="#è®¾ç½®MLflow" class="headerlink" title="è®¾ç½®MLflow"></a>è®¾ç½®MLflow</h4>ä¸ºäº†ä½¿ç”¨MLflowï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®¾ç½®æ‰€æœ‰Pythonç¯å¢ƒä»¥ä½¿ç”¨MLflowï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener">PyEnv </a>_ï¼ˆ_<a href="https://gist.github.com/chris-zen/9e61db6924bd37fbe414f648614ca4c5" target="_blank" rel="noopener"><em>åœ¨Macä¸­</em></a><strong>_è®¾ç½®_</strong>_ â†’ _<a href="https://gist.github.com/chris-zen/9e61db6924bd37fbe414f648614ca4c5" target="_blank" rel="noopener"><em>Pythonï¼‰</em></a>ã€‚è¿™å°†æä¾›ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å®‰è£…è¿è¡Œå®ƒæ‰€éœ€çš„æ‰€æœ‰åº“ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.7.0</span><br><span class="line">pyenv global 3.7.0 # Use Python 3.7</span><br><span class="line">mkvirtualenv mlflow # Create a Virtual Env with Python 3.7</span><br><span class="line">workon mlflow</span><br></pre></td></tr></table></figure>
<p>å®‰è£…æ‰€éœ€çš„åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install mlflow==0.7.0 \</span><br><span class="line">            Cython==0.29 \ </span><br><span class="line">            numpy==1.14.5 \</span><br><span class="line">            pandas==0.23.4 \</span><br><span class="line">            pyarrow==0.11.0</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong>æˆ‘ä»¬ä½¿ç”¨PyArrowå°†æ¨¡å‹ä½œä¸ºUDFå¯åŠ¨ã€‚PyArrowå’ŒNumpyç‰ˆæœ¬éœ€è¦ä¿®å¤ï¼Œå› ä¸ºæœ€æ–°çš„ç‰ˆæœ¬ä¹‹é—´å­˜åœ¨ä¸€äº›å†²çªã€‚</p>
</blockquote>
<p><a name="9a02c96e"></a></p>
<h4 id="å¯åŠ¨è·Ÿè¸ªUI"><a href="#å¯åŠ¨è·Ÿè¸ªUI" class="headerlink" title="å¯åŠ¨è·Ÿè¸ªUI"></a>å¯åŠ¨è·Ÿè¸ªUI</h4><p>MLflow Trackingå…è®¸æˆ‘ä»¬ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/index.html#python-api" target="_blank" rel="noopener">Python</a>å’Œ<a href="https://mlflow.org/docs/latest/rest-api.html#rest-api" target="_blank" rel="noopener">REST</a> API è®°å½•å’ŒæŸ¥è¯¢å®éªŒã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰æˆ‘ä»¬å°†å­˜å‚¨æ¨¡å‹å·¥ä»¶çš„ä½ç½®ï¼ˆ<em>Localhostï¼Œ</em><a href="https://mlflow.org/docs/latest/tracking.html#amazon-s3" target="_blank" rel="noopener"><em>Amazon S3</em></a>_ï¼Œ_<a href="https://mlflow.org/docs/latest/tracking.html#azure-blob-storage" target="_blank" rel="noopener"><em>Azure Blobå­˜å‚¨</em></a>_ï¼Œ_<a href="https://mlflow.org/docs/latest/tracking.html#google-cloud-storage" target="_blank" rel="noopener"><em>Googleäº‘å­˜å‚¨</em></a>_æˆ–_<a href="https://mlflow.org/docs/latest/tracking.html#sftp-server" target="_blank" rel="noopener"><em>SFTPæœåŠ¡å™¨</em></a>ï¼‰ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨AWS ï¼Œå› æ­¤æˆ‘ä»¬å°†å°è¯•å°†<strong>S3</strong>ä½œä¸ºå·¥ä»¶å­˜å‚¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Running a Tracking Server</span><br><span class="line">mlflow server \</span><br><span class="line">    --file-store /tmp/mlflow/fileStore \</span><br><span class="line">    --default-artifact-root s3://&lt;bucket&gt;/mlflow/artifacts/ \</span><br><span class="line">    --host localhost</span><br><span class="line">    --port 5000</span><br></pre></td></tr></table></figure>
<p>MLflowå»ºè®®ä½¿ç”¨<strong>æŒä¹…æ€§æ–‡ä»¶å­˜å‚¨</strong>ã€‚è¿™<code>file-store</code>æ˜¯æœåŠ¡å™¨å­˜å‚¨è¿è¡Œå’Œå®éªŒå…ƒæ•°æ®çš„ä½ç½®ã€‚å› æ­¤ï¼Œåœ¨è¿è¡ŒæœåŠ¡å™¨æ—¶ï¼Œè¯·ç¡®ä¿è¿™æŒ‡å‘æŒä¹…æ–‡ä»¶ç³»ç»Ÿä½ç½®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯<code>/tmp</code>ç”¨äºå®éªŒã€‚<br>è¯·è®°ä½ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨mlflowæœåŠ¡å™¨è¿è¡Œæ—§å®éªŒï¼Œå®ƒä»¬å¿…é¡»å­˜åœ¨äºæ–‡ä»¶å­˜å‚¨ä¸­ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å®ƒä»¬ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨UDFä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºåªéœ€è¦æ¨¡å‹è·¯å¾„ã€‚</p>
<blockquote>
<p><strong><em>æ³¨æ„ï¼š</em></strong>è¯·è®°ä½è·Ÿè¸ªUIï¼Œæ¨¡å‹å®¢æˆ·ç«¯å¿…é¡»èƒ½å¤Ÿè®¿é—®å·¥ä»¶ä½ç½®ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºè·Ÿè¸ªUIæ˜¯å¦åœ¨EC2å®ä¾‹ä¸Šï¼Œå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡ŒMLflowï¼Œæˆ‘ä»¬çš„æœºå™¨åº”è¯¥å¯ä»¥ç›´æ¥è®¿é—®S3æ¥ç¼–å†™å·¥ä»¶æ¨¡å‹ã€‚</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639247139-4605b9cb-f981-43fc-a969-9a2155d75965.png#align=left&amp;display=inline&amp;height=239&amp;name=1_z6iObWdxXOtcIj_cUk2gag.png&amp;originHeight=642&amp;originWidth=2000&amp;size=114273&amp;status=done&amp;width=746" alt="1_z6iObWdxXOtcIj_cUk2gag.png"><br><a name="7d519d5b"></a></p>
<h4 id="è¿è¡Œæ¨¡å‹"><a href="#è¿è¡Œæ¨¡å‹" class="headerlink" title="è¿è¡Œæ¨¡å‹"></a>è¿è¡Œæ¨¡å‹</h4><p>è·Ÿè¸ªæœåŠ¡å™¨è¿è¡Œåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹ã€‚<br>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://github.com/mlflow/mlflow/blob/master/examples/sklearn_elasticnet_wine/train.py" target="_blank" rel="noopener"><strong><em>MLflow Sklearnç¤ºä¾‹ä¸­</em></strong></a>æä¾›çš„wineç¤ºä¾‹çš„ä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MLFLOW_TRACKING_URI=http://localhost:5000 python wine_quality.py \</span><br><span class="line">  --alpha 0.9</span><br><span class="line">  --l1_ration 0.5</span><br><span class="line">  --wine_file ./data/winequality-red.csv</span><br></pre></td></tr></table></figure>
<p>å¦‚å‰æ‰€è¿°ï¼ŒMLflowå…è®¸è®°å½•æ¨¡å‹çš„å‚æ•°ï¼Œåº¦é‡å’Œå·¥ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è·Ÿè¸ªè¿™äº›åœ¨ä¸åŒè¿­ä»£ä¸­å¦‚ä½•æ¼”å˜ã€‚æ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥Tracking Serveræ¥é‡ç°æˆ‘ä»¬çš„æœ€ä½³æ¨¡å‹ï¼Œæˆ–è€…éªŒè¯å“ªäº›ä»£ç æ­£åœ¨æ‰§è¡Œæ‰€éœ€çš„è¿­ä»£ï¼Œå› ä¸º<strong>å®ƒè®°å½•</strong><em>ï¼ˆå…è´¹ï¼‰</em><strong>gitå“ˆå¸Œæäº¤</strong>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">with mlflow.start_run():</span><br><span class="line"></span><br><span class="line">    ... model ...</span><br><span class="line"></span><br><span class="line">    mlflow.log_param(&quot;source&quot;, wine_path)</span><br><span class="line">    mlflow.log_param(&quot;alpha&quot;, alpha)</span><br><span class="line">    mlflow.log_param(&quot;l1_ratio&quot;, l1_ratio)</span><br><span class="line"></span><br><span class="line">    mlflow.log_metric(&quot;rmse&quot;, rmse)</span><br><span class="line">    mlflow.log_metric(&quot;r2&quot;, r2)</span><br><span class="line">    mlflow.log_metric(&quot;mae&quot;, mae)</span><br><span class="line"></span><br><span class="line">    mlflow.set_tag(&apos;domain&apos;, &apos;wine&apos;)</span><br><span class="line">    mlflow.set_tag(&apos;predict&apos;, &apos;quality&apos;)</span><br><span class="line">    mlflow.sklearn.log_model(lr, &quot;model&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639366867-dba4caa9-6ea2-4ca8-b59a-737bbfa774fc.png#align=left&amp;display=inline&amp;height=365&amp;name=1_3soEGGuFumQXV5LSZNCnrA.png&amp;originHeight=489&amp;originWidth=1000&amp;size=130330&amp;status=done&amp;width=746" alt="1_3soEGGuFumQXV5LSZNCnrA.png"><br><a name="146d11ee"></a></p>
<h4 id="æœåŠ¡æ¨¡å‹"><a href="#æœåŠ¡æ¨¡å‹" class="headerlink" title="æœåŠ¡æ¨¡å‹"></a>æœåŠ¡æ¨¡å‹</h4><p> ä½¿ç”¨â€œ &gt; <strong><em>mlflowæœåŠ¡å™¨</em></strong>&gt; _ â€_å¯åŠ¨çš„&gt; <strong>MLflowè·Ÿè¸ªæœåŠ¡å™¨</strong>è¿˜æ‰˜ç®¡REST APIï¼Œç”¨äºè·Ÿè¸ªè¿è¡Œå¹¶å°†æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚æ‚¨å¯ä»¥ä½¿ç”¨â€œ &gt; <strong>_MLFLOW_TRACKING_URI_</strong>&gt; _â€<em>ç¯å¢ƒå˜é‡æŒ‡å®šè·Ÿè¸ªæœåŠ¡å™¨URIï¼ŒMLflowè·Ÿè¸ªAPIä¼šè‡ªåŠ¨ä¸è¯¥URIå¤„çš„è·Ÿè¸ªæœåŠ¡å™¨é€šä¿¡ï¼Œä»¥åˆ›å»º/è·å–è¿è¡Œä¿¡æ¯ï¼Œè®°å½•æŒ‡æ ‡ç­‰ã€‚<br>**</em>å‚è€ƒï¼š<em>**[</em>æ–‡æ¡£//è¿è¡Œè·Ÿè¸ªæœåŠ¡å™¨<em>](<a href="https://mlflow.org/docs/latest/tracking.html#running-a-tracking-server" target="_blank" rel="noopener">https://mlflow.org/docs/latest/tracking.html#running-a-tracking-server</a>)<br>ä¸ºäº†æä¾›æ¨¡å‹ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä¸€ä¸ª<strong>è·Ÿè¸ªæœåŠ¡å™¨</strong>ï¼ˆ**</em>å‚è§_<strong><em>å¯åŠ¨UI</em>ï¼‰å’Œä¸€ä¸ª</strong>æ¨¡å‹è¿è¡ŒID**ã€‚<br><br><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639490766-7db77f84-79f9-486e-963c-c574d85d438e.png#align=left&amp;display=inline&amp;height=120&amp;name=1_vBVbyT3F_YFjjfJuSDVrUA.png&amp;originHeight=161&amp;originWidth=1000&amp;size=81585&amp;status=done&amp;width=746" alt="1_vBVbyT3F_YFjjfJuSDVrUA.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Serve a sklearn model through 127.0.0.0:5005</span><br><span class="line">MLFLOW_TRACKING_URI=http://0.0.0.0:5000 mlflow sklearn serve \</span><br><span class="line">  --port 5005  \</span><br><span class="line">  --run_id 0f8691808e914d1087cf097a08730f17 \</span><br><span class="line">  --model-path model</span><br></pre></td></tr></table></figure>
<p>è¦ä½¿ç”¨<strong>MLflowæœåŠ¡åŠŸèƒ½</strong>ä¸ºæ¨¡å‹æä¾›<strong>æœåŠ¡ï¼Œ</strong>æˆ‘ä»¬éœ€è¦è®¿é—®è·Ÿè¸ªUIï¼Œå› æ­¤åªéœ€æŒ‡å®šå³å¯æ£€ç´¢æ¨¡å‹ä¿¡æ¯<code>--run_id</code> ã€‚<br>ä¸€æ—¦è·Ÿè¸ªæœåŠ¡å™¨ä¸ºæ¨¡å‹æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢æ–°çš„æ¨¡å‹ç«¯ç‚¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Query Tracking Server Endpoint</span><br><span class="line">curl -X POST \</span><br><span class="line">  http://127.0.0.1:5005/invocations \</span><br><span class="line">  -H &apos;Content-Type: application/json&apos; \</span><br><span class="line">  -d &apos;[</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;fixed acidity&quot;: 3.42, </span><br><span class="line">		&quot;volatile acidity&quot;: 1.66, </span><br><span class="line">		&quot;citric acid&quot;: 0.48, </span><br><span class="line">		&quot;residual sugar&quot;: 4.2, </span><br><span class="line">		&quot;chloridessssss&quot;: 0.229, </span><br><span class="line">		&quot;free sulfur dsioxide&quot;: 19, </span><br><span class="line">		&quot;total sulfur dioxide&quot;: 25, </span><br><span class="line">		&quot;density&quot;: 1.98, </span><br><span class="line">		&quot;pH&quot;: 5.33, </span><br><span class="line">		&quot;sulphates&quot;: 4.39, </span><br><span class="line">		&quot;alcohol&quot;: 10.8</span><br><span class="line">	&#125;</span><br><span class="line">]&apos;</span><br><span class="line"></span><br><span class="line">&gt; &#123;&quot;predictions&quot;: [5.825055635303461]&#125;</span><br></pre></td></tr></table></figure>
<p><a name="e475db1c"></a></p>
<h3 id="ä»Sparkè¿è¡Œæ¨¡å‹"><a href="#ä»Sparkè¿è¡Œæ¨¡å‹" class="headerlink" title="ä»Sparkè¿è¡Œæ¨¡å‹"></a>ä»Sparkè¿è¡Œæ¨¡å‹</h3><p>è™½ç„¶é€šè¿‡è®­ç»ƒæ¨¡å‹å’Œä½¿ç”¨æœåŠ¡åŠŸèƒ½ï¼ˆ<strong><em>refï¼š</em></strong><a href="https://mlflow.org/docs/latest/models.html#local" target="_blank" rel="noopener"><em>mlflow // docs // models #localï¼‰</em></a>å®æ—¶ä¸ºæ¨¡å‹æä¾›æœåŠ¡éå¸¸å¼ºå¤§ï¼Œä½†ä½¿ç”¨Sparkï¼ˆæ‰¹é‡æˆ–æµå¼ä¼ è¾“ï¼‰åº”ç”¨æ¨¡å‹æ›´æ˜¯å¦‚æ­¤å¼ºå¤§ï¼Œå› ä¸ºå®ƒåŠ å…¥äº†åˆ†é…åŠ›é‡ã€‚<a href="https://mlflow.org/docs/latest/models.html#local" target="_blank" rel="noopener"></a><br>æƒ³è±¡ä¸€ä¸‹ï¼Œè¿›è¡Œç¦»çº¿è®­ç»ƒï¼Œç„¶åä»¥æ›´ç®€å•çš„æ–¹å¼å°†è¾“å‡ºæ¨¡å‹åº”ç”¨äºæ‰€æœ‰æ•°æ®ã€‚è¿™å°±æ˜¯Sparkå’ŒMLflowå…±åŒå®Œç¾çš„åœ°æ–¹ã€‚<br><a name="92cfd913"></a></p>
<h4 id="å®‰è£…PySpark-Jupyter-Spark"><a href="#å®‰è£…PySpark-Jupyter-Spark" class="headerlink" title="å®‰è£…PySpark + Jupyter + Spark"></a>å®‰è£…PySpark + Jupyter + Spark</h4><p><strong><em>å‚è€ƒï¼š</em></strong><a href="https://blog.sicara.com/get-started-pyspark-jupyter-guide-tutorial-ae2fe84f594f" target="_blank" rel="noopener"><em>PySparkå¼€å§‹ - Jupyter</em></a><br>å±•ç¤ºæˆ‘ä»¬å¦‚ä½•å°†MLflowæ¨¡å‹åº”ç”¨äºSparkæ•°æ®å¸§ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨PySparkè®¾ç½®Jupyterç¬”è®°æœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆä¸‹è½½æœ€æ–°çš„ç¨³å®šApache Sparkï¼ˆå½“å‰ç‰ˆæœ¬2.3.2ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">cd ~/Downloads/</span><br><span class="line">tar -xzf spark-2.3.2-bin-hadoop2.7.tgz</span><br><span class="line">mv ~/Downloads/spark-2.3.2-bin-hadoop2.7 ~/</span><br><span class="line">ln -s ~/spark-2.3.2-bin-hadoop2.7 ~/sparkÌ€</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æˆ‘ä»¬çš„virtualEnvä¸­å®‰è£…PySparkå’ŒJupyter</span><br><span class="line"></span><br><span class="line">pip install pyspark jupyter</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®Environmnetå˜é‡</span><br><span class="line"></span><br><span class="line">export SPARK_HOME=~/spark</span><br><span class="line">export PATH=$SPARK_HOME/bin:$PATH</span><br><span class="line">export PYSPARK_DRIVER_PYTHON=jupyter</span><br><span class="line">export PYSPARK_DRIVER_PYTHON_OPTS=&quot;notebook --notebook-dir=$&#123;HOME&#125;/Projects/notebooks&quot;</span><br><span class="line">é€šè¿‡å®šä¹‰notebook-dirï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿå°†æˆ‘ä»¬çš„ç¬”è®°æœ¬å­˜å‚¨å’Œä¿å­˜åœ¨æ‰€éœ€çš„æ–‡ä»¶å¤¹ä¸­ã€‚</span><br></pre></td></tr></table></figure>
<p><a name="f6e12a2e"></a></p>
<h4 id="ä»PySparkå¯åŠ¨Jupyter"><a href="#ä»PySparkå¯åŠ¨Jupyter" class="headerlink" title="ä»PySparkå¯åŠ¨Jupyter"></a>ä»PySparkå¯åŠ¨Jupyter</h4><p>ç”±äºæˆ‘ä»¬å°†Jupyteré…ç½®ä¸º<strong><em>PySparké©±åŠ¨ç¨‹åº</em></strong>ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é™„åŠ åˆ°æˆ‘ä»¬ç¬”è®°æœ¬çš„PySparkä¸Šä¸‹æ–‡å¯åŠ¨Jupyterã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(mlflow) afranzi:~$ pyspark</span><br><span class="line">[I 19:05:01.572 NotebookApp] sparkmagic extension enabled!</span><br><span class="line">[I 19:05:01.573 NotebookApp] Serving notebooks from local directory: /Users/afranzi/Projects/notebooks</span><br><span class="line">[I 19:05:01.573 NotebookApp] The Jupyter Notebook is running at:</span><br><span class="line">[I 19:05:01.573 NotebookApp] http://localhost:8888/?token=c06252daa6a12cfdd33c1d2e96c8d3b19d90e9f6fc171745</span><br><span class="line">[I 19:05:01.573 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 19:05:01.574 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8888/?token=c06252daa6a12cfdd33c1d2e96c8d3b19d90e9f6fc171745</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼ŒMLflowæä¾›äº†å°†æ¨¡å‹å·¥ä»¶è®°å½•åˆ°S3çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œä¸€æ—¦æˆ‘ä»¬é€‰æ‹©äº†ä¸€ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¯¥<code>mlflow.pyfunc</code>æ¨¡å—å°†å…¶ä½œä¸ºUDFå¯¼å…¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import mlflow.pyfunc</span><br><span class="line"></span><br><span class="line">model_path = &apos;s3://&lt;bucket&gt;/mlflow/artifacts/1/0f8691808e914d1087cf097a08730f17/artifacts/model&apos;</span><br><span class="line">wine_path = &apos;/Users/afranzi/Projects/data/winequality-red.csv&apos;</span><br><span class="line">wine_udf = mlflow.pyfunc.spark_udf(spark, model_path)</span><br><span class="line"></span><br><span class="line">df = spark.read.format(&quot;csv&quot;).option(&quot;header&quot;, &quot;true&quot;).option(&apos;delimiter&apos;, &apos;;&apos;).load(wine_path)</span><br><span class="line">columns = [ &quot;fixed acidity&quot;, &quot;volatile acidity&quot;, &quot;citric acid&quot;,</span><br><span class="line">            &quot;residual sugar&quot;, &quot;chlorides&quot;, &quot;free sulfur dioxide&quot;,</span><br><span class="line">            &quot;total sulfur dioxide&quot;, &quot;density&quot;, &quot;pH&quot;,</span><br><span class="line">            &quot;sulphates&quot;, &quot;alcohol&quot;</span><br><span class="line">          ]</span><br><span class="line">          </span><br><span class="line">df.withColumn(&apos;prediction&apos;, wine_udf(*columns)).show(100, False)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639783096-5f2fa010-2bff-4b1f-a478-ec4bde5b218d.png#align=left&amp;display=inline&amp;height=250&amp;name=1_hqSqC1493Tmu5-OHNcKhRg.png&amp;originHeight=335&amp;originWidth=1000&amp;size=196030&amp;status=done&amp;width=746" alt="1_hqSqC1493Tmu5-OHNcKhRg.png"><br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å±•ç¤ºäº†å¦‚ä½•é€šè¿‡åœ¨æˆ‘ä»¬æ‰€æœ‰çš„è‘¡è„é…’æ•°æ®é›†ä¸­è¿è¡Œè‘¡è„é…’è´¨é‡é¢„æµ‹æ¥å°†PySparkä¸MLflowç»“åˆä½¿ç”¨ã€‚ä½†æ˜¯å½“æ‚¨éœ€è¦ä½¿ç”¨Scala Sparkçš„Python MLflowæ¨¡å—æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<br>æˆ‘ä»¬è¿˜è®¾æ³•é€šè¿‡åœ¨Scalaå’ŒPythonä¹‹é—´å…±äº«Spark Contextæ¥æµ‹è¯•å®ƒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æ³¨å†Œçš„MLflow UDFåœ¨Pythonï¼Œç„¶åä»æ–¯å¡æ‹‰ç”¨å®ƒï¼ˆ<em>å¶æ°ï¼Œä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†è‡³å°‘å®ƒçš„ä¸œè¥¿</em><strong>ğŸ­</strong>ï¼‰ã€‚<br><a name="9f923831"></a></p>
<h4 id="Scala-Spark-MLflow"><a href="#Scala-Spark-MLflow" class="headerlink" title="Scala Spark + MLflow"></a>Scala Spark + MLflow</h4><p>å¯¹äºæ­¤ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†Toree <a href="https://toree.apache.org/" target="_blank" rel="noopener"><strong>å†…æ ¸</strong></a>æ·»åŠ åˆ°ç°æœ‰çš„Jupyterä¸­ã€‚<br>å®‰è£…Spark + Toree + Jupyter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install toree</span><br><span class="line">jupyter toree install --spark_home=/Users/afranzi/spark --sys-prefix</span><br><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Available kernels:</span><br><span class="line">  apache_toree_scala    /Users/afranzi/.virtualenvs/mlflow/share/jupyter/kernels/apache_toree_scala</span><br><span class="line">  python3               /Users/afranzi/.virtualenvs/mlflow/share/jupyter/kernels/python3</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚æ‚¨åœ¨é™„å¸¦çš„ç¬”è®°æœ¬ä¸­çœ‹åˆ°çš„ï¼ŒUDFåœ¨Sparkå’ŒPySparkä¹‹é—´å…±äº«ã€‚æˆ‘ä»¬å¸Œæœ›è¿™æœ€åä¸€éƒ¨åˆ†å¯¹é‚£äº›å–œæ¬¢Scalaå¹¶ä¸”å¿…é¡»å°†MLæ¨¡å‹æŠ•å…¥ç”Ÿäº§çš„å›¢é˜Ÿæœ‰æ‰€å¸®åŠ©ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]:</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.col</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.StructType</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;Column, DataFrame&#125;</span><br><span class="line"><span class="keyword">import</span> scala.util.matching.Regex</span><br><span class="line"></span><br><span class="line">val FirstAtRe: Regex = <span class="string">"^_"</span>.r</span><br><span class="line">val AliasRe: Regex = <span class="string">"[\\s_.:@]+"</span>.r</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFieldAlias</span><span class="params">(field_name: String)</span>:</span> String = &#123;</span><br><span class="line">    FirstAtRe.replaceAllIn(AliasRe.replaceAllIn(field_name, <span class="string">"_"</span>), <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">selectFieldsNormalized</span><span class="params">(columns: List[String])</span><span class="params">(df: DataFrame)</span>:</span> DataFrame = &#123;</span><br><span class="line">    val fieldsToSelect: List[Column] = columns.map(field =&gt;</span><br><span class="line">        col(field).<span class="keyword">as</span>(getFieldAlias(field))</span><br><span class="line">    )</span><br><span class="line">    df.select(fieldsToSelect: _*)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">normalizeSchema</span><span class="params">(df: DataFrame)</span>:</span> DataFrame = &#123;</span><br><span class="line">    val schema = df.columns.toList</span><br><span class="line">    df.transform(selectFieldsNormalized(schema))</span><br><span class="line">&#125;</span><br><span class="line">FirstAtRe = ^_</span><br><span class="line">AliasRe = [\s_.:@]+</span><br><span class="line">getFieldAlias: (field_name: String)String</span><br><span class="line">selectFieldsNormalized: (columns: List[String])(df: org.apache.spark.sql.DataFrame)org.apache.spark.sql.DataFrame</span><br><span class="line">normalizeSchema: (df: org.apache.spark.sql.DataFrame)org.apache.spark.sql.DataFrame</span><br><span class="line">Out[<span class="number">1</span>]:</span><br><span class="line">[\s_.:@]+</span><br><span class="line">In [<span class="number">2</span>]:</span><br><span class="line">val winePath = <span class="string">"~/Research/mlflow-workshop/examples/wine_quality/data/winequality-red.csv"</span></span><br><span class="line">val modelPath = <span class="string">"/tmp/mlflow/artifactStore/0/96cba14c6e4b452e937eb5072467bf79/artifacts/model"</span></span><br><span class="line">winePath = ~/Research/mlflow-workshop/examples/wine_quality/data/winequality-red.csv</span><br><span class="line">modelPath = /tmp/mlflow/artifactStore/<span class="number">0</span>/<span class="number">96</span>cba14c6e4b452e937eb5072467bf79/artifacts/model</span><br><span class="line">Out[<span class="number">2</span>]:</span><br><span class="line">/tmp/mlflow/artifactStore/<span class="number">0</span>/<span class="number">96</span>cba14c6e4b452e937eb5072467bf79/artifacts/model</span><br><span class="line">In [<span class="number">3</span>]:</span><br><span class="line">val df = spark.read</span><br><span class="line">              .format(<span class="string">"csv"</span>)</span><br><span class="line">              .option(<span class="string">"header"</span>, <span class="string">"true"</span>)</span><br><span class="line">              .option(<span class="string">"delimiter"</span>, <span class="string">";"</span>)</span><br><span class="line">              .load(winePath)</span><br><span class="line">              .transform(normalizeSchema)</span><br><span class="line">df = [fixed_acidity: string, volatile_acidity: string ... <span class="number">10</span> more fields]</span><br><span class="line">Out[<span class="number">3</span>]:</span><br><span class="line">[fixed_acidity: string, volatile_acidity: string ... <span class="number">10</span> more fields]</span><br><span class="line">In [<span class="number">4</span>]:</span><br><span class="line">%%PySpark</span><br><span class="line"><span class="keyword">import</span> mlflow</span><br><span class="line"><span class="keyword">from</span> mlflow <span class="keyword">import</span> pyfunc</span><br><span class="line"></span><br><span class="line">model_path = <span class="string">"/tmp/mlflow/artifactStore/0/96cba14c6e4b452e937eb5072467bf79/artifacts/model"</span></span><br><span class="line">wine_quality_udf = mlflow.pyfunc.spark_udf(spark, model_path)</span><br><span class="line"></span><br><span class="line">spark.udf.register(<span class="string">"wineQuality"</span>, wine_quality_udf)</span><br><span class="line">Out[<span class="number">4</span>]:</span><br><span class="line">&lt;function spark_udf.&lt;locals&gt;.predict at <span class="number">0x1116a98c8</span>&gt;</span><br><span class="line">In [<span class="number">6</span>]:</span><br><span class="line">df.createOrReplaceTempView(<span class="string">"wines"</span>)</span><br><span class="line">In [<span class="number">10</span>]:</span><br><span class="line">%%SQL</span><br><span class="line">SELECT </span><br><span class="line">    quality,</span><br><span class="line">    wineQuality(</span><br><span class="line">        fixed_acidity,</span><br><span class="line">        volatile_acidity,</span><br><span class="line">        citric_acid,</span><br><span class="line">        residual_sugar,</span><br><span class="line">        chlorides,</span><br><span class="line">        free_sulfur_dioxide,</span><br><span class="line">        total_sulfur_dioxide,</span><br><span class="line">        density,</span><br><span class="line">        pH,</span><br><span class="line">        sulphates,</span><br><span class="line">        alcohol</span><br><span class="line">    ) AS prediction</span><br><span class="line">FROM wines</span><br><span class="line">LIMIT <span class="number">10</span></span><br><span class="line">Out[<span class="number">10</span>]:</span><br><span class="line">+-------+------------------+</span><br><span class="line">|quality|        prediction|</span><br><span class="line">+-------+------------------+</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.576883967129615</span>|</span><br><span class="line">|      <span class="number">5</span>|  <span class="number">5.50664776916154</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.525504822954496</span>|</span><br><span class="line">|      <span class="number">6</span>| <span class="number">5.504311247097457</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.576883967129615</span>|</span><br><span class="line">|      <span class="number">5</span>|<span class="number">5.5556903912725755</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.467882654744997</span>|</span><br><span class="line">|      <span class="number">7</span>| <span class="number">5.710602976324739</span>|</span><br><span class="line">|      <span class="number">7</span>| <span class="number">5.657319539336507</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.345098606538708</span>|</span><br><span class="line">+-------+------------------+</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]:</span><br><span class="line">spark.catalog.listFunctions.filter(<span class="string">'name like "%wineQuality%").show(20, false)</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br><span class="line"><span class="string">|name       |database|description|className|isTemporary|</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br><span class="line"><span class="string">|wineQuality|null    |null       |null     |true       |</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br></pre></td></tr></table></figure>
<p><a name="38ce27d8"></a></p>
<h4 id="ä¸‹ä¸€æ­¥"><a href="#ä¸‹ä¸€æ­¥" class="headerlink" title="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥</h4><p>å°½ç®¡MLflowç›®å‰å¤„äºAlphaï¼ˆğŸ¥ï¼‰ï¼Œä½†å®ƒçœ‹èµ·æ¥å¾ˆæœ‰å¸Œæœ›ã€‚åªéœ€èƒ½å¤Ÿè¿è¡Œå¤šä¸ªæœºå™¨å­¦ä¹ æ¡†æ¶å¹¶ä»åŒä¸€ç«¯ç‚¹ä½¿ç”¨å®ƒä»¬ï¼Œå®ƒå°±èƒ½å°†æ‰€æœ‰æ¨èç³»ç»Ÿæå‡åˆ°æ–°çš„æ°´å¹³ã€‚<br>æ­¤å¤–ï¼ŒMLflow é€šè¿‡åœ¨å®ƒä»¬ä¹‹é—´å»ºç«‹å…¬å…±å±‚ï¼Œä½¿&gt; <strong>æ•°æ®å·¥ç¨‹å¸ˆ</strong>å’Œæ•°æ®ç§‘å­¦å®¶&gt; <strong>æ›´åŠ æ¥è¿‘</strong> ã€‚&gt;<br>åœ¨å¯¹MLflowè¿›è¡Œè¿™é¡¹ç ”ç©¶ä¹‹åï¼Œæˆ‘ä»¬ç¡®ä¿¡æˆ‘ä»¬å°†è¿›ä¸€æ­¥ç ”ç©¶å®ƒå¹¶å¼€å§‹åœ¨Sparkç®¡é“å’Œæˆ‘ä»¬çš„æ¨èç³»ç»Ÿä¸­ä½¿ç”¨å®ƒã€‚<br>è®©æ–‡ä»¶å­˜å‚¨ä¸æ•°æ®åº“åŒæ­¥è€Œä¸æ˜¯ä½¿ç”¨FSä¼šå¾ˆå¥½ã€‚è¿™åº”è¯¥å…è®¸å¤šä¸ªç«¯ç‚¹ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶å­˜å‚¨ã€‚å°±åƒä½¿ç”¨ç›¸åŒçš„<a href="https://aws.amazon.com/glue/" target="_blank" rel="noopener">Glue Metastore</a>æœ‰å¤šä¸ª<a href="https://prestodb.io/" target="_blank" rel="noopener">Presto</a>å’Œ<a href="https://aws.amazon.com/athena/" target="_blank" rel="noopener">Athena</a>å®ä¾‹ä¸€æ ·ã€‚<a href="https://aws.amazon.com/glue/" target="_blank" rel="noopener"></a><br>æœ€åï¼Œæ„Ÿè°¢MLflowèƒŒåçš„æ‰€æœ‰ç¤¾åŒºï¼Œä½¿å…¶æˆä¸ºå¯èƒ½ï¼Œè®©æˆ‘ä»¬çš„æ•°æ®æ›´æœ‰è¶£ã€‚<br>å¦‚æœæ‚¨æ­£åœ¨ç©MLflowï¼Œè¯·<strong>éšæ—¶è”ç³»æˆ‘ä»¬</strong>å¹¶æä¾›æœ‰å…³æ‚¨å¦‚ä½•ä½¿ç”¨å®ƒçš„ä¸€äº›åé¦ˆï¼æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨MLflowã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/MLflowæ¨¡å‹" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/yuque/MLflowæ¨¡å‹/">MLflowæ¨¡å‹</a>
    </h1>
  

        
        <a href="/2019/03/15/yuque/MLflowæ¨¡å‹/" class="archive-article-date">
  	<time datetime="2019-03-15T07:28:46.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-03-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a name="e2cd7971"></a></p>
<h1 id="MLflowæ¨¡å‹"><a href="#MLflowæ¨¡å‹" class="headerlink" title="MLflowæ¨¡å‹"></a>MLflowæ¨¡å‹<a href="https://mlflow.org/docs/latest/models.html#mlflow-models" target="_blank" rel="noopener"></a></h1><p>MLflowæ¨¡å‹æ˜¯ç”¨äºæ‰“åŒ…æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ ‡å‡†æ ¼å¼ï¼Œå¯ç”¨äºå„ç§ä¸‹æ¸¸å·¥å…· - ä¾‹å¦‚ï¼Œé€šè¿‡REST APIå®æ—¶æä¾›æœåŠ¡æˆ–åœ¨Apache Sparkä¸Šè¿›è¡Œæ‰¹é‡æ¨ç†ã€‚è¯¥æ ¼å¼å®šä¹‰äº†ä¸€ç§çº¦å®šï¼Œå…è®¸æ‚¨ä»¥ä¸åŒçš„â€œé£æ ¼â€ä¿å­˜æ¨¡å‹ï¼Œè¿™äº›â€œé£å‘³â€å¯ä»¥è¢«ä¸åŒçš„ä¸‹æ¸¸å·¥å…·ç†è§£ã€‚</p>
<p>ç›®å½•</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/models.html#storage-format" target="_blank" rel="noopener">å­˜å‚¨æ ¼å¼</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#model-api" target="_blank" rel="noopener">æ¨¡å‹API</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#built-in-model-flavors" target="_blank" rel="noopener">å†…ç½®å‹å·å£å‘³</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#custom-flavors" target="_blank" rel="noopener">è‡ªå®šä¹‰å£å‘³</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#built-in-deployment-tools" target="_blank" rel="noopener">å†…ç½®éƒ¨ç½²å·¥å…·</a><br><a name="2dd6d735"></a><h2 id="å­˜å‚¨æ ¼å¼"><a href="#å­˜å‚¨æ ¼å¼" class="headerlink" title="å­˜å‚¨æ ¼å¼"></a><a href="https://mlflow.org/docs/latest/models.html#id2" target="_blank" rel="noopener">å­˜å‚¨æ ¼å¼</a></h2>æ¯ä¸ªMLflowæ¨¡å‹éƒ½æ˜¯ä¸€ä¸ªåŒ…å«ä»»æ„æ–‡ä»¶<code>MLmodel</code> çš„ç›®å½•ï¼Œä»¥åŠç›®å½•æ ¹ç›®å½•ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¯ä»¥å®šä¹‰å¯ä»¥æŸ¥çœ‹æ¨¡å‹çš„å¤šç§_é£æ ¼_ã€‚<br>ä½¿MLflowæ¨¡å‹åŠŸèƒ½å¼ºå¤§çš„å…³é”®æ¦‚å¿µï¼šå®ƒä»¬æ˜¯éƒ¨ç½²å·¥å…·å¯ç”¨äºç†è§£æ¨¡å‹çš„çº¦å®šï¼Œè¿™ä½¿å¾—ç¼–å†™å¯ä¸ä»»ä½•MLåº“ä¸­çš„æ¨¡å‹ä¸€èµ·ä½¿ç”¨çš„å·¥å…·æˆä¸ºå¯èƒ½ï¼Œè€Œæ— éœ€å°†æ¯ä¸ªå·¥å…·ä¸æ¯ä¸ªåº“é›†æˆã€‚MLflowå®šä¹‰äº†æ‰€æœ‰å†…ç½®éƒ¨ç½²å·¥å…·æ”¯æŒçš„å‡ ç§â€œæ ‡å‡†â€é£æ ¼ï¼Œä¾‹å¦‚æè¿°å¦‚ä½•å°†æ¨¡å‹ä½œä¸ºPythonå‡½æ•°è¿è¡Œçš„â€œPythonå‡½æ•°â€é£æ ¼ã€‚ä½†æ˜¯ï¼Œåº“ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨å…¶ä»–ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒMLflowçš„<a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#module-mlflow.sklearn" target="_blank" rel="noopener"><code>mlflow.sklearn</code></a>åº“å…è®¸å°†æ¨¡å‹åŠ è½½ä¸ºscikit-learn <code>Pipeline</code>å¯¹è±¡ï¼Œä»¥ä¾¿åœ¨çŸ¥é“scikit-learnçš„ä»£ç ä¸­ä½¿ç”¨ï¼Œæˆ–è€…ä½œä¸ºé€šç”¨Pythonå‡½æ•°ç”¨äºä»…éœ€è¦åº”ç”¨æ¨¡å‹çš„å·¥å…·ï¼ˆä¾‹å¦‚ï¼Œå·¥å…·ï¼‰ç”¨äºå°†æ¨¡å‹éƒ¨ç½²åˆ°Amazon SageMakerï¼‰ã€‚<br>ç‰¹å®šæ¨¡å‹æ”¯æŒçš„æ‰€æœ‰é£æ ¼éƒ½<code>MLmodel</code>ä»¥YAMLæ ¼å¼åœ¨å…¶æ–‡ä»¶ä¸­å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œ<a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#module-mlflow.sklearn" target="_blank" rel="noopener"><code>mlflow.sklearn</code></a>è¾“å‡ºæ¨¡å‹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Directory written by mlflow.sklearn.save_model(model, &quot;my_model&quot;)</span><br><span class="line">my_model/</span><br><span class="line">â”œâ”€â”€ MLmodel</span><br><span class="line">â””â”€â”€ model.pkl</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„<code>MLmodel</code>æ–‡ä»¶æè¿°äº†ä¸¤ç§é£æ ¼ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">time_created:</span> <span class="number">2018</span><span class="bullet">-05</span><span class="bullet">-25</span><span class="attr">T17:28:53.35</span></span><br><span class="line"></span><br><span class="line"><span class="attr">flavors:</span></span><br><span class="line"><span class="attr">  sklearn:</span></span><br><span class="line"><span class="attr">    sklearn_version:</span> <span class="number">0.19</span><span class="number">.1</span></span><br><span class="line"><span class="attr">    pickled_model:</span> <span class="string">model.pkl</span></span><br><span class="line"><span class="attr">  python_function:</span></span><br><span class="line"><span class="attr">    loader_module:</span> <span class="string">mlflow.sklearn</span></span><br></pre></td></tr></table></figure>
<p>è¯¥æ¨¡å‹ç„¶åå¯ä»¥ä¸ä»»ä½•æ”¯æŒå·¥å…·ä¸­ä½¿ç”¨_ä»»ä¸€_çš„<code>sklearn</code>æˆ– <code>python_function</code>æ¨¡å‹çš„å‘³é“ã€‚ä¾‹å¦‚ï¼Œè¯¥å‘½ä»¤å¯ä»¥ä¸ºå…·æœ‰flavor çš„æ¨¡å‹æä¾›æœåŠ¡ï¼š<code>mlflow sklearn`</code>sklearn`</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow sklearn serve my_model</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œå‘½ä»¤è¡Œå·¥å…·å¯ä»¥å°†æ¨¡å‹æ‰“åŒ…å¹¶éƒ¨ç½²åˆ°AWS SageMakerï¼Œåªè¦å®ƒä»¬æ”¯æŒè¿™ç§é£æ ¼ï¼š<code>mlflow sagemaker`</code>python_function`</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow sagemaker deploy -m my_model [other options]</span><br></pre></td></tr></table></figure>
<p><a name="ce13267d"></a></p>
<h3 id="MLmodelæ ¼å¼çš„å­—æ®µ"><a href="#MLmodelæ ¼å¼çš„å­—æ®µ" class="headerlink" title="MLmodelæ ¼å¼çš„å­—æ®µ"></a>MLmodelæ ¼å¼çš„å­—æ®µ<a href="https://mlflow.org/docs/latest/models.html#fields-in-the-mlmodel-format" target="_blank" rel="noopener"></a></h3><p>é™¤äº†ä»<strong>å£å‘³</strong>åœºåˆ—å‡ºäº†æ¨¡å‹çš„å£å‘³ï¼Œåœ¨MLmodel YAMLæ ¼å¼å¯ä»¥åŒ…å«ä»¥ä¸‹å­—æ®µï¼š<br><a name="TIME_CREATED"></a></p>
<h4 id="TIME-CREATED"><a href="#TIME-CREATED" class="headerlink" title="TIME_CREATED"></a>TIME_CREATED</h4><p>åˆ›å»ºæ¨¡å‹çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œé‡‡ç”¨UTC ISO 8601æ ¼å¼ã€‚<br><a name="run_id"></a></p>
<h4 id="run-id"><a href="#run-id" class="headerlink" title="run_id"></a>run_id</h4><p>å¦‚æœä½¿ç”¨<a href="https://mlflow.org/docs/latest/tracking.html#tracking" target="_blank" rel="noopener">MLflow Tracking</a>ä¿å­˜æ¨¡å‹ï¼Œåˆ™åˆ›å»ºæ¨¡å‹çš„è¿è¡Œçš„ID ã€‚<br><a name="9f4e50f6"></a></p>
<h2 id="æ¨¡å‹API"><a href="#æ¨¡å‹API" class="headerlink" title="æ¨¡å‹API"></a><a href="https://mlflow.org/docs/latest/models.html#id3" target="_blank" rel="noopener">æ¨¡å‹API</a><a href="https://mlflow.org/docs/latest/models.html#model-api" target="_blank" rel="noopener"></a></h2><p>æ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä¿å­˜å’ŒåŠ è½½MLflowæ¨¡å‹ã€‚é¦–å…ˆï¼ŒMLflowåŒ…æ‹¬ä¸å‡ ä¸ªå…¬å…±åº“çš„é›†æˆã€‚ä¾‹å¦‚ï¼Œscikit-learnæ¨¡å‹çš„<code>[mlflow.sklearn](https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#module-mlflow.sklearn)åŒ…æ‹¬</code><a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#mlflow.sklearn.save_model" target="_blank" rel="noopener"><code>save_model</code></a>ï¼Œ<a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#mlflow.sklearn.log_model" target="_blank" rel="noopener"><code>log_model</code></a>å’Œ<a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#mlflow.sklearn.load_model" target="_blank" rel="noopener"><code>load_model</code></a>å‡½æ•°ã€‚å…¶æ¬¡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model" target="_blank" rel="noopener"><code>mlflow.models.Model</code></a>è¯¥ç±»æ¥åˆ›å»ºå’Œç¼–å†™æ¨¡å‹ã€‚è¿™ä¸ªç±»æœ‰å››ä¸ªå…³é”®åŠŸèƒ½ï¼š</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model.add_flavor" target="_blank" rel="noopener"><code>add_flavor</code></a>ä¸ºæ¨¡å‹æ·»åŠ å‘³é“ã€‚æ¯ä¸ªflavoréƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åç§°å’Œä¸€ä¸ªé”®å€¼å±æ€§å­—å…¸ï¼Œå…¶ä¸­å€¼å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥åºåˆ—åŒ–ä¸ºYAMLçš„å¯¹è±¡ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model.save" target="_blank" rel="noopener"><code>save</code></a> å°†æ¨¡å‹ä¿å­˜åˆ°æœ¬åœ°ç›®å½•ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model.log" target="_blank" rel="noopener"><code>log</code></a> ä½¿ç”¨MLflow Trackingå°†æ¨¡å‹è®°å½•ä¸ºå½“å‰è¿è¡Œä¸­çš„å·¥ä»¶ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model.load" target="_blank" rel="noopener"><code>load</code></a> ä»æœ¬åœ°ç›®å½•æˆ–å…ˆå‰è¿è¡Œä¸­çš„å·¥ä»¶åŠ è½½æ¨¡å‹ã€‚<br><a name="5e2a9075"></a><h2 id="å†…ç½®å‹å·å£å‘³"><a href="#å†…ç½®å‹å·å£å‘³" class="headerlink" title="å†…ç½®å‹å·å£å‘³"></a><a href="https://mlflow.org/docs/latest/models.html#id4" target="_blank" rel="noopener">å†…ç½®å‹å·å£å‘³</a><a href="https://mlflow.org/docs/latest/models.html#built-in-model-flavors" target="_blank" rel="noopener"></a></h2>MLflowæä¾›äº†å‡ ç§å¯èƒ½åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­æœ‰ç”¨çš„æ ‡å‡†é£æ ¼ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒçš„è®¸å¤šéƒ¨ç½²å·¥å…·éƒ½æ”¯æŒè¿™äº›é£æ ¼ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†è¿™äº›é£æ ¼å¯¼å‡ºè‡ªå·±çš„æ¨¡å‹ï¼Œä»¥ä¾¿ä»æ‰€æœ‰è¿™äº›å·¥å…·ä¸­å—ç›Šã€‚<br><a name="19753d27"></a><h3 id="Pythonå‡½æ•°ï¼ˆpython-functionï¼‰"><a href="#Pythonå‡½æ•°ï¼ˆpython-functionï¼‰" class="headerlink" title="Pythonå‡½æ•°ï¼ˆpython_functionï¼‰"></a>Pythonå‡½æ•°ï¼ˆ<code>python_function</code>ï¼‰<a href="https://mlflow.org/docs/latest/models.html#python-function-python-function" target="_blank" rel="noopener"></a></h3>è¯¥<code>python_function</code>æ¨¡å‹çš„å‘³é“å®šä¹‰äº†ä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ä¸ºPythonæ¨¡å‹å’Œä¿å­˜å’ŒåŠ è½½æ¨¡å‹ï¼Œå¹¶ä»è¯¥æ ¼å¼æä¾›äº†å·¥å…·ã€‚è¯¥æ ¼å¼æ˜¯è‡ªåŒ…å«çš„ï¼Œå› ä¸ºå®ƒåŒ…å«åŠ è½½å’Œä½¿ç”¨æ¨¡å‹æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä¾èµ–å…³ç³»ç›´æ¥å­˜å‚¨åœ¨æ¨¡å‹ä¸­æˆ–é€šè¿‡Condaç¯å¢ƒå¼•ç”¨ã€‚<br><code>python_function</code>æ¨¡å‹çš„çº¦å®šæ˜¯å…·æœ‰<code>predict</code>ä»¥ä¸‹ç­¾åçš„æ–¹æ³•æˆ–å‡½æ•°ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">predict(data: pandas.DataFrame) -&gt; [pandas.DataFrame | numpy.array]</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–MLflowç»„ä»¶æœŸæœ›<code>python_function</code>æ¨¡å‹éµå¾ªæ­¤çº¦å®šã€‚<br>è¯¥<code>python_function</code>æ¨¡å‹æ ¼å¼å®šä¹‰ä¸ºåŒ…å«æ‰€æœ‰æ‰€éœ€çš„æ•°æ®çš„ç›®å½•ç»“æ„ï¼Œä»£ç å’Œé…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./dst-path/</span><br><span class="line">        ./MLmodel: configuration</span><br><span class="line">        &lt;code&gt;: code packaged with the model (specified in the MLmodel file)</span><br><span class="line">        &lt;data&gt;: data packaged with the model (specified in the MLmodel file)</span><br><span class="line">        &lt;env&gt;: Conda environment definition (specified in the MLmodel file)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª<code>python_function</code>æ¨¡å¼ç›®å½•å¿…é¡»åŒ…å«<code>MLmodel</code>åœ¨å…¶ä¸â€œpython_functionâ€æ ¼å¼å’Œä¸‹åˆ—å‚æ•°çš„æ ¹æ–‡ä»¶ï¼š<br><a name="a437d5e1"></a></p>
<h4 id="loader-module-required"><a href="#loader-module-required" class="headerlink" title="loader_module [required]:"></a>loader_module [required]:</h4><p>å¯ä»¥åŠ è½½æ¨¡å‹çš„Pythonæ¨¡å—ã€‚æœŸæœ›æ˜¯<code>mlflow.sklearn</code>å¯å¯¼å…¥çš„æ¨¡å—æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ï¼‰<code>importlib.import_module</code>ã€‚å¯¼å…¥çš„æ¨¡å—å¿…é¡»åŒ…å«å…·æœ‰ä»¥ä¸‹ç­¾åçš„å‡½æ•°ï¼š<br>&gt; _load_pyfuncï¼ˆpathï¼šstringï¼‰ - &gt; <pyfunc model></pyfunc></p>
<p>pathå‚æ•°ç”±<code>data</code>å‚æ•°æŒ‡å®šï¼Œå¯ä»¥å¼•ç”¨æ–‡ä»¶æˆ–ç›®å½•ã€‚<br><a name="00d57722"></a></p>
<h4 id="code-optional"><a href="#code-optional" class="headerlink" title="code [optional]:"></a>code [optional]:</h4><p>åŒ…å«æ­¤æ¨¡å‹æ‰“åŒ…çš„ä»£ç çš„ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚åœ¨å¯¼å…¥æ¨¡å‹åŠ è½½å™¨ä¹‹å‰ï¼Œæ­¤ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•éƒ½å°†æ·»åŠ åˆ°Pythonè·¯å¾„ä¸­ã€‚<br><a name="b1b6f654"></a></p>
<h4 id="data-optional"><a href="#data-optional" class="headerlink" title="data [optional]:"></a>data [optional]:</h4><p>åŒ…å«æ¨¡å‹æ•°æ®çš„æ–‡ä»¶æˆ–ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚è·¯å¾„ä¼ é€’ç»™æ¨¡å‹åŠ è½½å™¨ã€‚<br><a name="6bbe3903"></a></p>
<h4 id="env-å¯é€‰-ï¼š"><a href="#env-å¯é€‰-ï¼š" class="headerlink" title="env [å¯é€‰]ï¼š"></a>env [å¯é€‰]ï¼š</h4><p>å¯¼å‡ºçš„Condaç¯å¢ƒçš„ç›¸å¯¹è·¯å¾„ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™åœ¨è¿è¡Œæ¨¡å‹ä¹‹å‰æ¿€æ´»æ­¤ç¯å¢ƒã€‚<br><a name="cf3e2664"></a></p>
<h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree example/sklearn_iris/mlruns/run1/outputs/linear-lr</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ MLmodel</span><br><span class="line">â”œâ”€â”€ code</span><br><span class="line">â”‚   â”œâ”€â”€ sklearn_iris.py</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ data</span><br><span class="line">â”‚   â””â”€â”€ model.pkl</span><br><span class="line">â””â”€â”€ mlflow_env.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example/sklearn_iris/mlruns/run1/outputs/linear-lr/MLmodel</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python_function:</span><br><span class="line">  code: code</span><br><span class="line">  data: data/model.pkl</span><br><span class="line">  loader_module: mlflow.sklearn</span><br><span class="line">  env: mlflow_env.yml</span><br><span class="line">  main: sklearn_iris</span><br></pre></td></tr></table></figure>
<p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#module-mlflow.pyfunc" target="_blank" rel="noopener"><code>mlflow.pyfunc</code></a>ã€‚<br><a name="b099026c"></a></p>
<h3 id="H-Oï¼ˆh2oï¼‰"><a href="#H-Oï¼ˆh2oï¼‰" class="headerlink" title="H  Oï¼ˆh2oï¼‰"></a>H  Oï¼ˆ<code>h2o</code>ï¼‰<a href="https://mlflow.org/docs/latest/models.html#h2o-h2o" target="_blank" rel="noopener"></a></h3><p>H2Oæ¨¡å‹é£å‘³å¯ä»¥è®°å½•å’ŒåŠ è½½H2Oæ¨¡å‹ã€‚è¿™äº›æ¨¡å‹å°†é€šè¿‡ä½¿ç”¨ä¿å­˜<a href="https://mlflow.org/docs/latest/python_api/mlflow.h2o.html#mlflow.h2o.save_model" target="_blank" rel="noopener"><code>mlflow.h2o.save_model</code></a>ã€‚ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/mlflow.h2o.html#mlflow.h2o.log_model" target="_blank" rel="noopener"><code>mlflow.h2o.log_model</code></a>ä¹Ÿå°†å¯ç”¨æœ‰æ•ˆçš„å‘³é“ã€‚<code>Python Function</code><br>å°†H2Oæ¨¡å‹ä½œä¸ºPyFuncæ¨¡å‹åŠ è½½æ—¶ï¼Œ<code>h2o.init(...)</code>å°†è°ƒç”¨ã€‚å› æ­¤ï¼Œæ­£ç¡®ç‰ˆæœ¬çš„h2oï¼ˆ-pyï¼‰å¿…é¡»åœ¨ç¯å¢ƒä¸­ã€‚ç»™å‡ºçš„å‚æ•°<code>h2o.init(...)</code>å¯ä»¥<code>model.h2o/h2o.yaml</code>åœ¨é”®ä¸‹å®šåˆ¶<code>init</code>ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://mlflow.org/docs/latest/python_api/mlflow.h2o.html#module-mlflow.h2o" target="_blank" rel="noopener"><code>mlflow.h2o</code></a>ã€‚<br><a name="778f4101"></a></p>
<h3 id="Kerasï¼ˆkerasï¼‰"><a href="#Kerasï¼ˆkerasï¼‰" class="headerlink" title="Kerasï¼ˆkerasï¼‰"></a>Kerasï¼ˆ<code>keras</code>ï¼‰</h3><p>è¯¥<code>keras</code>æ¨¡å‹å‘³é“å¯ç”¨æ—¥å¿—è®°å½•å’Œè£…è½½Kerasæ¨¡å‹ã€‚è¯¥æ¨¡å‹å°†é€šè¿‡Kerasæä¾›çš„model_saveåŠŸèƒ½ä»¥HDF5æ–‡ä»¶æ ¼å¼ä¿å­˜ã€‚æ­¤å¤–ï¼Œæ¨¡å‹å¯ä»¥åŠ è½½ä¸ºã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ã€‚<code>Python Function</code><a href="https://mlflow.org/docs/latest/python_api/mlflow.keras.html#module-mlflow.keras" target="_blank" rel="noopener"><code>mlflow.keras</code></a><br><a name="bc0099ae"></a></p>
<h3 id="MLeapï¼ˆmleapï¼‰"><a href="#MLeapï¼ˆmleapï¼‰" class="headerlink" title="MLeapï¼ˆmleapï¼‰"></a>MLeapï¼ˆ<code>mleap</code>ï¼‰</h3><p>è¯¥<code>mleap</code>æ¨¡å‹é£å‘³æ”¯æŒä½¿ç”¨MLeapæŒä¹…æ€§æœºåˆ¶ä¿å­˜æ¨¡å‹ã€‚è¯¥<code>mlflow/java</code>è½¯ä»¶åŒ…ä¸­æä¾›äº†ä¸€ä¸ªç”¨äºåŠ è½½å…·æœ‰MLeapé£æ ¼æ ¼å¼çš„MLflowæ¨¡å‹çš„é…å¥—æ¨¡å—ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://mlflow.org/docs/latest/python_api/mlflow.mleap.html#module-mlflow.mleap" target="_blank" rel="noopener"><code>mlflow.mleap</code></a>ã€‚<br><a name="cf77fb8a"></a></p>
<h3 id="PyTorchï¼ˆpytorchï¼‰"><a href="#PyTorchï¼ˆpytorchï¼‰" class="headerlink" title="PyTorchï¼ˆpytorchï¼‰"></a>PyTorchï¼ˆ<code>pytorch</code>ï¼‰</h3><p>è¯¥<code>pytorch</code>æ¨¡å‹å‘³é“å¯ç”¨æ—¥å¿—è®°å½•å’Œè£…è½½PyTorchæ¨¡å‹ã€‚æ¨¡å‹ä½¿ç”¨torch.saveï¼ˆæ¨¡å‹ï¼‰æ–¹æ³•ä»¥.pthæ ¼å¼å®Œå…¨å­˜å‚¨ã€‚ç»™å®šåŒ…å«å·²ä¿å­˜æ¨¡å‹çš„ç›®å½•ï¼Œæ‚¨å¯ä»¥å°†æ¨¡å‹è®°å½•åˆ°MLflow via ã€‚ç„¶åå¯ä»¥åŠ è½½ä¿å­˜çš„æ¨¡å‹ä»¥è¿›è¡Œæ¨ç†ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ã€‚<code>log_saved_model`</code>mlflow.pyfunc.load_pyfunc()<code>[</code>mlflow.pytorch`](<a href="https://mlflow.org/docs/latest/python_api/mlflow.pytorch.html#module-mlflow.pytorch" target="_blank" rel="noopener">https://mlflow.org/docs/latest/python_api/mlflow.pytorch.html#module-mlflow.pytorch</a>)<br><a name="0fdc419b"></a></p>
<h3 id="Scikit-learnï¼ˆsklearnï¼‰"><a href="#Scikit-learnï¼ˆsklearnï¼‰" class="headerlink" title="Scikit-learnï¼ˆsklearnï¼‰"></a>Scikit-learnï¼ˆ<code>sklearn</code>ï¼‰</h3><p>è¯¥<code>sklearn</code>æ¨¡å‹çš„å‘³é“æä¾›äº†ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ç•Œé¢æ¥å¤„ç†scikitå­¦ä¹ æ¨¡å¼ï¼Œæ²¡æœ‰å¤–éƒ¨çš„ä¾èµ–å…³ç³»ã€‚å®ƒä½¿ç”¨Pythonçš„pickleæ¨¡å—ä¿å­˜å’ŒåŠ è½½æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆæœ‰æ•ˆçš„ <code>python_function</code>flavoræ¨¡å‹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://mlflow.org/docs/latest/python_api/mlflow.sklearn.html#module-mlflow.sklearn" target="_blank" rel="noopener"><code>mlflow.sklearn</code></a>ã€‚<br><a name="cddd0a6a"></a></p>
<h3 id="Spark-MLlibï¼ˆsparkï¼‰"><a href="#Spark-MLlibï¼ˆsparkï¼‰" class="headerlink" title="Spark MLlibï¼ˆsparkï¼‰"></a>Spark MLlibï¼ˆ<code>spark</code>ï¼‰</h3><p>è¯¥<code>spark</code>æ¨¡å‹çš„å‘³é“èƒ½ä½¿å‡ºå£æ˜Ÿç«MLlibæ¨¡å‹ä½œä¸ºMLflowæ¨¡å‹ã€‚å¯¼å‡ºçš„æ¨¡å‹ä½¿ç”¨Spark MLLibçš„æœ¬æœºåºåˆ—åŒ–è¿›è¡Œä¿å­˜ï¼Œç„¶åå¯ä»¥ä½œä¸ºMLlibæ¨¡å‹åŠ è½½å›æ¥æˆ–ä½œä¸º<code>python_function</code>æ¨¡å‹è¿›è¡Œéƒ¨ç½²ã€‚å½“éƒ¨ç½²ä¸ºaæ—¶<code>python_function</code>ï¼Œæ¨¡å‹ä¼šåˆ›å»ºè‡ªå·±çš„SparkContextï¼Œå¹¶åœ¨è¯„åˆ†ä¹‹å‰å°†pandas DataFrameè¾“å…¥è½¬æ¢ä¸ºSpark DataFrameã€‚è™½ç„¶è¿™ä¸æ˜¯æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯å¯¹äºå®æ—¶è¯„åˆ†ï¼Œä½†å®ƒä½¿æ‚¨èƒ½å¤Ÿè½»æ¾åœ°å°†ä»»ä½•MLlib PipelineModelï¼ˆåªè¦PipelineModelæ²¡æœ‰å¤–éƒ¨JARä¾èµ–æ€§ï¼‰éƒ¨ç½²åˆ°MLflowæ”¯æŒçš„ä»»ä½•ç«¯ç‚¹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://mlflow.org/docs/latest/python_api/mlflow.spark.html#module-mlflow.spark" target="_blank" rel="noopener"><code>mlflow.spark</code></a>ã€‚<br><a name="2e423970"></a></p>
<h3 id="TensorFlowï¼ˆtensorflowï¼‰"><a href="#TensorFlowï¼ˆtensorflowï¼‰" class="headerlink" title="TensorFlowï¼ˆtensorflowï¼‰"></a>TensorFlowï¼ˆ<code>tensorflow</code>ï¼‰</h3><p>è¯¥<code>tensorflow</code>æ¨¡å‹çš„å‘³é“ä½¿è®°å½•TensorFlow å¹¶åŠ è½½å®ƒä»¬æ—©åœ¨æ¨¡å‹ä¸Šå¤§ç†ŠçŒ«DataFramesæ¨æ–­ã€‚ç»™å®šåŒ…å«å·²ä¿å­˜æ¨¡å‹çš„ç›®å½•ï¼Œæ‚¨å¯ä»¥å°†æ¨¡å‹è®°å½•åˆ°MLflow ï¼Œç„¶åä½¿ç”¨åŠ è½½ä¿å­˜çš„æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ã€‚<code>Saved Models`</code>Python Function<code>log_saved_model</code>mlflow.pyfunc.load_pyfunc<code>[</code>mlflow.tensorflow`](<a href="https://mlflow.org/docs/latest/python_api/mlflow.tensorflow.html#module-mlflow.tensorflow" target="_blank" rel="noopener">https://mlflow.org/docs/latest/python_api/mlflow.tensorflow.html#module-mlflow.tensorflow</a>)<br><a name="e070d9ab"></a></p>
<h2 id="è‡ªå®šä¹‰å£å‘³"><a href="#è‡ªå®šä¹‰å£å‘³" class="headerlink" title="è‡ªå®šä¹‰å£å‘³"></a><a href="https://mlflow.org/docs/latest/models.html#id5" target="_blank" rel="noopener">è‡ªå®šä¹‰å£å‘³</a><a href="https://mlflow.org/docs/latest/models.html#custom-flavors" target="_blank" rel="noopener"></a></h2><p>æ‚¨å¯ä»¥åœ¨MLmodelæ–‡ä»¶ä¸­æ·»åŠ ä¸€ç§é£æ ¼ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥ç¼–å†™æˆ–ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/mlflow.models.html#mlflow.models.Model" target="_blank" rel="noopener"><code>mlflow.models.Model</code></a>ç±»æ„å»ºå®ƒã€‚ä¸ºæ‚¨çš„é£å‘³é€‰æ‹©ä¸€ä¸ªä»»æ„çš„å­—ç¬¦ä¸²åç§°ã€‚MLflowå·¥å…·å¿½ç•¥ä»–ä»¬ä¸ç†è§£çš„MLmodelæ–‡ä»¶ä¸­çš„é£æ ¼ã€‚<br><a name="197ccaae"></a></p>
<h2 id="å†…ç½®éƒ¨ç½²å·¥å…·"><a href="#å†…ç½®éƒ¨ç½²å·¥å…·" class="headerlink" title="å†…ç½®éƒ¨ç½²å·¥å…·"></a><a href="https://mlflow.org/docs/latest/models.html#id6" target="_blank" rel="noopener">å†…ç½®éƒ¨ç½²å·¥å…·</a></h2><p>MLflowæä¾›äº†åœ¨æœ¬åœ°è®¡ç®—æœºå’Œå¤šä¸ªç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²æ¨¡å‹çš„å·¥å…·ã€‚å¹¶éæ‰€æœ‰éƒ¨ç½²æ–¹æ³•éƒ½é€‚ç”¨äºæ‰€æœ‰å‹å·çš„é£æ ¼ã€‚Pythonå‡½æ•°æ ¼å¼å’Œæ‰€æœ‰å…¼å®¹æ ¼å¼æ”¯æŒéƒ¨ç½²ã€‚</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-as-a-local-rest-api-endpoint" target="_blank" rel="noopener">å°†<code>python_function</code>æ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST APIç«¯ç‚¹</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-on-microsoft-azure-ml" target="_blank" rel="noopener"><code>python_function</code>åœ¨Microsoft Azure MLä¸Šéƒ¨ç½²æ¨¡å‹</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-on-amazon-sagemaker" target="_blank" rel="noopener"><code>python_function</code>åœ¨Amazon SageMakerä¸Šéƒ¨ç½²æ¨¡å‹</a></li>
<li><a href="https://mlflow.org/docs/latest/models.html#export-a-python-function-model-as-an-apache-spark-udf" target="_blank" rel="noopener">å°†<code>python_function</code>æ¨¡å‹å¯¼å‡ºä¸ºApache Spark UDF</a><br><a name="14f802bf"></a><h3 id="å°†python-functionæ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST-APIç«¯ç‚¹"><a href="#å°†python-functionæ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST-APIç«¯ç‚¹" class="headerlink" title="å°†python_functionæ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST APIç«¯ç‚¹"></a><a href="https://mlflow.org/docs/latest/models.html#id7" target="_blank" rel="noopener">å°†<code>python_function</code>æ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST APIç«¯ç‚¹</a><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-as-a-local-rest-api-endpoint" target="_blank" rel="noopener"></a></h3>MLflowå¯ä»¥åœ¨æœ¬åœ°éƒ¨ç½²æ¨¡å‹ä½œä¸ºæœ¬åœ°REST APIç«¯ç‚¹ï¼Œæˆ–ç›´æ¥å¯¹CSVæ–‡ä»¶è¿›è¡Œè¯„åˆ†ã€‚åœ¨éƒ¨ç½²åˆ°è¿œç¨‹æ¨¡å‹æœåŠ¡å™¨ä¹‹å‰ï¼Œæ­¤åŠŸèƒ½æ˜¯æµ‹è¯•æ¨¡å‹çš„ä¾¿æ·æ–¹å¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨CLIç•Œé¢åœ¨æœ¬åœ°éƒ¨ç½²Pythonå‡½æ•°flavoråˆ°<a href="https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#module-mlflow.pyfunc" target="_blank" rel="noopener"><code>mlflow.pyfunc</code></a>æ¨¡å—ã€‚æœ¬åœ°REST APIæœåŠ¡å™¨æ¥å—ä»¥ä¸‹æ•°æ®æ ¼å¼ä½œä¸ºè¾“å…¥ï¼š<blockquote>
<ul>
<li>JSONåºåˆ—åŒ–çš„pandas DataFramesçš„<code>split</code>æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œ ã€‚ä½¿ç”¨ è¯·æ±‚æ ‡å¤´å€¼æŒ‡å®šæ­¤æ ¼å¼ã€‚ä»MLflow 0.9.0å¼€å§‹ï¼Œå¦‚æœæ˜¯ï¼ˆå³æ²¡æœ‰æ ¼å¼è§„èŒƒï¼‰ï¼Œè¿™å°†æ˜¯é»˜è®¤æ ¼å¼ã€‚<code>data = pandas_df.to_json(orient=&#39;split&#39;)`</code>Content-Type<code>application/json; format=pandas-split</code>Content-Type<code></code>application/json`</li>
<li>JSONåºåˆ—åŒ–çš„pandas DataFramesçš„<code>records</code>æ–¹å‘ã€‚<em>æˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨æ­¤æ ¼å¼ï¼Œå› ä¸ºæ— æ³•ä¿è¯ä¿ç•™åˆ—é¡ºåºã€‚</em>ç›®å‰ï¼Œä½¿ç”¨ æˆ–çš„<code>Content-Type</code>è¯·æ±‚æ ‡å¤´å€¼ æŒ‡å®šæ­¤æ ¼å¼ã€‚ä»MLflow 0.9.0å¼€å§‹ï¼Œå°†å‚è€ƒ æ ¼å¼ã€‚ä¸ºäº†å‘å‰å…¼å®¹ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨æ ¼å¼æˆ–æŒ‡å®šå†…å®¹ç±»å‹ã€‚<code>application/json; format=pandas-records`</code>application/json<code>application/json</code>split<code>split</code>application/json; format=pandas-records`</li>
<li>CSVåºåˆ—åŒ–çš„pandas DataFramesã€‚ä¾‹å¦‚ï¼Œã€‚ä½¿ç”¨è¯·æ±‚æ ‡å¤´å€¼æŒ‡å®šæ­¤æ ¼å¼ã€‚<code>data = pandas_df.to_csv()`</code>Content-Type<code></code>text/csv`</li>
</ul>
</blockquote>
</li>
</ul>
<p>æœ‰å…³åºåˆ—åŒ–pandas DataFramesçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_json.html" target="_blank" rel="noopener">pandas.DataFrame.to_json</a>ã€‚<br><a name="ddf7d2a5"></a></p>
<h4 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤<a href="https://mlflow.org/docs/latest/models.html#commands" target="_blank" rel="noopener"></a></h4><ul>
<li><code>serve</code> å°†æ¨¡å‹éƒ¨ç½²ä¸ºæœ¬åœ°REST APIæœåŠ¡å™¨ã€‚</li>
<li><code>predict</code> ä½¿ç”¨è¯¥æ¨¡å‹ç”Ÿæˆæœ¬åœ°CSVæ–‡ä»¶çš„é¢„æµ‹ã€‚</li>
</ul>
<p>æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mlflow  pyfunc  - help </span><br><span class="line">mlflow  pyfunc  serve  - help </span><br><span class="line">mlflow  pyfunc  predict  - help</span><br></pre></td></tr></table></figure>
<p><a name="3aa45b7d"></a></p>
<h3 id="python-functionåœ¨Microsoft-Azure-MLä¸Šéƒ¨ç½²æ¨¡å‹"><a href="#python-functionåœ¨Microsoft-Azure-MLä¸Šéƒ¨ç½²æ¨¡å‹" class="headerlink" title="python_functionåœ¨Microsoft Azure MLä¸Šéƒ¨ç½²æ¨¡å‹"></a><a href="https://mlflow.org/docs/latest/models.html#id8" target="_blank" rel="noopener"><code>python_function</code>åœ¨Microsoft Azure MLä¸Šéƒ¨ç½²æ¨¡å‹</a><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-on-microsoft-azure-ml" target="_blank" rel="noopener"></a></h3><p>è¯¥<a href="https://mlflow.org/docs/latest/python_api/mlflow.azureml.html#module-mlflow.azureml" target="_blank" rel="noopener"><code>mlflow.azureml</code></a>æ¨¡å—å¯ä»¥å°†<code>python_function</code>æ¨¡å‹æ‰“åŒ…åˆ°Azure MLå®¹å™¨æ˜ åƒä¸­ã€‚è¿™äº›æ˜ åƒå¯ä»¥éƒ¨ç½²åˆ°Azure KubernetesæœåŠ¡ï¼ˆAKSï¼‰å’ŒAzureå®¹å™¨å®ä¾‹ï¼ˆACIï¼‰å¹³å°ï¼Œä»¥å®ç°å®æ—¶æœåŠ¡ã€‚ç”Ÿæˆçš„Azure ML ContainerImageåŒ…å«ä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå®ƒæ¥å—ä»¥ä¸‹æ•°æ®æ ¼å¼ä½œä¸ºè¾“å…¥ï¼š</p>
<blockquote>
<ul>
<li>JSONåºåˆ—åŒ–çš„pandas DataFramesçš„<code>split</code>æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œã€‚ä½¿ç”¨è¯·æ±‚æ ‡å¤´å€¼æŒ‡å®šæ­¤æ ¼å¼ã€‚<code>data = pandas_df.to_json(orient=&#39;split&#39;)`</code>Content-Type<code></code>application/json`</li>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.azureml.html#mlflow.azureml.build_image" target="_blank" rel="noopener"><code>build_image</code></a>å‘ç°æœ‰Azure MLå·¥ä½œåŒºæ³¨å†ŒMLflowæ¨¡å‹ï¼Œå¹¶æ„å»ºAzure MLå®¹å™¨æ˜ åƒä»¥éƒ¨ç½²åˆ°AKSå’ŒACIã€‚åœ¨<a href="https://docs.microsoft.com/en-us/python/api/overview/azure/ml/intro?view=azure-ml-py" target="_blank" rel="noopener">Azureçš„ML SDK</a>è¦æ±‚æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚<em>Azure ML SDKéœ€è¦Python 3.å®ƒä¸èƒ½ä¸æ—©æœŸç‰ˆæœ¬çš„Pythonä¸€èµ·å®‰è£…ã€‚</em></li>
</ul>
</blockquote>
<p><a name="b88cb25c"></a></p>
<h4 id="ä½¿ç”¨Python-APIçš„ç¤ºä¾‹å·¥ä½œæµç¨‹"><a href="#ä½¿ç”¨Python-APIçš„ç¤ºä¾‹å·¥ä½œæµç¨‹" class="headerlink" title="ä½¿ç”¨Python APIçš„ç¤ºä¾‹å·¥ä½œæµç¨‹"></a>ä½¿ç”¨Python APIçš„ç¤ºä¾‹å·¥ä½œæµç¨‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mlflow.azureml</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> azureml.core <span class="keyword">import</span> Workspace</span><br><span class="line"><span class="keyword">from</span> azureml.core.webservice <span class="keyword">import</span> AciWebservice, Webservice</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create or load an existing Azure ML workspace. You can also load an existing workspace using</span></span><br><span class="line"><span class="comment"># Workspace.get(name="&lt;workspace_name&gt;")</span></span><br><span class="line">workspace_name = <span class="string">"&lt;Name of your Azure ML workspace&gt;"</span></span><br><span class="line">subscription_id = <span class="string">"&lt;Your Azure subscription ID&gt;"</span></span><br><span class="line">resource_group = <span class="string">"&lt;Name of the Azure resource group in which to create Azure ML resources&gt;"</span></span><br><span class="line">location = <span class="string">"&lt;Name of the Azure location (region) in which to create Azure ML resources&gt;"</span></span><br><span class="line">azure_workspace = Workspace.create(name=workspace_name,</span><br><span class="line">                                   subscription_id=subscription_id,</span><br><span class="line">                                   resource_group=resource_group,</span><br><span class="line">                                   location=location,</span><br><span class="line">                                   create_resource_group=<span class="literal">True</span>,</span><br><span class="line">                                   exist_okay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build an Azure ML container image for deployment</span></span><br><span class="line">azure_image, azure_model = mlflow.azureml.build_image(model_path=<span class="string">"&lt;path-to-model&gt;"</span>,</span><br><span class="line">                                                      workspace=azure_workspace,</span><br><span class="line">                                                      description=<span class="string">"Wine regression model 1"</span>,</span><br><span class="line">                                                      synchronous=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># If your image build failed, you can access build logs at the following URI:</span></span><br><span class="line">print(<span class="string">"Access the following URI for build logs: &#123;&#125;"</span>.format(azure_image.image_build_log_uri))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deploy the container image to ACI</span></span><br><span class="line">webservice_deployment_config = AciWebservice.deploy_configuration()</span><br><span class="line">webservice = Webservice.deploy_from_image(</span><br><span class="line">                    image=azure_image, workspace=azure_workspace, name=<span class="string">"&lt;deployment-name&gt;"</span>)</span><br><span class="line">webservice.wait_for_deployment()</span><br><span class="line"></span><br><span class="line"><span class="comment"># After the image deployment completes, requests can be posted via HTTP to the new ACI</span></span><br><span class="line"><span class="comment"># webservice's scoring URI. The following example posts a sample input from the wine dataset</span></span><br><span class="line"><span class="comment"># used in the MLflow ElasticNet example:</span></span><br><span class="line"><span class="comment"># https://github.com/mlflow/mlflow/tree/master/examples/sklearn_elasticnet_wine</span></span><br><span class="line">print(<span class="string">"Scoring URI is: %s"</span>, webservice.scoring_uri)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># `sample_input` is a JSON-serialized pandas DataFrame with the `split` orientation</span></span><br><span class="line">sample_input = &#123;</span><br><span class="line">    <span class="string">"columns"</span>: [</span><br><span class="line">        <span class="string">"alcohol"</span>,</span><br><span class="line">        <span class="string">"chlorides"</span>,</span><br><span class="line">        <span class="string">"citric acid"</span>,</span><br><span class="line">        <span class="string">"density"</span>,</span><br><span class="line">        <span class="string">"fixed acidity"</span>,</span><br><span class="line">        <span class="string">"free sulfur dioxide"</span>,</span><br><span class="line">        <span class="string">"pH"</span>,</span><br><span class="line">        <span class="string">"residual sugar"</span>,</span><br><span class="line">        <span class="string">"sulphates"</span>,</span><br><span class="line">        <span class="string">"total sulfur dioxide"</span>,</span><br><span class="line">        <span class="string">"volatile acidity"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"data"</span>: [</span><br><span class="line">        [<span class="number">8.8</span>, <span class="number">0.045</span>, <span class="number">0.36</span>, <span class="number">1.001</span>, <span class="number">7</span>, <span class="number">45</span>, <span class="number">3</span>, <span class="number">20.7</span>, <span class="number">0.45</span>, <span class="number">170</span>, <span class="number">0.27</span>]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(</span><br><span class="line">              url=webservice.scoring_uri, data=json.dumps(sample_input),</span><br><span class="line">              headers=&#123;<span class="string">"Content-type"</span>: <span class="string">"application/json"</span>&#125;)</span><br><span class="line">response_json = json.loads(response.text)</span><br><span class="line">print(response_json)</span><br></pre></td></tr></table></figure>
<p><a name="35118db0"></a></p>
<h4 id="Example-workflow-using-the-MLflow-CLI"><a href="#Example-workflow-using-the-MLflow-CLI" class="headerlink" title="Example workflow using the MLflow CLI"></a>Example workflow using the MLflow CLI</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mlflow azureml build-image -w &lt;workspace-name&gt; -m &lt;model-path&gt; -d <span class="string">"Wine regression model 1"</span></span><br><span class="line"></span><br><span class="line">az ml service create aci -n &lt;deployment-name&gt; --image-id &lt;image-name&gt;:&lt;image-version&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># After the image deployment completes, requests can be posted via HTTP to the new ACI</span></span><br><span class="line"><span class="comment"># webservice's scoring URI. The following example posts a sample input from the wine dataset</span></span><br><span class="line"><span class="comment"># used in the MLflow ElasticNet example:</span></span><br><span class="line"><span class="comment"># https://github.com/mlflow/mlflow/tree/master/examples/sklearn_elasticnet_wine</span></span><br><span class="line"></span><br><span class="line">scoring_uri=$(az ml service show --name &lt;deployment-name&gt; -v | jq -r <span class="string">".scoringUri"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># `sample_input` is a JSON-serialized pandas DataFrame with the `split` orientation</span></span><br><span class="line">sample_input=<span class="string">'</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "columns": [</span></span><br><span class="line"><span class="string">        "alcohol",</span></span><br><span class="line"><span class="string">        "chlorides",</span></span><br><span class="line"><span class="string">        "citric acid",</span></span><br><span class="line"><span class="string">        "density",</span></span><br><span class="line"><span class="string">        "fixed acidity",</span></span><br><span class="line"><span class="string">        "free sulfur dioxide",</span></span><br><span class="line"><span class="string">        "pH",</span></span><br><span class="line"><span class="string">        "residual sugar",</span></span><br><span class="line"><span class="string">        "sulphates",</span></span><br><span class="line"><span class="string">        "total sulfur dioxide",</span></span><br><span class="line"><span class="string">        "volatile acidity"</span></span><br><span class="line"><span class="string">    ],</span></span><br><span class="line"><span class="string">    "data": [</span></span><br><span class="line"><span class="string">        [8.8, 0.045, 0.36, 1.001, 7, 45, 3, 20.7, 0.45, 170, 0.27]</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line"></span><br><span class="line">echo $sample_input | curl -s -X POST $scoring_uri\</span><br><span class="line">-H <span class="string">'Cache-Control: no-cache'</span>\</span><br><span class="line">-H <span class="string">'Content-Type: application/json'</span>\</span><br><span class="line">-d @-</span><br></pre></td></tr></table></figure>
<p>For more info, see:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mlflow azureml --<span class="built_in">help</span></span><br><span class="line">mlflow azureml build-image --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p><a name="753d81d7"></a></p>
<h3 id="python-functionåœ¨Amazon-SageMakerä¸Šéƒ¨ç½²æ¨¡å‹"><a href="#python-functionåœ¨Amazon-SageMakerä¸Šéƒ¨ç½²æ¨¡å‹" class="headerlink" title="python_functionåœ¨Amazon SageMakerä¸Šéƒ¨ç½²æ¨¡å‹"></a><a href="https://mlflow.org/docs/latest/models.html#id9" target="_blank" rel="noopener"><code>python_function</code>åœ¨Amazon SageMakerä¸Šéƒ¨ç½²æ¨¡å‹</a><a href="https://mlflow.org/docs/latest/models.html#deploy-a-python-function-model-on-amazon-sagemaker" target="_blank" rel="noopener"></a></h3><p>è¯¥<a href="https://mlflow.org/docs/latest/python_api/mlflow.sagemaker.html#module-mlflow.sagemaker" target="_blank" rel="noopener"><code>mlflow.sagemaker</code></a>æ¨¡å—å¯ä»¥<code>python_function</code>åœ¨å…·æœ‰SageMakerå…¼å®¹ç¯å¢ƒçš„Dockerå®¹å™¨ä¸­æœ¬åœ°éƒ¨ç½²æ¨¡å‹ï¼Œå¹¶åœ¨SageMakerä¸Šè¿œç¨‹éƒ¨ç½²æ¨¡å‹ã€‚è¦è¿œç¨‹éƒ¨ç½²åˆ°SageMakerï¼Œæ‚¨éœ€è¦è®¾ç½®ç¯å¢ƒå’Œç”¨æˆ·å¸æˆ·ã€‚è¦å°†è‡ªå®šä¹‰æ¨¡å‹å¯¼å‡ºåˆ°SageMakerï¼Œæ‚¨éœ€è¦åœ¨Amazon ECRä¸Šæä¾›ä¸MLflowå…¼å®¹çš„Dockeré•œåƒã€‚MLflowæä¾›é»˜è®¤çš„Dockeré•œåƒå®šä¹‰; ä½†æ˜¯ï¼Œç”±æ‚¨æ¥æ„å»ºæ˜ åƒå¹¶å°†å…¶ä¸Šè½½åˆ°ECRã€‚MLflowåŒ…æ‹¬<code>build_and_push_container</code>æ‰§è¡Œæ­¤æ­¥éª¤çš„æ•ˆç”¨å‡½æ•°ã€‚æ„å»ºå’Œä¸Šä¼ åï¼Œæ‚¨å¯ä»¥å°†MLflowå®¹å™¨ç”¨äºæ‰€æœ‰MLflowæ¨¡å‹ã€‚ä½¿ç”¨è¯¥<a href="https://mlflow.org/docs/latest/python_api/mlflow.sagemaker.html#module-mlflow.sagemaker" target="_blank" rel="noopener"><code>mlflow.sagemaker</code></a> æ¨¡å—éƒ¨ç½²çš„æ¨¡å‹WebæœåŠ¡å™¨æ¥å—ä»¥ä¸‹æ•°æ®æ ¼å¼ä½œä¸ºè¾“å…¥ï¼Œå…·ä½“å–å†³äºéƒ¨ç½²é£æ ¼ï¼š</p>
<blockquote>
<ul>
<li><code>python_function</code>ï¼šå¯¹äºæ­¤éƒ¨ç½²é£æ ¼ï¼Œç«¯ç‚¹æ¥å—ä¸pyfuncæœåŠ¡å™¨ç›¸åŒçš„æ ¼å¼ã€‚<a href="https://mlflow.org/docs/latest/models.html#pyfunc-deployment" target="_blank" rel="noopener">pyfuncéƒ¨ç½²æ–‡æ¡£</a>ä¸­æè¿°äº†è¿™äº›æ ¼å¼ ã€‚</li>
<li><code>mleap</code>ï¼šå¯¹äºæ­¤éƒ¨ç½²é£æ ¼ï¼Œç«¯ç‚¹ä»…æ¥å—<code>split</code>æ–¹å‘ä¸Šçš„ JSONåºåˆ—åŒ–pandas DataFrame ã€‚ä¾‹å¦‚ï¼Œ ã€‚ä½¿ç”¨ è¯·æ±‚æ ‡å¤´å€¼æŒ‡å®šæ­¤æ ¼å¼ã€‚<code>data = pandas_df.to_json(orient=&#39;split&#39;)`</code>Content-Type<code></code>application/json`</li>
</ul>
</blockquote>
<p><a name="ddf7d2a5-1"></a></p>
<h4 id="å‘½ä»¤-1"><a href="#å‘½ä»¤-1" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h4><ul>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.sagemaker.html#mlflow.sagemaker.run_local" target="_blank" rel="noopener"><code>run-local</code></a>åœ¨Dockerå®¹å™¨ä¸­æœ¬åœ°éƒ¨ç½²æ¨¡å‹ã€‚å›¾åƒå’Œç¯å¢ƒåº”ä¸æ¨¡å‹è¿œç¨‹è¿è¡Œçš„æ–¹å¼ç›¸åŒï¼Œå› æ­¤åœ¨éƒ¨ç½²ä¹‹å‰æµ‹è¯•æ¨¡å‹éå¸¸æœ‰ç”¨ã€‚</li>
<li>è¯¥<code>build-and-push-container</code>CLIå‘½ä»¤æ„å»ºä¸€ä¸ªMLfLowå¤šå…‹å°”å›¾åƒå¹¶ä¸Šä¼ åˆ°ECRã€‚è°ƒç”¨è€…å¿…é¡»è®¾ç½®æ­£ç¡®çš„æƒé™ã€‚å›¾åƒæ˜¯æœ¬åœ°æ„å»ºçš„ï¼Œå¹¶ä¸”éœ€è¦Dockerå­˜åœ¨äºæ‰§è¡Œæ­¤æ­¥éª¤çš„è®¡ç®—æœºä¸Šã€‚</li>
<li><a href="https://mlflow.org/docs/latest/python_api/mlflow.sagemaker.html#mlflow.sagemaker.deploy" target="_blank" rel="noopener"><code>deploy</code></a>åœ¨Amazon SageMakerä¸Šéƒ¨ç½²æ¨¡å‹ã€‚MLflowå°†Python Functionæ¨¡å‹ä¸Šä¼ åˆ°S3å¹¶å¯åŠ¨ä¸ºè¯¥æ¨¡å‹æä¾›æœåŠ¡çš„Amazon SageMakerç«¯ç‚¹ã€‚</li>
</ul>
<p>ä½¿ç”¨MLflow CLIçš„ç¤ºä¾‹å·¥ä½œæµç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mlflow sagemaker build-and-push-container  - build the container (only needs to be called once)</span><br><span class="line">mlflow sagemaker run-local -m &lt;path-to-model&gt;  -    </span><br><span class="line">        remotely</span><br></pre></td></tr></table></figure>
<p>For more info, see:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mlflow sagemaker --help</span><br><span class="line">mlflow sagemaker build-and-push-container --help</span><br><span class="line">mlflow sagemaker run-local --help</span><br><span class="line">mlflow sagemaker deploy --help</span><br></pre></td></tr></table></figure>
<p><a name="f943a389"></a></p>
<h3 id="å°†python-functionæ¨¡å‹å¯¼å‡ºä¸ºApache-Spark-UDF"><a href="#å°†python-functionæ¨¡å‹å¯¼å‡ºä¸ºApache-Spark-UDF" class="headerlink" title="å°†python_functionæ¨¡å‹å¯¼å‡ºä¸ºApache Spark UDF"></a><a href="https://mlflow.org/docs/latest/models.html#id10" target="_blank" rel="noopener">å°†<code>python_function</code>æ¨¡å‹å¯¼å‡ºä¸ºApache Spark UDF</a><a href="https://mlflow.org/docs/latest/models.html#export-a-python-function-model-as-an-apache-spark-udf" target="_blank" rel="noopener"></a></h3><p>æ‚¨å¯ä»¥å°†<code>python_function</code>æ¨¡å‹è¾“å‡ºä¸ºApache Spark UDFï¼Œå¯ä»¥å°†å…¶ä¸Šè½½åˆ°Sparkç¾¤é›†å¹¶ç”¨äºå¯¹æ¨¡å‹è¿›è¡Œè¯„åˆ†ã€‚<br>ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pyfunc_udf = mlflow.pyfunc.spark_udf(&lt;path-to-model&gt;)</span><br><span class="line">df = spark_df.withColumn(&quot;prediction&quot;, pyfunc_udf(&lt;features&gt;))</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆçš„UDFåŸºäºSparkçš„Pandas UDFï¼Œç›®å‰ä»…é™äºä¸ºæ¯ä¸ªè§‚å¯Ÿç”Ÿæˆå•ä¸ªå€¼æˆ–ç›¸åŒç±»å‹çš„å€¼æ•°ç»„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªæ•°å­—åˆ—ä½œä¸ºdoubleè¿”å›ã€‚æ‚¨å¯ä»¥é€šè¿‡æä¾›<code>result_type</code> å‚æ•°æ¥æ§åˆ¶è¿”å›çš„ç»“æœã€‚æ”¯æŒä»¥ä¸‹å€¼ï¼š</p>
<blockquote>
<ul>
<li><code>&#39;int&#39;</code>æˆ–<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.IntegerType" target="_blank" rel="noopener">IntegerType</a>ï¼š<code>int32</code>è¿”å›å¯ä»¥é€‚åˆç»“æœçš„æœ€å·¦è¾¹çš„æ•´æ•°ï¼Œ å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¼•å‘å¼‚å¸¸ã€‚</li>
<li><code>&#39;long&#39;</code>æˆ–<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.LongType" target="_blank" rel="noopener">LongType</a>ï¼š<code>int64</code> è¿”å›å¯ä»¥é€‚åˆç»“æœçš„æœ€å·¦è¾¹çš„é•¿æ•´æ•°ï¼Œå¦‚æœæ²¡æœ‰åˆ™å¼•å‘å¼‚å¸¸ã€‚</li>
<li><a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.ArrayType" target="_blank" rel="noopener">æ•°ç»„ç±»å‹</a>ï¼ˆ<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.IntegerType" target="_blank" rel="noopener">IntegerType</a> | <a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.LongType" target="_blank" rel="noopener">LongType</a>ï¼‰ï¼šè¿”å›ä¸€ä¸ªå¯ä»¥æ”¾å…¥æ‰€éœ€å°ºå¯¸çš„æ‰€æœ‰æ•´æ•°åˆ—ã€‚</li>
<li><code>&#39;float&#39;</code>æˆ–<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.FloatType" target="_blank" rel="noopener">FloatType</a>ï¼š<code>float32</code>å¦‚æœæ²¡æœ‰æ•°å­—åˆ—ï¼Œåˆ™è¿”å›æœ€å·¦è¾¹çš„æ•°å­—ç»“æœè½¬æ¢ ä¸ºæˆ–å¼•å‘å¼‚å¸¸ã€‚</li>
<li><code>&#39;double&#39;</code>æˆ–<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.DoubleType" target="_blank" rel="noopener">DoubleType</a>ï¼š<code>double</code>å¦‚æœæ²¡æœ‰æ•°å­—åˆ—ï¼Œåˆ™è¿”å›æœ€å·¦è¾¹çš„æ•°å­—ç»“æœè½¬æ¢ ä¸ºæˆ–å¼•å‘å¼‚å¸¸ã€‚</li>
<li><a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.ArrayType" target="_blank" rel="noopener">ArrayType</a>ï¼ˆ<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.FloatType" target="_blank" rel="noopener">FloatType</a> | <a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.DoubleType" target="_blank" rel="noopener">DoubleType</a>ï¼‰ï¼šè¿”å›<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.DoubleType" target="_blank" rel="noopener">å¼ºåˆ¶</a>è½¬æ¢ä¸ºè¯·æ±‚çš„æ‰€æœ‰æ•°å­—åˆ—ã€‚ç±»å‹ã€‚å¦‚æœå­˜åœ¨æ•°å­—åˆ—ï¼Œåˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚</li>
<li><code>&#39;string&#39;</code>æˆ–<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.StringType" target="_blank" rel="noopener">StringType</a>ï¼šResultæ˜¯æœ€å·¦è¾¹çš„åˆ—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li><a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.ArrayType" target="_blank" rel="noopener">ArrayType</a>ï¼ˆ<a href="https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.types.StringType" target="_blank" rel="noopener">StringType</a>ï¼‰ï¼šè¿”å›è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„æ‰€æœ‰åˆ—ã€‚</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from pyspark.sql.types import ArrayType, FloatType</span><br><span class="line">pyfunc_udf = mlflow.pyfunc.spark_udf(&lt;path-to-model&gt;, result_type=ArrayType(FloatType()))</span><br><span class="line"># The prediction column will contain all the numeric columns returned by the model as floats</span><br><span class="line">df = spark_df.withColumn(&quot;prediction&quot;, pyfunc_udf(&lt;features&gt;))</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/03/15/yuque/MLflowæ¨¡å‹/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/MLflowé¡¹ç›®" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/yuque/MLflowé¡¹ç›®/">MLflowé¡¹ç›®</a>
    </h1>
  

        
        <a href="/2019/03/15/yuque/MLflowé¡¹ç›®/" class="archive-article-date">
  	<time datetime="2019-03-15T06:49:30.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-03-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a name="5455d259"></a></p>
<h1 id="MLflowé¡¹ç›®"><a href="#MLflowé¡¹ç›®" class="headerlink" title="MLflowé¡¹ç›®"></a>MLflowé¡¹ç›®<a href="https://mlflow.org/docs/latest/projects.html#mlflow-projects" target="_blank" rel="noopener"></a></h1><p>MLflowé¡¹ç›®æ˜¯ä¸€ç§ä»¥å¯é‡ç”¨å’Œå¯é‡å¤çš„æ–¹å¼æ‰“åŒ…æ•°æ®ç§‘å­¦ä»£ç çš„æ ¼å¼ï¼Œä¸»è¦åŸºäºçº¦å®šã€‚æ­¤å¤–ï¼ŒProjectsç»„ä»¶åŒ…æ‹¬ç”¨äºè¿è¡Œé¡¹ç›®çš„APIå’Œå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å°†é¡¹ç›®é“¾æ¥åˆ°å·¥ä½œæµä¸­ã€‚<br>ç›®å½•</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/projects.html#overview" target="_blank" rel="noopener">æ¦‚è§‚</a></li>
<li><a href="https://mlflow.org/docs/latest/projects.html#specifying-projects" target="_blank" rel="noopener">æŒ‡å®šé¡¹ç›®</a></li>
<li><a href="https://mlflow.org/docs/latest/projects.html#running-projects" target="_blank" rel="noopener">è¿è¡Œé¡¹ç›®</a></li>
<li><a href="https://mlflow.org/docs/latest/projects.html#iterating-quickly" target="_blank" rel="noopener">å¿«é€Ÿè¿­ä»£</a></li>
<li><a href="https://mlflow.org/docs/latest/projects.html#building-multistep-workflows" target="_blank" rel="noopener">æ„å»ºå¤šæ­¥éª¤å·¥ä½œæµç¨‹</a><br><a name="a7dc4168"></a><h2 id="æ¦‚è§‚"><a href="#æ¦‚è§‚" class="headerlink" title="æ¦‚è§‚"></a><a href="https://mlflow.org/docs/latest/projects.html#id3" target="_blank" rel="noopener">æ¦‚è§‚</a><a href="https://mlflow.org/docs/latest/projects.html#overview" target="_blank" rel="noopener"></a></h2>MLflow Projectsçš„æ ¸å¿ƒåªæ˜¯ç»„ç»‡å’Œæè¿°ä»£ç çš„æƒ¯ä¾‹ï¼Œè®©å…¶ä»–æ•°æ®ç§‘å­¦å®¶ï¼ˆæˆ–è‡ªåŠ¨åŒ–å·¥å…·ï¼‰è¿è¡Œå®ƒã€‚æ¯ä¸ªé¡¹ç›®éƒ½åªæ˜¯ä¸€ä¸ªåŒ…å«ä»£ç çš„æ–‡ä»¶ç›®å½•æˆ–Gitå­˜å‚¨åº“ã€‚MLflowå¯ä»¥æ ¹æ®å°†æ–‡ä»¶æ”¾åœ¨æ­¤ç›®å½•ä¸­çš„çº¦å®šæ¥è¿è¡ŒæŸäº›é¡¹ç›®ï¼ˆä¾‹å¦‚ï¼Œ<code>conda.yaml</code>æ–‡ä»¶å°†è¢«è§†ä¸º <a href="https://conda.io/docs" target="_blank" rel="noopener">Conda</a>ç¯å¢ƒï¼‰ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ <code>MLproject</code>æ–‡ä»¶æ¥æ›´è¯¦ç»†åœ°æè¿°æ‚¨çš„é¡¹ç›®ï¼Œè¯¥æ–‡ä»¶æ˜¯<a href="https://learnxinyminutes.com/docs/yaml/" target="_blank" rel="noopener">YAML</a>æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ã€‚æ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥æŒ‡å®šå‡ ä¸ªå±æ€§ï¼š</li>
</ul>
<p><a name="d7ec2d3f"></a></p>
<h4 id="åç§°"><a href="#åç§°" class="headerlink" title="åç§°"></a>åç§°</h4><p>é¡¹ç›®çš„å¯è¯»åç§°ã€‚<br><a name="6860b943"></a></p>
<h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><p>è¿è¡Œé¡¹ç›®æ‰€éœ€çš„åº“ã€‚MLflowç›®å‰ä½¿ç”¨ <a href="https://conda.io/docs" target="_blank" rel="noopener">Conda</a>åŒ…ç®¡ç†å™¨ï¼Œå®ƒæ”¯æŒPythonåŒ…å’Œæœ¬æœºåº“ï¼ˆä¾‹å¦‚ï¼ŒCuDNNæˆ–Intel MKLï¼‰ï¼Œä»¥æŒ‡å®šä¾èµ–å…³ç³»ã€‚<code>MLFLOW_CONDA_HOME</code>å¦‚æœæŒ‡å®šï¼ŒMLflowå°†ä½¿ç”¨ç¯å¢ƒå˜é‡ç»™å‡ºçš„Condaå®‰è£…ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡è°ƒç”¨è¿è¡ŒCondaå‘½ä»¤<code>$MLFLOW_CONDA_HOME/bin/conda</code>ï¼‰ï¼Œ<code>conda</code>å¦åˆ™é»˜è®¤è¿è¡Œã€‚<br><a name="c0cec124"></a></p>
<h4 id="å…¥å£ç‚¹"><a href="#å…¥å£ç‚¹" class="headerlink" title="å…¥å£ç‚¹"></a>å…¥å£ç‚¹</h4><p>å¯ä»¥åœ¨é¡¹ç›®ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼Œä»¥åŠæœ‰å…³å…¶å‚æ•°çš„ä¿¡æ¯ã€‚å¤§å¤šæ•°é¡¹ç›®è‡³å°‘åŒ…å«ä¸€ä¸ªæ‚¨å¸Œæœ›å…¶ä»–ç”¨æˆ·è°ƒç”¨çš„å…¥å£ç‚¹ã€‚æŸäº›é¡¹ç›®è¿˜å¯ä»¥åŒ…å«å¤šä¸ªå…¥å£ç‚¹ï¼šä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æ‹¥æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªç‰¹å¾åŒ–ç®—æ³•çš„Gitå­˜å‚¨åº“ã€‚æ‚¨è¿˜å¯ä»¥å°†é¡¹ç›®ä¸­çš„ä»»ä½•æ–‡ä»¶<code>.py</code>æˆ–<code>.sh</code>æ–‡ä»¶ä½œä¸ºå…¥å£ç‚¹è°ƒç”¨ã€‚<code>MLproject</code>ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ–‡ä»¶ä¸­åˆ—å‡ºå…¥å£ç‚¹ï¼Œåˆ™è¿˜å¯ä»¥ä¸ºå®ƒä»¬æŒ‡å®š_å‚æ•°_ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹å’Œé»˜è®¤å€¼ã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨ å‘½ä»¤è¡Œå·¥å…·æˆ–Python API ä»Git URIæˆ–æœ¬åœ°ç›®å½•è¿è¡Œä»»ä½•é¡¹ç›®ã€‚è¿™äº›APIè¿˜å…è®¸åœ¨<a href="https://databricks.com/" target="_blank" rel="noopener">Databricks</a>ä¸Šæäº¤é¡¹ç›®ä»¥è¿›è¡Œè¿œç¨‹æ‰§è¡Œã€‚<code>mlflow run</code><a href="https://mlflow.org/docs/latest/python_api/mlflow.projects.html#mlflow.projects.run" target="_blank" rel="noopener"><code>mlflow.projects.run()</code></a></p>
<blockquote>
<p>è­¦å‘Š<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMLflowå°†ä¸ºGité¡¹ç›®ä½¿ç”¨ä¸€ä¸ªæ–°çš„ä¸´æ—¶å·¥ä½œç›®å½•ã€‚è¿™æ„å‘³ç€æ‚¨é€šå¸¸åº”è¯¥ä½¿ç”¨ç»å¯¹è·¯å¾„è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„å°†ä»»ä½•æ–‡ä»¶å‚æ•°ä¼ é€’ç»™MLflowé¡¹ç›®ã€‚å¦‚æœæ‚¨çš„é¡¹ç›®å£°æ˜äº†å…¶å‚æ•°ï¼ŒMLflowå°†è‡ªåŠ¨ä¸ºç±»å‹å‚æ•°åˆ›å»ºç»å¯¹è·¯å¾„<code>path</code>ã€‚</p>
</blockquote>
<p><a name="c7dfa7ad"></a></p>
<h2 id="æŒ‡å®šé¡¹ç›®"><a href="#æŒ‡å®šé¡¹ç›®" class="headerlink" title="æŒ‡å®šé¡¹ç›®"></a><a href="https://mlflow.org/docs/latest/projects.html#id4" target="_blank" rel="noopener">æŒ‡å®šé¡¹ç›®</a><a href="https://mlflow.org/docs/latest/projects.html#specifying-projects" target="_blank" rel="noopener"></a></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•Gitå­˜å‚¨åº“æˆ–æœ¬åœ°ç›®å½•éƒ½è¢«è§†ä¸ºé¡¹ç›®ï¼ŒMLflowä½¿ç”¨ä»¥ä¸‹çº¦å®šæ¥ç¡®å®šå…¶å‚æ•°ï¼š</p>
<ul>
<li>é¡¹ç›®çš„åç§°æ˜¯ç›®å½•çš„åç§°ã€‚</li>
<li>è¯¥condaä¸­æŒ‡å®šçš„<code>conda.yaml</code>ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚å¦‚æœæ²¡æœ‰<code>conda.yaml</code>æ–‡ä»¶ï¼ŒMLflowå°†åœ¨è¿è¡Œé¡¹ç›®æ—¶ä½¿ç”¨ä»…åŒ…å«Pythonçš„Condaç¯å¢ƒï¼ˆç‰¹åˆ«æ˜¯Condaå¯ç”¨çš„æœ€æ–°Pythonï¼‰ã€‚</li>
<li>é¡¹ç›®ä¸­çš„ä»»ä½•<code>.py</code>å’Œ<code>.sh</code>æ–‡ä»¶éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªå…¥å£ç‚¹ï¼Œæ²¡æœ‰æ˜¾å¼å£°æ˜å‚æ•°ã€‚å½“æ‚¨ä½¿ç”¨ä¸€ç»„å‚æ•°æ‰§è¡Œæ­¤ç±»å‘½ä»¤æ—¶ï¼ŒMLflowå°†ä½¿ç”¨è¯­æ³•ä¼ é€’å‘½ä»¤è¡Œä¸Šçš„æ¯ä¸ªå‚æ•°ã€‚<code>--key value</code></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">My</span> <span class="string">Project</span></span><br><span class="line"></span><br><span class="line"><span class="attr">conda_env:</span> <span class="string">my_env.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">entry_points:</span></span><br><span class="line"><span class="attr">  main:</span></span><br><span class="line"><span class="attr">    parameters:</span></span><br><span class="line"><span class="attr">      data_file:</span> <span class="string">path</span></span><br><span class="line"><span class="attr">      regularization:</span> <span class="string">&#123;type:</span> <span class="string">float,</span> <span class="attr">default:</span> <span class="number">0.1</span><span class="string">&#125;</span></span><br><span class="line"><span class="attr">    command:</span> <span class="string">"python train.py -r &#123;regularization&#125; &#123;data_file&#125;"</span></span><br><span class="line"><span class="attr">  validate:</span></span><br><span class="line"><span class="attr">    parameters:</span></span><br><span class="line"><span class="attr">      data_file:</span> <span class="string">path</span></span><br><span class="line"><span class="attr">    command:</span> <span class="string">"python validate.py &#123;data_file&#125;"</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æ‚¨æ‰€è§ï¼Œè¯¥æ–‡ä»¶å¯ä»¥æŒ‡å®šåç§°å’Œä¸åŒçš„ç¯å¢ƒæ–‡ä»¶ï¼Œä»¥åŠæœ‰å…³æ¯ä¸ªå…¥å£ç‚¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªå…¥å£ç‚¹éƒ½æœ‰ä¸€ä¸ªè¿è¡Œ_å‘½ä»¤_å’Œ_å‚æ•°_ï¼ˆåŒ…æ‹¬æ•°æ®ç±»å‹ï¼‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†æè¿°è¿™ä¸¤ä¸ªéƒ¨åˆ†ã€‚<br><a name="47d85f76"></a></p>
<h3 id="å‘½ä»¤è¯­æ³•"><a href="#å‘½ä»¤è¯­æ³•" class="headerlink" title="å‘½ä»¤è¯­æ³•"></a>å‘½ä»¤è¯­æ³•<a href="https://mlflow.org/docs/latest/projects.html#command-syntax" target="_blank" rel="noopener"></a></h3><p>åœ¨æ–‡ä»¶ä¸­æŒ‡å®šå…¥å£ç‚¹æ—¶<code>MLproject</code>ï¼Œè¯¥å‘½ä»¤å¯ä»¥æ˜¯Python <a href="https://docs.python.org/2/library/string.html#formatstrings" target="_blank" rel="noopener">æ ¼å¼å­—ç¬¦ä¸²è¯­æ³•ä¸­çš„</a>ä»»ä½•å­—ç¬¦ä¸² ã€‚åœ¨å…¥å£ç‚¹çš„<code>parameters</code>å­—æ®µä¸­å£°æ˜çš„æ‰€æœ‰å‚æ•°éƒ½å°†ä¼ é€’åˆ°æ­¤å­—ç¬¦ä¸²ä¸­ä»¥è¿›è¡Œæ›¿æ¢ã€‚å¦‚æœä½¿ç”¨å­—æ®µä¸­_æœª_åˆ—å‡ºçš„ å…¶ä»–å‚æ•°è°ƒç”¨é¡¹ç›®<code>parameters</code>ï¼ŒMLflowå°†ä½¿ç”¨è¯­æ³•ä¼ é€’å®ƒä»¬ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ–‡ä»¶ä»…ä¸ºå‚æ•°çš„å­é›†å£°æ˜ç±»å‹å’Œé»˜è®¤å€¼ã€‚<code>--key value`</code>MLproject`<br>åœ¨æ›¿æ¢å‘½ä»¤ä¸­çš„å‚æ•°ä¹‹å‰ï¼ŒMLflowä½¿ç”¨Pythonçš„<a href="https://docs.python.org/3/library/shlex.html#shlex.quote" target="_blank" rel="noopener">shlex.quote</a>å‡½æ•°è½¬ä¹‰å®ƒä»¬ ï¼Œå› æ­¤æ‚¨æ— éœ€æ‹…å¿ƒåœ¨å‘½ä»¤å­—æ®µä¸­æ·»åŠ å¼•å·ã€‚<br><a name="9459a637"></a></p>
<h3 id="æŒ‡å®šå‚æ•°"><a href="#æŒ‡å®šå‚æ•°" class="headerlink" title="æŒ‡å®šå‚æ•°"></a>æŒ‡å®šå‚æ•°<a href="https://mlflow.org/docs/latest/projects.html#specifying-parameters" target="_blank" rel="noopener"></a></h3><p>MLflowå…è®¸ä¸ºæ¯ä¸ªå‚æ•°æŒ‡å®šæ•°æ®ç±»å‹å’Œé»˜è®¤å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–å†™ä»¥ä¸‹å†…å®¹æ¥æŒ‡å®šæ•°æ®ç±»å‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">parameter_name:</span> <span class="string">data_type</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æ‚¨çš„YAMLæ–‡ä»¶ä¸­ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ä¹‹ä¸€ï¼ˆåœ¨YAMLä¸­ç­‰æ•ˆï¼‰æ·»åŠ é»˜è®¤å€¼ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">parameter_name:</span> <span class="string">&#123;type:</span> <span class="string">data_type,</span> <span class="attr">default:</span> <span class="string">value&#125;</span>  <span class="comment"># Short syntax</span></span><br><span class="line"></span><br><span class="line"><span class="attr">parameter_name:</span>     <span class="comment"># Long syntax</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">data_type</span></span><br><span class="line"><span class="attr">  default:</span> <span class="string">value</span></span><br></pre></td></tr></table></figure>
<p>MLflowæ”¯æŒå››ç§å‚æ•°ç±»å‹ï¼Œå…¶ä¸­ä¸€äº›ç‰¹æ®Šå¤„ç†ï¼ˆä¾‹å¦‚ï¼Œå°†æ•°æ®ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶ï¼‰ã€‚ä»»ä½•æœªå£°æ˜çš„å‚æ•°éƒ½è¢«è§†ä¸º<code>string</code>ã€‚å‚æ•°ç±»å‹æ˜¯ï¼š<br><a name="string"></a></p>
<h4 id="string"><a href="#string" class="headerlink" title="string"></a>string</h4><p>ä»»ä½•æ–‡å­—å­—ç¬¦ä¸²ã€‚<br><a name="float"></a></p>
<h4 id="float"><a href="#float" class="headerlink" title="float"></a>float</h4><p>ä¸€ä¸ªçœŸå®çš„æ•°å­—ã€‚MLflowéªŒè¯å‚æ•°æ˜¯å¦ä¸ºæ•°å­—ã€‚<br><a name="path"></a></p>
<h4 id="path"><a href="#path" class="headerlink" title="path"></a>path</h4><p>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„è·¯å¾„ã€‚MLflowä¼šå°†ä¸ºæ­¤ç±»å‚æ•°ä¼ é€’çš„ä»»ä½•ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ï¼Œå¹¶ä¸”è¿˜ä¼šå°†ä½œä¸ºåˆ†å¸ƒå¼å­˜å‚¨URIï¼ˆ<code>s3://</code>å’Œ<code>dbfs://</code>ï¼‰ä¼ é€’çš„ä»»ä½•è·¯å¾„ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶ã€‚å°†æ­¤ç±»å‹ç”¨äºåªèƒ½è¯»å–æœ¬åœ°æ–‡ä»¶çš„ç¨‹åºã€‚<br><a name="URI"></a></p>
<h4 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h4><p>æœ¬åœ°æˆ–åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­çš„æ•°æ®URIã€‚MLflowä¼šå°†ä»»ä½•ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ï¼Œå¦‚<code>path</code>ç±»å‹ä¸­æ‰€ç¤ºã€‚å¯¹äºçŸ¥é“å¦‚ä½•ä»åˆ†å¸ƒå¼å­˜å‚¨ä¸­è¯»å–çš„ç¨‹åºï¼ˆä¾‹å¦‚ä½¿ç”¨Sparkï¼‰ï¼Œè¯·ä½¿ç”¨æ­¤ç±»å‹ã€‚<br><a name="fa4aa1b9"></a></p>
<h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a><a href="https://mlflow.org/docs/latest/projects.html#id5" target="_blank" rel="noopener">è¿è¡Œé¡¹ç›®</a><a href="https://mlflow.org/docs/latest/projects.html#running-projects" target="_blank" rel="noopener"></a></h2><p>MLflowæä¾›äº†ä¸¤ç§ç®€å•çš„æ–¹æ³•æ¥è¿è¡Œé¡¹ç›®ï¼š<a href="https://mlflow.org/docs/latest/cli.html#cli" target="_blank" rel="noopener">å‘½ä»¤è¡Œå·¥å…·</a>æˆ–Python APIã€‚è¿™ä¸¤ä¸ªå·¥å…·éƒ½é‡‡ç”¨ä»¥ä¸‹å‚æ•°ï¼š<code>mlflow run</code> <a href="https://mlflow.org/docs/latest/cli.html#cli" target="_blank" rel="noopener"></a><a href="https://mlflow.org/docs/latest/python_api/mlflow.projects.html#mlflow.projects.run" target="_blank" rel="noopener"><code>mlflow.projects.run()</code></a><br><a name="2daece47"></a></p>
<h4 id="é¡¹ç›®URI"><a href="#é¡¹ç›®URI" class="headerlink" title="é¡¹ç›®URI"></a>é¡¹ç›®URI</h4><p>å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯Gitå­˜å‚¨åº“è·¯å¾„ï¼ŒæŒ‡å®šä¸ºè¡¨å•çš„URI <code>https://&lt;repo&gt;</code>ï¼ˆä½¿ç”¨HTTPSï¼‰æˆ–<code>user@host:path</code> ï¼ˆé€šè¿‡SSHä½¿ç”¨Gitï¼‰ã€‚è¦é’ˆå¯¹ä½äºé¡¹ç›®å­ç›®å½•ä¸­çš„MLprojectæ–‡ä»¶è¿è¡Œï¼Œè¯·åœ¨URIå‚æ•°çš„æœ«å°¾æ·»åŠ â€œï¼ƒâ€ï¼Œç„¶åæ˜¯ä»é¡¹ç›®æ ¹ç›®å½•åˆ°åŒ…å«æ‰€éœ€é¡¹ç›®çš„å­ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚<br><a name="901b44b9"></a></p>
<h4 id="é¡¹ç›®ç‰ˆæœ¬"><a href="#é¡¹ç›®ç‰ˆæœ¬" class="headerlink" title="é¡¹ç›®ç‰ˆæœ¬"></a>é¡¹ç›®ç‰ˆæœ¬</h4><p>å¯¹äºåŸºäºGitçš„é¡¹ç›®ï¼Œè¦è¿è¡Œçš„Gitå­˜å‚¨åº“ä¸­çš„æäº¤å“ˆå¸Œæˆ–åˆ†æ”¯åç§°ã€‚<br><a name="c0cec124-1"></a></p>
<h4 id="å…¥å£ç‚¹-1"><a href="#å…¥å£ç‚¹-1" class="headerlink" title="å…¥å£ç‚¹"></a>å…¥å£ç‚¹</h4><p>è¦ä½¿ç”¨çš„å…¥å£ç‚¹çš„åç§°ï¼Œé»˜è®¤ä¸º<code>main</code>ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>MLproject</code>æ–‡ä»¶ä¸­æŒ‡å®šçš„ä»»ä½•å…¥å£ç‚¹ï¼Œæˆ–é¡¹ç›®ä¸­çš„ä»»ä½•<code>.py</code>æˆ–<code>.sh</code>æ–‡ä»¶ï¼Œä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸­çš„è·¯å¾„ï¼ˆä¾‹å¦‚ï¼Œ<code>src/test.py</code>ï¼‰ã€‚<br><a name="3d0a2df9"></a></p>
<h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>é”®å€¼å‚æ•°ã€‚å¦‚æœéœ€è¦ï¼Œå°†éªŒè¯å¹¶è½¬æ¢å…·æœ‰<a href="https://mlflow.org/docs/latest/projects.html#project-parameters" target="_blank" rel="noopener">å£°æ˜ç±»å‹çš„</a>ä»»ä½•å‚æ•° ã€‚<br><a name="569134fb"></a></p>
<h4 id="éƒ¨ç½²æ¨¡å¼"><a href="#éƒ¨ç½²æ¨¡å¼" class="headerlink" title="éƒ¨ç½²æ¨¡å¼"></a>éƒ¨ç½²æ¨¡å¼</h4><p>å¦‚æœæ‚¨æœ‰Databrickså¸æˆ·ï¼Œå‘½ä»¤è¡Œå’ŒAPIéƒ½å…è®¸æ‚¨åœ¨<a href="https://databricks.com/" target="_blank" rel="noopener">Databricks</a>ç¯å¢ƒä¸­<a href="https://mlflow.org/docs/latest/projects.html#databricks-execution" target="_blank" rel="noopener">è¿œç¨‹å¯åŠ¨é¡¹ç›®</a>ã€‚è¿™åŒ…æ‹¬è®¾ç½®ç¾¤é›†å‚æ•°ï¼Œä¾‹å¦‚VMç±»å‹ã€‚å½“ç„¶ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬çš„ å‘½ä»¤åœ¨æ‚¨é€‰æ‹©çš„ä»»ä½•å…¶ä»–è®¡ç®—åŸºç¡€æ¶æ„ä¸Šè¿è¡Œé¡¹ç›®ï¼ˆä¾‹å¦‚ï¼Œæäº¤å¯¹æ ‡å‡†ä½œä¸šæ’é˜Ÿç³»ç»Ÿæ‰§è¡Œçš„è„šæœ¬ï¼‰ã€‚<code>mlflow run</code><br>ä¾‹å¦‚ï¼Œæœ¬æ•™ç¨‹åˆ›å»ºå¹¶å‘å¸ƒä¸€ä¸ªè®­ç»ƒçº¿æ€§æ¨¡å‹çš„MLé¡¹ç›®ã€‚è¯¥é¡¹ç›®ä¹Ÿåœ¨GitHubä¸Šå‘å¸ƒï¼Œ<a href="https://github.com/mlflow/mlflow-example" target="_blank" rel="noopener">ç½‘å€</a>ä¸º<a href="https://github.com/mlflow/mlflow-example" target="_blank" rel="noopener">https://github.com/mlflow/mlflow-example</a>ã€‚è¦æ‰§è¡Œæ­¤é¡¹ç›®ï¼Œè¯·è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow run git@github.com:mlflow/mlflow-example.git -P alpha=0.5</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰å…¶ä»–é€‰é¡¹å¯ç”¨äºç¦ç”¨Condaç¯å¢ƒçš„åˆ›å»ºï¼Œå¦‚æœæ‚¨å¸Œæœ›åœ¨ç°æœ‰shellç¯å¢ƒä¸­å¿«é€Ÿæµ‹è¯•é¡¹ç›®ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚<br><a name="51b32c21"></a></p>
<h3 id="Databricksä¸Šçš„è¿œç¨‹æ‰§è¡Œ"><a href="#Databricksä¸Šçš„è¿œç¨‹æ‰§è¡Œ" class="headerlink" title="Databricksä¸Šçš„è¿œç¨‹æ‰§è¡Œ"></a>Databricksä¸Šçš„è¿œç¨‹æ‰§è¡Œ<a href="https://mlflow.org/docs/latest/projects.html#remote-execution-on-databricks" target="_blank" rel="noopener"></a></h3><p>åœ¨Databricksä¸Šè¿œç¨‹è¿è¡Œé¡¹ç›®çš„æ”¯æŒå¤„äºbetaé¢„è§ˆé˜¶æ®µï¼Œéœ€è¦Databrickså¸æˆ·ã€‚è¦æ¥æ”¶æœ‰å…³è¯¥åŠŸèƒ½çš„æœªæ¥æ›´æ–°ï¼Œè¯·<a href="http://databricks.com/mlflow" target="_blank" rel="noopener">åœ¨æ­¤å¤„æ³¨å†Œ</a>ã€‚<br><a name="23c8e7a9"></a></p>
<h4 id="åœ¨Databricksä¸Šå¯åŠ¨è¿œç¨‹æ‰§è¡Œ"><a href="#åœ¨Databricksä¸Šå¯åŠ¨è¿œç¨‹æ‰§è¡Œ" class="headerlink" title="åœ¨Databricksä¸Šå¯åŠ¨è¿œç¨‹æ‰§è¡Œ"></a>åœ¨Databricksä¸Šå¯åŠ¨è¿œç¨‹æ‰§è¡Œ</h4><p>è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œæ‚¨éœ€è¦æ‹¥æœ‰Databrickså¸æˆ·ï¼ˆå°šä¸æ”¯æŒCommunity Editionï¼‰ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»è®¾ç½®<a href="https://docs.databricks.com/api/latest/jobs.html#jobsclusterspecnewcluster" target="_blank" rel="noopener">Databrickså‘½ä»¤è¡Œå®ç”¨ç¨‹åº</a>ã€‚åœ¨Databricksæ–‡æ¡£ä¸­æ‰¾åˆ°æ›´è¯¦ç»†çš„è¯´æ˜ï¼ˆ<a href="https://docs.databricks.com/applications/mlflow/index.html" target="_blank" rel="noopener">æ­¤å¤„ä¸ºAzure Databricks</a>ï¼Œ<a href="https://docs.databricks.com/applications/mlflow/index.html" target="_blank" rel="noopener">æ­¤å¤„ä¸ºAWSä¸Šçš„Databricks</a>ï¼‰ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨è¯¥åŠŸèƒ½çš„ç®€è¦æ¦‚è¿°å¦‚ä¸‹ï¼š<br>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« è¿è¡Œçš„<a href="https://docs.databricks.com/api/latest/jobs.html#jobsclusterspecnewcluster" target="_blank" rel="noopener">é›†ç¾¤è§„èŒƒ</a>çš„JSONæ–‡ä»¶ ã€‚ç„¶åï¼Œé€šè¿‡è¿è¡Œæ‚¨çš„é¡¹ç›®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow run &lt;uri&gt; -m databricks --cluster-spec &lt;json-cluster-spec&gt;</span><br></pre></td></tr></table></figure>
<p>å¿…é¡»æ˜¯Gitå­˜å‚¨åº“URIã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡git-usernameå’Œgit-passwordå‚æ•°ï¼ˆæˆ–é€šè¿‡MLFLOW_GIT_USERNAMEå’Œ MLFLOW_GIT_PASSWORDç¯å¢ƒå˜é‡ï¼‰ä¼ é€’Gitå‡­æ® ã€‚</p>
<p><a name="9810fecc"></a></p>
<h2 id="å¿«é€Ÿè¿­ä»£"><a href="#å¿«é€Ÿè¿­ä»£" class="headerlink" title="å¿«é€Ÿè¿­ä»£"></a><a href="https://mlflow.org/docs/latest/projects.html#id6" target="_blank" rel="noopener">å¿«é€Ÿè¿­ä»£</a><a href="https://mlflow.org/docs/latest/projects.html#iterating-quickly" target="_blank" rel="noopener"></a></h2><p>å¦‚æœè¦å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼Œæˆ‘ä»¬å»ºè®®åˆ›å»ºä¸€ä¸ª<code>MLproject</code>æ–‡ä»¶ï¼Œå°†ä¸»ç¨‹åºæŒ‡å®šä¸º<code>main</code>å…¥å£ç‚¹ï¼Œå¹¶è¿è¡Œå®ƒã€‚ä¸ºé¿å…é‡å¤å†™å…¥ï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶ä¸­æ·»åŠ é»˜è®¤å‚æ•°ã€‚<code>mlflow run .</code><br><a name="7eb43295"></a></p>
<h2 id="æ„å»ºå¤šæ­¥éª¤å·¥ä½œæµç¨‹"><a href="#æ„å»ºå¤šæ­¥éª¤å·¥ä½œæµç¨‹" class="headerlink" title="æ„å»ºå¤šæ­¥éª¤å·¥ä½œæµç¨‹"></a><a href="https://mlflow.org/docs/latest/projects.html#id7" target="_blank" rel="noopener">æ„å»ºå¤šæ­¥éª¤å·¥ä½œæµç¨‹</a><a href="https://mlflow.org/docs/latest/projects.html#building-multistep-workflows" target="_blank" rel="noopener"></a></h2><p><a href="https://mlflow.org/docs/latest/python_api/mlflow.projects.html#mlflow.projects.run" target="_blank" rel="noopener"><code>mlflow.projects.run()</code></a>APIï¼Œç»“åˆ<a href="https://mlflow.org/docs/latest/python_api/mlflow.tracking.html#module-mlflow.tracking" target="_blank" rel="noopener"><code>mlflow.tracking</code></a>ï¼Œä½¿å¾—å¯ä»¥æ„å»ºå…·æœ‰ä¸åŒçš„é¡¹ç›®ï¼ˆæˆ–å…¥å£ç‚¹åœ¨åŒä¸€ä¸ªé¡¹ç›®ï¼‰ä½œä¸ºå•ç‹¬çš„æ­¥éª¤çš„å¤šæ­¥éª¤çš„å·¥ä½œæµç¨‹ã€‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼š<a href="https://mlflow.org/docs/latest/python_api/mlflow.projects.html#mlflow.projects.run" target="_blank" rel="noopener"><code>mlflow.projects.run()</code></a>è¿”å›ä¸€ä¸ªè¿è¡Œå¯¹è±¡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒ <a href="https://mlflow.org/docs/latest/python_api/mlflow.tracking.html#module-mlflow.tracking" target="_blank" rel="noopener"><code>mlflow.tracking</code></a>æ¥ç¡®å®šè¿è¡Œä½•æ—¶ç»“æŸå¹¶è·å–å…¶è¾“å‡ºå·¥ä»¶ã€‚ç„¶åï¼Œè¿™äº›ä¼ªåƒå¯ä»¥è¢«ä¼ é€’åˆ°å¦ä¸€ä¸ªæ­¥éª¤ï¼Œè¯¥æ­¥éª¤éœ€è¦<code>path</code>æˆ–<code>uri</code>å‚æ•°ã€‚æ‚¨å¯ä»¥åœ¨å•ä¸ªPythonç¨‹åºä¸­åè°ƒæ‰€æœ‰å·¥ä½œæµï¼Œè¯¥ç¨‹åºæŸ¥çœ‹æ¯ä¸ªæ­¥éª¤çš„ç»“æœï¼Œå¹¶ä½¿ç”¨è‡ªå®šä¹‰ä»£ç å†³å®šæ¥ä¸‹æ¥è¦æäº¤çš„å†…å®¹ã€‚ä¸€äº›ç¤ºä¾‹ç”¨äºå¤šæ­¥éª¤å·¥ä½œæµçš„æ¡ˆä¾‹åŒ…æ‹¬ï¼š<br><a name="49e2a189"></a></p>
<h4 id="æ¨¡å—åŒ–æ‚¨çš„æ•°æ®ç§‘å­¦ä»£ç "><a href="#æ¨¡å—åŒ–æ‚¨çš„æ•°æ®ç§‘å­¦ä»£ç " class="headerlink" title="æ¨¡å—åŒ–æ‚¨çš„æ•°æ®ç§‘å­¦ä»£ç "></a>æ¨¡å—åŒ–æ‚¨çš„æ•°æ®ç§‘å­¦ä»£ç </h4><p>ä¸åŒçš„ç”¨æˆ·å¯ä»¥å‘å¸ƒå¯é‡ç”¨çš„æ­¥éª¤ï¼Œç”¨äºæ•°æ®ç‰¹å¾åŒ–ï¼ŒåŸ¹è®­ï¼ŒéªŒè¯ç­‰ï¼Œå…¶ä»–ç”¨æˆ·æˆ–å›¢é˜Ÿå¯ä»¥åœ¨ä»–ä»¬çš„å·¥ä½œæµç¨‹ä¸­è¿è¡Œã€‚ç”±äºMLflowæ”¯æŒGitç‰ˆæœ¬æ§åˆ¶ï¼Œå› æ­¤å¦ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥å°†å…¶å·¥ä½œæµç¨‹é”å®šåˆ°é¡¹ç›®çš„ç‰¹å®šç‰ˆæœ¬ï¼Œæˆ–è€…æŒ‰ç…§è‡ªå·±çš„è®¡åˆ’å‡çº§åˆ°æ–°ç‰ˆæœ¬ã€‚<br><a name="66b62bf4"></a></p>
<h4 id="è¶…å‚æ•°è°ƒæ•´"><a href="#è¶…å‚æ•°è°ƒæ•´" class="headerlink" title="è¶…å‚æ•°è°ƒæ•´"></a>è¶…å‚æ•°è°ƒæ•´</h4><p>ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/mlflow.projects.html#mlflow.projects.run" target="_blank" rel="noopener"><code>mlflow.projects.run()</code></a>æ‚¨å¯ä»¥åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæˆ–åœ¨åƒDatabricksè¿™æ ·çš„äº‘å¹³å°ä¸Šå¹¶è¡Œå¯åŠ¨å¤šä¸ªè¿è¡Œã€‚ç„¶åï¼Œæ‚¨çš„é©±åŠ¨ç¨‹åºå¯ä»¥å®æ—¶æ£€æŸ¥æ¯æ¬¡è¿è¡Œçš„æŒ‡æ ‡ï¼Œä»¥å–æ¶ˆè¿è¡Œï¼Œå¯åŠ¨æ–°è¿è¡Œæˆ–é€‰æ‹©ç›®æ ‡æŒ‡æ ‡ä¸Šè¿è¡Œæœ€ä½³çš„è¿è¡Œã€‚<br><a name="95c01146"></a></p>
<h4 id="äº¤å‰éªŒè¯"><a href="#äº¤å‰éªŒè¯" class="headerlink" title="äº¤å‰éªŒè¯"></a>äº¤å‰éªŒè¯</h4><p>æœ‰æ—¶æ‚¨å¸Œæœ›åœ¨åŸ¹è®­å’ŒéªŒè¯æ•°æ®çš„ä¸åŒéšæœºåˆ†ç»„ä¸Šè¿è¡Œç›¸åŒçš„åŸ¹è®­ä»£ç ã€‚ä½¿ç”¨MLflowé¡¹ç›®ï¼Œæ‚¨å¯ä»¥ä»¥å…è®¸æ­¤æ–¹å¼æ‰“åŒ…é¡¹ç›®ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡å°†åˆ—è½¦/éªŒè¯æ‹†åˆ†çš„éšæœºç§å­ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…é¦–å…ˆè°ƒç”¨å¯ä»¥æ‹†åˆ†è¾“å…¥æ•°æ®çš„å¦ä¸€ä¸ªé¡¹ç›®ã€‚<br>æœ‰å…³å¦‚ä½•æ„å»ºæ­¤ç±»å¤šæ­¥éª¤å·¥ä½œ<a href="https://github.com/mlflow/mlflow/tree/master/examples/multistep_workflow" target="_blank" rel="noopener">æµçš„ç¤ºä¾‹</a>ï¼Œè¯·å‚é˜…MLflow Multistep <a href="https://github.com/mlflow/mlflow/tree/master/examples/multistep_workflow" target="_blank" rel="noopener">å·¥ä½œæµç¤ºä¾‹é¡¹ç›®</a>ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/03/15/yuque/MLflowé¡¹ç›®/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/MLFLOWæ¦‚å¿µ" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/yuque/MLFLOWæ¦‚å¿µ/">MLFLOWæ¦‚å¿µ</a>
    </h1>
  

        
        <a href="/2019/03/15/yuque/MLFLOWæ¦‚å¿µ/" class="archive-article-date">
  	<time datetime="2019-03-15T03:36:04.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-03-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a name="b59c9e0f"></a></p>
<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>MLflowåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<a href="https://mlflow.org/docs/latest/tracking.html#tracking" target="_blank" rel="noopener">è·Ÿè¸ª</a>ï¼Œ<a href="https://mlflow.org/docs/latest/projects.html#projects" target="_blank" rel="noopener">é¡¹ç›®</a>å’Œ <a href="https://mlflow.org/docs/latest/models.html#models" target="_blank" rel="noopener">æ¨¡å‹</a>ã€‚æ‚¨å¯ä»¥è‡ªå·±ä½¿ç”¨è¿™äº›ç»„ä»¶ä¸­çš„æ¯ä¸€ä¸ª - ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä»¥MLflowçš„æ¨¡å‹æ ¼å¼å¯¼å‡ºæ¨¡å‹è€Œä¸ä½¿ç”¨è·Ÿè¸ªæˆ–é¡¹ç›® - ä½†å®ƒä»¬ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°ååŒå·¥ä½œã€‚<br>MLflowçš„æ ¸å¿ƒç†å¿µæ˜¯åœ¨æ‚¨çš„å·¥ä½œæµç¨‹ä¸­å°½å¯èƒ½å°‘åœ°è®¾ç½®çº¦æŸï¼šå®ƒå¯ä»¥ä¸ä»»ä½•æœºå™¨å­¦ä¹ åº“ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‰æƒ¯ä¾‹ç¡®å®šä»£ç çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œå¹¶ä¸”åªéœ€è¦å¾ˆå°‘çš„æ›´æ”¹å³å¯é›†æˆåˆ°ç°æœ‰çš„ä»£ç åº“ä¸­ã€‚ä¸æ­¤åŒæ—¶ï¼ŒMLflowæ—¨åœ¨é‡‡ç”¨ä»¥å…¶æ ¼å¼ç¼–å†™çš„ä»»ä½•ä»£ç åº“ï¼Œå¹¶ä½¿å…¶å¯ç”±å¤šä¸ªæ•°æ®ç§‘å­¦å®¶é‡ç°å’Œé‡ç”¨ã€‚åœ¨è¿™ä¸ªé¡µé¢ä¸Šï¼Œæˆ‘ä»¬æè¿°äº†å…¸å‹çš„MLå·¥ä½œæµç¨‹ä»¥åŠMLflowé€‚åˆçš„ä½ç½®ã€‚<br><a name="9253a4bc"></a></p>
<h2 id="æœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹"><a href="#æœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹" class="headerlink" title="æœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹"></a>æœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹<a href="https://mlflow.org/docs/latest/concepts.html#the-machine-learning-workflow" target="_blank" rel="noopener"></a></h2><p>æœºå™¨å­¦ä¹ éœ€è¦å°è¯•å„ç§æ•°æ®é›†ï¼Œæ•°æ®å‡†å¤‡æ­¥éª¤å’Œç®—æ³•ï¼Œä»¥æ„å»ºæœ€å¤§åŒ–æŸäº›ç›®æ ‡æŒ‡æ ‡çš„æ¨¡å‹ã€‚æ„å»ºæ¨¡å‹åï¼Œè¿˜éœ€è¦å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿï¼Œç›‘æ§å…¶æ€§èƒ½ï¼Œå¹¶ä¸æ–­å¯¹æ–°æ•°æ®è¿›è¡Œé‡æ–°è®­ç»ƒï¼Œå¹¶ä¸å…¶ä»–æ¨¡å‹è¿›è¡Œæ¯”è¾ƒã€‚<br>å› æ­¤ï¼Œé€šè¿‡æœºå™¨å­¦ä¹ æé«˜æ•ˆç‡å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è·Ÿè¸ªå®éªŒå¾ˆå›°éš¾ã€‚</strong>å½“æ‚¨åªæ˜¯å¤„ç†ç¬”è®°æœ¬ç”µè„‘ä¸Šçš„æ–‡ä»¶æˆ–äº¤äº’å¼ç¬”è®°æœ¬æ—¶ï¼Œå¦‚ä½•åˆ¤æ–­å“ªäº›æ•°æ®ï¼Œä»£ç å’Œå‚æ•°å¯ä»¥è·å¾—ç‰¹å®šç»“æœï¼Ÿ</li>
<li><strong>é‡ç°ä»£ç å¾ˆå›°éš¾ã€‚</strong>å³ä½¿æ‚¨ä»”ç»†è·Ÿè¸ªä»£ç ç‰ˆæœ¬å’Œå‚æ•°ï¼Œä¹Ÿéœ€è¦æ•è·æ•´ä¸ªç¯å¢ƒï¼ˆä¾‹å¦‚ï¼Œåº“ä¾èµ–é¡¹ï¼‰ä»¥å†æ¬¡è·å¾—ç›¸åŒçš„ç»“æœã€‚å¦‚æœæ‚¨å¸Œæœ›å…¶ä»–æ•°æ®ç§‘å­¦å®¶ä½¿ç”¨æ‚¨çš„ä»£ç ï¼Œæˆ–è€…æ‚¨å¸Œæœ›åœ¨å¦ä¸€ä¸ªå¹³å°ï¼ˆä¾‹å¦‚ï¼Œåœ¨äº‘ä¸­ï¼‰å¤§è§„æ¨¡è¿è¡Œç›¸åŒçš„ä»£ç ï¼Œåˆ™è¿™å°¤å…¶å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</li>
<li><strong>æ²¡æœ‰æ ‡å‡†çš„æ–¹æ³•æ¥æ‰“åŒ…å’Œéƒ¨ç½²æ¨¡å‹ã€‚</strong>æ¯ä¸ªæ•°æ®ç§‘å­¦å›¢é˜Ÿä¸ºå…¶ä½¿ç”¨çš„æ¯ä¸ªMLåº“æå‡ºè‡ªå·±çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ¨¡å‹ä¸äº§ç”Ÿå®ƒçš„ä»£ç å’Œå‚æ•°ä¹‹é—´çš„é“¾æ¥ç»å¸¸ä¸¢å¤±ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œè™½ç„¶å„ä¸ªMLåº“æä¾›äº†ä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼Œæ¨¡å‹æœåŠ¡ï¼‰ï¼Œä½†ä¸ºäº†è·å¾—æœ€ä½³ç»“æœï¼Œæ‚¨é€šå¸¸éœ€è¦å°è¯•<em>å¤šä¸ªMLåº“</em>ã€‚MLflowå…è®¸æ‚¨ä½¿ç”¨ä»»ä½•åº“æ¥è®­ç»ƒï¼Œé‡ç”¨å’Œéƒ¨ç½²æ¨¡å‹ï¼Œå¹¶å°†å®ƒä»¬æ‰“åŒ…æˆå¯é‡å¤çš„æ­¥éª¤ï¼Œå…¶ä»–æ•°æ®ç§‘å­¦å®¶å¯ä»¥å°†å…¶ç”¨ä½œâ€œé»‘åŒ£å­â€ï¼Œç”šè‡³æ— éœ€çŸ¥é“æ‚¨æ­£åœ¨ä½¿ç”¨å“ªä¸ªåº“ã€‚<br><a name="3e771e20"></a></p>
<h2 id="MLflowç»„ä»¶"><a href="#MLflowç»„ä»¶" class="headerlink" title="MLflowç»„ä»¶"></a>MLflowç»„ä»¶</h2><p>MLflowæä¾›ä¸‰ä¸ªç»„ä»¶æ¥å¸®åŠ©ç®¡ç†MLå·¥ä½œæµç¨‹ï¼š<br><strong>MLflow Tracking</strong>æ˜¯ä¸€ä¸ªAPIå’ŒUIï¼Œç”¨äºåœ¨è¿è¡Œæœºå™¨å­¦ä¹ ä»£ç æ—¶è®°å½•å‚æ•°ï¼Œä»£ç ç‰ˆæœ¬ï¼Œåº¦é‡å’Œè¾“å‡ºæ–‡ä»¶ï¼Œä»¥åŠä»¥åå¯è§†åŒ–ç»“æœã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒï¼ˆä¾‹å¦‚ï¼Œç‹¬ç«‹è„šæœ¬æˆ–ç¬”è®°æœ¬ï¼‰ä¸­ä½¿ç”¨MLflow Trackingå°†ç»“æœè®°å½•åˆ°æœ¬åœ°æ–‡ä»¶æˆ–æœåŠ¡å™¨ï¼Œç„¶åæ¯”è¾ƒå¤šæ¬¡è¿è¡Œã€‚å›¢é˜Ÿè¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥æ¯”è¾ƒæ¥è‡ªä¸åŒç”¨æˆ·çš„ç»“æœã€‚<br><strong>MLflow Projects</strong>æ˜¯æ‰“åŒ…å¯é‡ç”¨æ•°æ®ç§‘å­¦ä»£ç çš„æ ‡å‡†æ ¼å¼ã€‚æ¯ä¸ªé¡¹ç›®åªæ˜¯ä¸€ä¸ªåŒ…å«ä»£ç æˆ–Gitå­˜å‚¨åº“çš„ç›®å½•ï¼Œå¹¶ä½¿ç”¨æè¿°ç¬¦æ–‡ä»¶æˆ–ç®€å•çº¦å®šæ¥æŒ‡å®šå…¶ä¾èµ–å…³ç³»ä»¥åŠå¦‚ä½•è¿è¡Œä»£ç ã€‚ä¾‹å¦‚ï¼Œé¡¹ç›®å¯ä»¥åŒ…å«<code>conda.yaml</code>ç”¨äºæŒ‡å®šPython <a href="https://conda.io/docs/" target="_blank" rel="noopener">Conda</a>ç¯å¢ƒçš„æ–‡ä»¶ã€‚åœ¨é¡¹ç›®ä¸­ä½¿ç”¨MLflow Tracking APIæ—¶ï¼ŒMLflowä¼šè‡ªåŠ¨è®°ä½æ‰§è¡Œçš„é¡¹ç›®ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼ŒGit commitï¼‰å’Œä»»ä½•å‚æ•°ã€‚æ‚¨å¯ä»¥ä»GitHubæˆ–æ‚¨è‡ªå·±çš„Gitå­˜å‚¨åº“è½»æ¾è¿è¡Œç°æœ‰çš„MLflowé¡¹ç›®ï¼Œå¹¶å°†å®ƒä»¬é“¾æ¥åˆ°å¤šæ­¥éª¤å·¥ä½œæµç¨‹ã€‚<br><strong>MLflowæ¨¡å‹</strong>æä¾›å¤šç§åŒ…è£…æœºå™¨å­¦ä¹ æ¨¡å‹çš„çº¦å®šï¼Œä»¥åŠå„ç§å¸®åŠ©æ‚¨éƒ¨ç½²å®ƒä»¬çš„å·¥å…·ã€‚æ¯ä¸ªæ¨¡å‹éƒ½ä¿å­˜ä¸ºåŒ…å«ä»»æ„æ–‡ä»¶çš„ç›®å½•å’Œæè¿°æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åˆ—å‡ºäº†å¯ä»¥ä½¿ç”¨æ¨¡å‹çš„å‡ ç§â€œé£æ ¼â€ã€‚ä¾‹å¦‚ï¼ŒTensorFlowæ¨¡å‹å¯ä»¥ä½œä¸ºTensorFlow DAGåŠ è½½ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºPythonå‡½æ•°åŠ è½½åˆ°è¾“å…¥æ•°æ®ã€‚MLflowæä¾›äº†å°†è®¸å¤šå¸¸è§æ¨¡å‹ç±»å‹éƒ¨ç½²åˆ°ä¸åŒå¹³å°çš„å·¥å…·ï¼šä¾‹å¦‚ï¼Œä»»ä½•æ”¯æŒâ€œPythonå‡½æ•°â€é£æ ¼çš„æ¨¡å‹éƒ½å¯ä»¥éƒ¨ç½²åˆ°åŸºäºDockerçš„RESTæœåŠ¡å™¨ï¼Œäº‘å¹³å°ï¼ˆå¦‚Azure MLå’ŒAWS SageMakerï¼‰ï¼Œä»¥åŠApache Sparkä¸­çš„ç”¨æˆ·å®šä¹‰å‡½æ•°ï¼Œç”¨äºæ‰¹å¤„ç†å’Œæµå¼æ¨ç†ã€‚å¦‚æœæ‚¨ä½¿ç”¨Tracking APIè¾“å‡ºMLflowæ¨¡å‹ï¼ŒMLflowè¿˜ä¼šè‡ªåŠ¨è®°ä½å“ªä¸ªé¡¹ç›®å¹¶è¿è¡Œå®ƒä»¬ã€‚<br><a name="2bdbec15"></a></p>
<h2 id="å¯æ‰©å±•æ€§å’Œå¤§æ•°æ®"><a href="#å¯æ‰©å±•æ€§å’Œå¤§æ•°æ®" class="headerlink" title="å¯æ‰©å±•æ€§å’Œå¤§æ•°æ®"></a>å¯æ‰©å±•æ€§å’Œå¤§æ•°æ®<a href="https://mlflow.org/docs/latest/concepts.html#scalability-and-big-data" target="_blank" rel="noopener"></a></h2><p>æ•°æ®æ˜¯åœ¨æœºå™¨å­¦ä¹ ä¸­è·å¾—è‰¯å¥½ç»“æœçš„å…³é”®ï¼Œå› æ­¤MLflowæ—¨åœ¨æ‰©å±•åˆ°å¤§å‹æ•°æ®é›†ï¼Œå¤§å‹è¾“å‡ºæ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œæ¨¡å‹ï¼‰å’Œå¤§é‡å®éªŒã€‚å…·ä½“æ¥è¯´ï¼ŒMLflowæ”¯æŒä¸‰ç»´æ‰©å±•ï¼š</p>
<ul>
<li>å•ä¸ªMLflowè¿è¡Œå¯ä»¥åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸Šæ‰§è¡Œï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ <a href="https://spark.apache.org/" target="_blank" rel="noopener">Apache Spark</a>ã€‚æ‚¨å¯ä»¥åœ¨æ‰€é€‰çš„åˆ†å¸ƒå¼åŸºç¡€æ¶æ„ä¸Šå¯åŠ¨è¿è¡Œï¼Œå¹¶å°†ç»“æœæŠ¥å‘Šç»™Tracking Serverä»¥è¿›è¡Œæ¯”è¾ƒã€‚MLflowåŒ…å«ä¸€ä¸ªå†…ç½®APIï¼Œå¯åœ¨<a href="https://databricks.com/" target="_blank" rel="noopener">Databricks</a>ä¸Šå¯åŠ¨è¿è¡Œã€‚</li>
<li>MLflowæ”¯æŒä¸ä¸åŒå‚æ•°å¹¶è¡Œå¯åŠ¨å¤šä¸ªè¿è¡Œï¼Œä¾‹å¦‚ï¼Œç”¨äºè¶…å‚æ•°è°ƒæ•´ã€‚æ‚¨åªéœ€ä½¿ç”¨<a href="https://mlflow.org/docs/latest/projects.html#projects" target="_blank" rel="noopener">Projects API</a>å¯åŠ¨å¤šæ¬¡è¿è¡Œï¼Œä½¿ç”¨<a href="https://mlflow.org/docs/latest/tracking.html#tracking" target="_blank" rel="noopener">Tracking API</a>è·Ÿè¸ªå®ƒä»¬ã€‚</li>
<li>MLflow Projectså¯ä»¥ä»åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼ˆå¦‚AWS S3å’Œ<a href="https://docs.databricks.com/user-guide/dbfs-databricks-file-system.html" target="_blank" rel="noopener">DBFSï¼‰</a>è·å–è¾“å…¥å’Œå†™å…¥è¾“å‡ºã€‚MLflowå¯ä»¥åœ¨æœ¬åœ°è‡ªåŠ¨ä¸‹è½½æ­¤ç±»æ–‡ä»¶ï¼Œä»¥ç”¨äºåªèƒ½åœ¨æœ¬åœ°æ–‡ä»¶ä¸Šè¿è¡Œçš„é¡¹ç›®ï¼Œæˆ–è€…å¦‚æœæ”¯æŒï¼Œåˆ™ä¸ºé¡¹ç›®æä¾›åˆ†å¸ƒå¼å­˜å‚¨URIã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ç¼–å†™æ„å»ºå¤§å‹æ•°æ®é›†çš„é¡¹ç›®ï¼Œä¾‹å¦‚åˆ›å»º100 TBæ–‡ä»¶ã€‚<br><a name="9d4397cc"></a><h2 id="ç¤ºä¾‹ç”¨ä¾‹"><a href="#ç¤ºä¾‹ç”¨ä¾‹" class="headerlink" title="ç¤ºä¾‹ç”¨ä¾‹"></a>ç¤ºä¾‹ç”¨ä¾‹<a href="https://mlflow.org/docs/latest/concepts.html#example-use-cases" target="_blank" rel="noopener"></a></h2>æ— è®ºæ‚¨æ˜¯å•ç‹¬å·¥ä½œçš„æ•°æ®ç§‘å­¦å®¶è¿˜æ˜¯å¤§å‹ç»„ç»‡çš„ä¸€å‘˜ï¼Œæ‚¨éƒ½å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä½¿ç”¨MLflowï¼š<br><strong>ä¸ªäººæ•°æ®ç§‘å­¦å®¶</strong>å¯ä»¥ä½¿ç”¨MLflowè·Ÿè¸ªåœ¨å…¶æœºå™¨ä¸Šæœ¬åœ°è·Ÿè¸ªå®éªŒï¼Œåœ¨é¡¹ç›®ä¸­ç»„ç»‡ä»£ç ä»¥ä¾›å°†æ¥é‡ç”¨ï¼Œä»¥åŠç”Ÿäº§å·¥ç¨‹å¸ˆéšåå¯ä»¥ä½¿ç”¨MLflowçš„éƒ¨ç½²å·¥å…·éƒ¨ç½²çš„è¾“å‡ºæ¨¡å‹ã€‚MLflow Trackingé»˜è®¤æƒ…å†µä¸‹åªè¯»å–å’Œå†™å…¥æ–‡ä»¶åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤æ— éœ€éƒ¨ç½²æœåŠ¡å™¨ã€‚<br><strong>æ•°æ®ç§‘å­¦å›¢é˜Ÿ</strong>å¯ä»¥éƒ¨ç½²MLflowè·Ÿè¸ªæœåŠ¡å™¨æ¥è®°å½•å’Œæ¯”è¾ƒå¤„ç†åŒä¸€é—®é¢˜çš„å¤šä¸ªç”¨æˆ·çš„ç»“æœã€‚é€šè¿‡è®¾ç½®ç”¨äºå‘½åå…¶å‚æ•°å’Œåº¦é‡çš„çº¦å®šï¼Œä»–ä»¬å¯ä»¥å°è¯•ä¸åŒçš„ç®—æ³•æ¥è§£å†³ç›¸åŒçš„é—®é¢˜ï¼Œç„¶åå†æ¬¡å¯¹æ–°æ•°æ®è¿è¡Œç›¸åŒçš„ç®—æ³•ä»¥æ¯”è¾ƒæœªæ¥çš„æ¨¡å‹ã€‚æ­¤å¤–ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸‹è½½å¹¶è¿è¡Œå¦ä¸€ä¸ªæ¨¡å‹ã€‚<br><strong>å¤§å‹ç»„ç»‡</strong>å¯ä»¥ä½¿ç”¨MLflowå…±äº«é¡¹ç›®ï¼Œæ¨¡å‹å’Œç»“æœã€‚ä»»ä½•å›¢é˜Ÿéƒ½å¯ä»¥ä½¿ç”¨MLflowé¡¹ç›®è¿è¡Œå¦ä¸€ä¸ªå›¢é˜Ÿçš„ä»£ç ï¼Œå› æ­¤ç»„ç»‡å¯ä»¥æ‰“åŒ…å…¶ä»–å›¢é˜Ÿå¯ä»¥ä½¿ç”¨çš„æœ‰ç”¨åŸ¹è®­å’Œæ•°æ®å‡†å¤‡æ­¥éª¤ï¼Œæˆ–è€…æ¯”è¾ƒåŒä¸€ä»»åŠ¡ä¸­è®¸å¤šå›¢é˜Ÿçš„ç»“æœã€‚æ­¤å¤–ï¼Œå·¥ç¨‹å›¢é˜Ÿå¯ä»¥è½»æ¾åœ°å°†å·¥ä½œæµç¨‹ä»ç ”å‘è½¬ç§»åˆ°ç”Ÿäº§é˜¶æ®µã€‚<br><strong>ç”Ÿäº§å·¥ç¨‹å¸ˆ</strong>å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼éƒ¨ç½²æ¥è‡ªä¸åŒMLåº“çš„æ¨¡å‹ï¼Œå°†æ¨¡å‹ä½œä¸ºæ–‡ä»¶å­˜å‚¨åœ¨ä»–ä»¬é€‰æ‹©çš„ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå¹¶è·Ÿè¸ªæ¨¡å‹çš„è¿è¡Œæ¥æºã€‚<br><strong>ç ”ç©¶äººå‘˜å’Œå¼€æºå¼€å‘äººå‘˜</strong>å¯ä»¥ä½¿ç”¨MLflowé¡¹ç›®æ ¼å¼å‘GitHubå‘å¸ƒä»£ç ï¼Œä½¿ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤è½»æ¾è¿è¡Œä»£ç  ã€‚<code>mlflow run github.com/...</code><br><strong>ML Library Developers</strong>å¯ä»¥è¾“å‡ºMLflow Modelæ ¼å¼çš„æ¨¡å‹ï¼Œè®©å®ƒä»¬ä½¿ç”¨MLflowçš„å†…ç½®å·¥å…·è‡ªåŠ¨æ”¯æŒéƒ¨ç½²ã€‚æ­¤å¤–ï¼Œéƒ¨ç½²å·¥å…·å¼€å‘äººå‘˜ï¼ˆä¾‹å¦‚ï¼Œæ„å»ºæœåŠ¡å¹³å°çš„äº‘ä¾›åº”å•†ï¼‰å¯ä»¥è‡ªåŠ¨æ”¯æŒå„ç§æ¨¡å‹ã€‚</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/03/15/yuque/MLFLOWæ¦‚å¿µ/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Mlflowä»‹ç»" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/yuque/Mlflowä»‹ç»/">Mlflowä»‹ç»</a>
    </h1>
  

        
        <a href="/2019/03/15/yuque/Mlflowä»‹ç»/" class="archive-article-date">
  	<time datetime="2019-03-15T01:40:23.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-03-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a name="61a3ec66"></a></p>
<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>MLflowæ˜¯ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ ç”Ÿå‘½å‘¨æœŸçš„å¼€æºå¹³å°ã€‚è¿™æ„å‘³ç€å®ƒå…·æœ‰åœ¨è®­ç»ƒå’Œè¿è¡ŒæœŸé—´ç›‘æ§æ¨¡å‹çš„ç»„ä»¶ï¼Œå­˜å‚¨æ¨¡å‹çš„èƒ½åŠ›ï¼Œåœ¨ç”Ÿäº§ä»£ç ä¸­åŠ è½½æ¨¡å‹ä»¥åŠåˆ›å»ºç®¡é“ã€‚<br>MLflowçš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨MLä¹‹ä¸Šæä¾›é¢å¤–çš„å±‚ï¼Œå…è®¸æ•°æ®ç§‘å­¦å®¶ä¸å‡ ä¹ä»»ä½•æœºå™¨å­¦ä¹ åº“ï¼ˆ<a href="https://github.com/h2oai" target="_blank" rel="noopener"><em>h2oï¼Œ</em></a><a href="https://keras.io/" target="_blank" rel="noopener"><em>kerasï¼Œ</em></a><a href="http://mleap-docs.combust.ml/" target="_blank" rel="noopener"><em>mleapï¼Œ</em></a><a href="https://pytorch.org/" target="_blank" rel="noopener"><em>pytorchï¼Œ</em></a><a href="http://scikit-learn.org/stable/" target="_blank" rel="noopener"><em>sklearnå’Œ</em></a><a href="https://www.tensorflow.org/" target="_blank" rel="noopener"><em>tensorflow</em></a>ï¼‰ä¸€èµ·å·¥ä½œï¼ŒåŒæ—¶ï¼Œå®ƒå°†ä»–ä»¬çš„å·¥ä½œå¸¦åˆ°å¦ä¸€ä¸ªå±‚æ¬¡ã€‚<br>MLflowæä¾›ä¸‰ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener"><strong>è·Ÿè¸ª</strong></a> â€Š- è®°å½•å’ŒæŸ¥è¯¢å®éªŒï¼šä»£ç ï¼Œæ•°æ®ï¼Œé…ç½®å’Œç»“æœã€‚è·Ÿè¸ªå»ºæ¨¡è¿›åº¦éå¸¸æœ‰ç”¨ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/projects.html" target="_blank" rel="noopener"><strong>é¡¹ç›®</strong></a> â€Š- åœ¨ä»»ä½•å¹³å°ï¼ˆ<strong>_å³_</strong> <a href="https://aws.amazon.com/sagemaker" target="_blank" rel="noopener"><em>Sagemaker</em></a>ï¼‰ä¸Šå¯é‡å¤è¿è¡Œçš„åŒ…è£…æ ¼å¼ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/models.html" target="_blank" rel="noopener"><strong>æ¨¡å‹</strong></a> â€Š- å°†æ¨¡å‹å‘é€åˆ°å„ç§éƒ¨ç½²å·¥å…·çš„é€šç”¨æ ¼å¼ã€‚<blockquote>
<p><strong>MLflow</strong>æ˜¯ä¸€ä¸ªç®¡ç†MLç”Ÿå‘½å‘¨æœŸçš„å¼€æºå¹³å°ï¼ŒåŒ…æ‹¬å®éªŒï¼Œå¯é‡å¤æ€§å’Œéƒ¨ç½²ã€‚<br><a name="e655a410"></a></p>
</blockquote>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1>MLflowçš„ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„æ˜¯éœ€è¦condaçš„æ”¯æŒï¼Œå› æ­¤ä¸ºä¿è¯åæœŸå¯ç”¨ï¼Œéœ€è¦é¦–å…ˆå®‰è£…condaç¯å¢ƒã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.anaconda.com/archive/Anaconda3-2018.12-Linux-x86_64.sh</span><br><span class="line">bash Anaconda3-2018.12-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œåï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ gitæƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">"ujujzhao@gmail.com"</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£…mlflow</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./pip install mlflow</span><br></pre></td></tr></table></figure>
<p><a name="c182e73c"></a></p>
<h1 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h1><p><a name="c66f9448"></a></p>
<h2 id="ä½¿ç”¨Tracking-API"><a href="#ä½¿ç”¨Tracking-API" class="headerlink" title="ä½¿ç”¨Tracking API"></a>ä½¿ç”¨Tracking API</h2><p>è¯¥<a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener">MLflowè·Ÿè¸ªAPI</a>å¯ä»¥è®©ä½ ä»ä½ çš„æ•°æ®çš„ç§‘å­¦ä»£ç ç™»å½•åº¦é‡å’Œå·¥ä»¶ï¼ˆæ–‡ä»¶ï¼‰ï¼Œçœ‹çœ‹æ‚¨è¿è¡Œçš„å†å²ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–å†™å¦‚ä¸‹çš„ç®€å•Pythonè„šæœ¬æ¥å°è¯•å®ƒï¼ˆæ­¤ç¤ºä¾‹ä¹ŸåŒ…æ‹¬åœ¨å†…<code>quickstart/mlflow_tracking.py</code>ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> mlflow <span class="keyword">import</span> log_metric, log_param, log_artifact</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># Log a parameter (key-value pair)</span></span><br><span class="line">    log_param(<span class="string">"param1"</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Log a metric; metrics can be updated throughout the run</span></span><br><span class="line">    log_metric(<span class="string">"foo"</span>, <span class="number">1</span>)</span><br><span class="line">    log_metric(<span class="string">"foo"</span>, <span class="number">2</span>)</span><br><span class="line">    log_metric(<span class="string">"foo"</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Log an artifact (output file)</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"output.txt"</span>, <span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">"Hello world!"</span>)</span><br><span class="line">    log_artifact(<span class="string">"output.txt"</span>)</span><br></pre></td></tr></table></figure>
<p><a name="a1168828"></a></p>
<h2 id="æŸ¥çœ‹è·Ÿè¸ªUI"><a href="#æŸ¥çœ‹è·Ÿè¸ªUI" class="headerlink" title="æŸ¥çœ‹è·Ÿè¸ªUI"></a>æŸ¥çœ‹è·Ÿè¸ªUI</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— è®ºæ‚¨åœ¨ä½•å¤„è¿è¡Œç¨‹åºï¼Œè·Ÿè¸ªAPIéƒ½ä¼šå°†æ•°æ®å†™å…¥æ–‡ä»¶åˆ°<code>mlruns</code>ç›®å½•ä¸­ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥è¿è¡ŒMLflowçš„è·Ÿè¸ªUIï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow ui</span><br></pre></td></tr></table></figure></p>
<p>ä¸ºä¿è¯å¤–ç½‘èƒ½å¤Ÿè®¿é—®ï¼Œéœ€æ·»åŠ hostå‘½ä»¤ï¼Œå³ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow ui -h 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„å‘½ä»¤åŠŸèƒ½è¯·ç›´æ¥æ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow ui --help</span><br></pre></td></tr></table></figure>
<p><a name="1a0ff95a"></a></p>
<h2 id="è¿è¡ŒMLflowé¡¹ç›®"><a href="#è¿è¡ŒMLflowé¡¹ç›®" class="headerlink" title="è¿è¡ŒMLflowé¡¹ç›®"></a>è¿è¡ŒMLflowé¡¹ç›®<a href="https://mlflow.org/docs/latest/quickstart.html#running-mlflow-projects" target="_blank" rel="noopener"></a></h2><p>MLflowå…è®¸æ‚¨å°†ä»£ç åŠå…¶ä¾èµ–é¡¹æ‰“åŒ…ä¸ºä¸€ä¸ªå¯ä»¥åœ¨å…¶ä»–æ•°æ®ä¸Šä»¥å¯é‡ç°çš„æ–¹å¼è¿è¡Œçš„_é¡¹ç›®_ã€‚æ¯ä¸ªé¡¹ç›®éƒ½åŒ…å«å…¶ä»£ç å’Œ<code>MLproject</code>å®šä¹‰å…¶ä¾èµ–é¡¹çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼ŒPythonç¯å¢ƒï¼‰ï¼Œä»¥åŠå¯ä»¥åœ¨é¡¹ç›®ä¸­è¿è¡Œçš„å‘½ä»¤ä»¥åŠå®ƒä»¬é‡‡ç”¨çš„å‚æ•°ã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤è½»æ¾è¿è¡Œç°æœ‰é¡¹ç›®ï¼Œè¯¥å‘½ä»¤ä»æœ¬åœ°ç›®å½•æˆ–GitHub URIè¿è¡Œé¡¹ç›®ï¼š<code>mlflow run</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mlflow run tutorial -P alpha=0.5</span><br><span class="line"></span><br><span class="line">mlflow run git@github.com:mlflow/mlflow-example.git -P alpha=5</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®<code>tutorial</code>ï¼ŒåŒ…æ‹¬ä¸€ä¸ª<code>MLproject</code>æŒ‡å®šå…¶ä¾èµ–é¡¹çš„æ–‡ä»¶ã€‚å¦‚æœæ‚¨å°šæœªé…ç½®<a href="https://mlflow.org/docs/latest/tracking.html#tracking-server" target="_blank" rel="noopener">è·Ÿè¸ªæœåŠ¡å™¨</a>ï¼Œåˆ™é¡¹ç›®ä¼šå°†å…¶Tracking APIæ•°æ®è®°å½•åœ¨æœ¬åœ°<code>mlruns</code>ç›®å½•ä¸­ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›è¿è¡Œæ¥æŸ¥çœ‹è¿™äº›è¿è¡Œã€‚<code>mlflow ui</code></p>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨<a href="https://conda.io/" target="_blank" rel="noopener">conda</a>å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹ã€‚è¦åœ¨ä¸ä½¿ç”¨çš„æƒ…å†µä¸‹è¿è¡Œé¡¹ç›®ï¼Œå¯ä»¥æä¾›é€‰é¡¹ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»ç¡®ä¿å·²åœ¨Pythonç¯å¢ƒä¸­å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ã€‚<code>mlflow run`</code>â€“no-conda`</p>
</blockquote>
<p><a name="b7824d5c"></a></p>
<h1 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h1><p>æœ¬æ•™ç¨‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨MLflowç«¯åˆ°ç«¯ï¼š</p>
<ul>
<li>è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹</li>
<li>æ‰“åŒ…ä»¥å¯é‡ç”¨ä¸”å¯é‡ç°çš„æ¨¡å‹æ ¼å¼è®­ç»ƒæ¨¡å‹çš„ä»£ç </li>
<li>å°†æ¨¡å‹éƒ¨ç½²åˆ°ä¸€ä¸ªç®€å•çš„HTTPæœåŠ¡å™¨ä¸­ï¼Œä½¿æ‚¨èƒ½å¤Ÿå¯¹é¢„æµ‹è¿›è¡Œè¯„åˆ†</li>
</ul>
<p>æœ¬æ•™ç¨‹ä½¿ç”¨æ•°æ®é›†æ ¹æ®è‘¡è„é…’çš„â€œå›ºå®šé…¸åº¦â€ï¼Œâ€œpHå€¼â€ï¼Œâ€œæ®‹ç³–â€ç­‰å®šé‡ç‰¹å¾é¢„æµ‹è‘¡è„é…’çš„è´¨é‡ã€‚è¯¥æ•°æ®é›†æ¥è‡ªUCIçš„<a href="http://archive.ics.uci.edu/ml/datasets/Wine+Quality" target="_blank" rel="noopener">æœºå™¨å­¦ä¹ åº“</a>ã€‚ <a href="https://mlflow.org/docs/latest/tutorial.html#id4" target="_blank" rel="noopener">[1]</a><br>ç›®å½•</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/tutorial.html#what-you-ll-need" target="_blank" rel="noopener">ä½ éœ€è¦ä»€ä¹ˆ</a></li>
<li><a href="https://mlflow.org/docs/latest/tutorial.html#training-the-model" target="_blank" rel="noopener">åŸ¹è®­æ¨¡å‹</a></li>
<li><a href="https://mlflow.org/docs/latest/tutorial.html#comparing-the-models" target="_blank" rel="noopener">æ¯”è¾ƒæ¨¡å‹</a></li>
<li><a href="https://mlflow.org/docs/latest/tutorial.html#packaging-the-training-code" target="_blank" rel="noopener">æ‰“åŒ…åŸ¹è®­ä»£ç </a></li>
<li><a href="https://mlflow.org/docs/latest/tutorial.html#serving-the-model" target="_blank" rel="noopener">æœåŠ¡æ¨¡å‹</a></li>
<li><p><a href="https://mlflow.org/docs/latest/tutorial.html#more-resources" target="_blank" rel="noopener">æ›´å¤šèµ„æº</a><br><a name="60691d91"></a></p>
<h2 id="ä½ éœ€è¦ä»€ä¹ˆ"><a href="#ä½ éœ€è¦ä»€ä¹ˆ" class="headerlink" title="ä½ éœ€è¦ä»€ä¹ˆ"></a><a href="https://mlflow.org/docs/latest/tutorial.html#id5" target="_blank" rel="noopener">ä½ éœ€è¦ä»€ä¹ˆ</a><a href="https://mlflow.org/docs/latest/tutorial.html#what-you-ll-need" target="_blank" rel="noopener"></a></h2><p>è¦è¿è¡Œæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦ï¼š</p>
</li>
<li><p>å®‰è£…MLflowï¼ˆé€šè¿‡ï¼‰<code>pip install mlflow</code></p>
</li>
<li>å®‰è£…<a href="https://conda.io/docs/user-guide/install/index.html#" target="_blank" rel="noopener">conda</a></li>
<li>å…‹éš†ï¼ˆä¸‹è½½ï¼‰MLflowå­˜å‚¨åº“ <code>git clone https://github.com/mlflow/mlflow</code></li>
<li><code>cd</code>è¿›å…¥<code>examples</code>ä½ çš„MLflowå…‹éš†ç›®å½• - æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªå·¥ä½œç›®å½•æ¥è¿è¡Œæ•™ç¨‹ã€‚æˆ‘ä»¬é¿å…ç›´æ¥ä»æˆ‘ä»¬çš„MLflowå…‹éš†ä¸­è¿è¡Œï¼Œå› ä¸ºè¿™æ ·åšä¼šå¯¼è‡´æ•™ç¨‹ä»æºä»£ç ä¸­ä½¿ç”¨MLflowï¼Œè€Œä¸æ˜¯ä½¿ç”¨MLflowçš„PyPIå®‰è£…ã€‚<br><a name="a162534b"></a><h2 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒ<a href="https://mlflow.org/docs/latest/tutorial.html#id6" target="_blank" rel="noopener">æ¨¡å‹</a></h2>é¦–å…ˆï¼Œè®­ç»ƒä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªè¶…å‚æ•°çš„çº¿æ€§å›å½’æ¨¡å‹ï¼š<code>alpha</code>å’Œ<code>l1_ratio</code>ã€‚</li>
</ul>
<p>ä»£ç ä½äºä»¥ä¸‹<code>examples/sklearn_elasticnet_wine/train.py</code>å¹¶åœ¨ä¸‹é¢å¤åˆ¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The data set used in this example is from http://archive.ics.uci.edu/ml/datasets/Wine+Quality</span></span><br><span class="line"><span class="comment"># P. Cortez, A. Cerdeira, F. Almeida, T. Matos and J. Reis.</span></span><br><span class="line"><span class="comment"># Modeling wine preferences by data mining from physicochemical properties. In Decision Support Systems, Elsevier, 47(4):547-553, 2009.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, mean_absolute_error, r2_score</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> ElasticNet</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mlflow</span><br><span class="line"><span class="keyword">import</span> mlflow.sklearn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eval_metrics</span><span class="params">(actual, pred)</span>:</span></span><br><span class="line">    rmse = np.sqrt(mean_squared_error(actual, pred))</span><br><span class="line">    mae = mean_absolute_error(actual, pred)</span><br><span class="line">    r2 = r2_score(actual, pred)</span><br><span class="line">    <span class="keyword">return</span> rmse, mae, r2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    warnings.filterwarnings(<span class="string">"ignore"</span>)</span><br><span class="line">    np.random.seed(<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Read the wine-quality csv file (make sure you're running this from the root of MLflow!)</span></span><br><span class="line">    wine_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), <span class="string">"wine-quality.csv"</span>)</span><br><span class="line">    data = pd.read_csv(wine_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Split the data into training and test sets. (0.75, 0.25) split.</span></span><br><span class="line">    train, test = train_test_split(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># The predicted column is "quality" which is a scalar from [3, 9]</span></span><br><span class="line">    train_x = train.drop([<span class="string">"quality"</span>], axis=<span class="number">1</span>)</span><br><span class="line">    test_x = test.drop([<span class="string">"quality"</span>], axis=<span class="number">1</span>)</span><br><span class="line">    train_y = train[[<span class="string">"quality"</span>]]</span><br><span class="line">    test_y = test[[<span class="string">"quality"</span>]]</span><br><span class="line"></span><br><span class="line">    alpha = float(sys.argv[<span class="number">1</span>]) <span class="keyword">if</span> len(sys.argv) &gt; <span class="number">1</span> <span class="keyword">else</span> <span class="number">0.5</span></span><br><span class="line">    l1_ratio = float(sys.argv[<span class="number">2</span>]) <span class="keyword">if</span> len(sys.argv) &gt; <span class="number">2</span> <span class="keyword">else</span> <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> mlflow.start_run():</span><br><span class="line">        lr = ElasticNet(alpha=alpha, l1_ratio=l1_ratio, random_state=<span class="number">42</span>)</span><br><span class="line">        lr.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line">        predicted_qualities = lr.predict(test_x)</span><br><span class="line"></span><br><span class="line">        (rmse, mae, r2) = eval_metrics(test_y, predicted_qualities)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">"Elasticnet model (alpha=%f, l1_ratio=%f):"</span> % (alpha, l1_ratio))</span><br><span class="line">        print(<span class="string">"  RMSE: %s"</span> % rmse)</span><br><span class="line">        print(<span class="string">"  MAE: %s"</span> % mae)</span><br><span class="line">        print(<span class="string">"  R2: %s"</span> % r2)</span><br><span class="line"></span><br><span class="line">        mlflow.log_param(<span class="string">"alpha"</span>, alpha)</span><br><span class="line">        mlflow.log_param(<span class="string">"l1_ratio"</span>, l1_ratio)</span><br><span class="line">        mlflow.log_metric(<span class="string">"rmse"</span>, rmse)</span><br><span class="line">        mlflow.log_metric(<span class="string">"r2"</span>, r2)</span><br><span class="line">        mlflow.log_metric(<span class="string">"mae"</span>, mae)</span><br><span class="line"></span><br><span class="line">        mlflow.sklearn.log_model(lr, <span class="string">"model"</span>)</span><br></pre></td></tr></table></figure>
<p>æ­¤ç¤ºä¾‹ä½¿ç”¨ç†Ÿæ‚‰çš„pandasï¼Œnumpyå’Œsklearn APIæ¥åˆ›å»ºç®€å•çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚è¯¥<a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener">MLflowè·Ÿè¸ªçš„API</a>è®°å½•æœ‰å…³æ¯æ¬¡è®­ç»ƒè¿è¡Œä¿¡æ¯ï¼Œå¦‚è¶…å‚æ•°<code>alpha</code>å’Œ<code>l1_ratio</code>ï¼Œç”¨äºè®­ç»ƒæ¨¡å‹å’ŒæŒ‡æ ‡ï¼Œå¦‚å‡æ–¹æ ¹è¯¯å·®ï¼Œç”¨æ¥è¯„ä¼°æ¨¡å‹ã€‚è¯¥ç¤ºä¾‹è¿˜ä»¥MLflowçŸ¥é“å¦‚ä½•éƒ¨ç½²çš„æ ¼å¼åºåˆ—åŒ–æ¨¡å‹ã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨é»˜è®¤è¶…å‚æ•°è¿è¡Œç¤ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python  examples/sklearn_elasticnet_wine/train.PY</span><br></pre></td></tr></table></figure>
<p>å°è¯•ä¸€äº›å…¶ä»–çš„å€¼<code>alpha</code>ï¼Œå¹¶<code>l1_ratio</code>é€šè¿‡å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ å…¥<code>train.py</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python examples/sklearn_elasticnet_wine/train.py &lt;alpha&gt; &lt;l1_ratio&gt;</span><br></pre></td></tr></table></figure>
<p>æ¯æ¬¡è¿è¡Œè¯¥ç¤ºä¾‹æ—¶ï¼ŒMLflowéƒ½ä¼šåœ¨ç›®å½•ä¸­è®°å½•æœ‰å…³å®éªŒè¿è¡Œçš„ä¿¡æ¯<code>mlruns</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„<br>å¦‚æœæ‚¨æƒ³ä½¿ç”¨Jupyterç¬”è®°æœ¬ç‰ˆæœ¬<code>train.py</code>ï¼Œè¯·å°è¯•ä½¿ç”¨æ•™ç¨‹ç¬”è®°æœ¬<code>examples/sklearn_elasticnet_wine/train.ipynb</code>ã€‚</p>
</blockquote>
<p><a name="9fe72089"></a></p>
<h2 id="æ¯”è¾ƒæ¨¡å‹"><a href="#æ¯”è¾ƒæ¨¡å‹" class="headerlink" title="æ¯”è¾ƒæ¨¡å‹"></a><a href="https://mlflow.org/docs/latest/tutorial.html#id7" target="_blank" rel="noopener">æ¯”è¾ƒæ¨¡å‹</a></h2><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨MLflow UIæ¯”è¾ƒæ‚¨ç”Ÿæˆçš„æ¨¡å‹ã€‚åœ¨ä¸åŒ…å«<code>mlruns</code>è¿è¡Œçš„ç›®å½•ç›¸åŒçš„å½“å‰å·¥ä½œç›®å½•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow ui -h 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤é¡µé¢ä¸Šï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®éªŒè¿è¡Œåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«å¯ç”¨äºæ¯”è¾ƒæ¨¡å‹çš„æŒ‡æ ‡ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552619383275-64d84bcf-39a4-48a9-b35c-64a3282025bf.png#align=left&amp;display=inline&amp;height=367&amp;originHeight=527&amp;originWidth=1070&amp;size=0&amp;status=done&amp;width=746" alt></p>
<p><a name="05c86809"></a></p>
<h2 id="æ‰“åŒ…åŸ¹è®­ä»£ç "><a href="#æ‰“åŒ…åŸ¹è®­ä»£ç " class="headerlink" title="æ‰“åŒ…åŸ¹è®­ä»£ç "></a><a href="https://mlflow.org/docs/latest/tutorial.html#id8" target="_blank" rel="noopener">æ‰“åŒ…åŸ¹è®­ä»£ç </a><a href="https://mlflow.org/docs/latest/tutorial.html#packaging-the-training-code" target="_blank" rel="noopener"></a></h2><p>ç°åœ¨æ‚¨å·²ç»æ‹¥æœ‰äº†åŸ¹è®­ä»£ç ï¼Œæ‚¨å¯ä»¥å¯¹å…¶è¿›è¡Œæ‰“åŒ…ï¼Œä»¥ä¾¿å…¶ä»–æ•°æ®ç§‘å­¦å®¶å¯ä»¥è½»æ¾åœ°é‡å¤ä½¿ç”¨è¯¥æ¨¡å‹ï¼Œæˆ–è€…æ‚¨å¯ä»¥è¿œç¨‹è¿è¡ŒåŸ¹è®­ï¼Œä¾‹å¦‚åœ¨Databricksä¸Šã€‚</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨<a href="https://mlflow.org/docs/latest/projects.html" target="_blank" rel="noopener">MLflow Projects</a>çº¦å®šæ¥æŒ‡å®šä»£ç çš„ä¾èµ–å…³ç³»å’Œå…¥å£ç‚¹ã€‚è¯¥<code>tutorial/MLproject</code>æ–‡ä»¶æŒ‡å®šé¡¹ç›®å…·æœ‰ä½äº è¢«è°ƒç”¨çš„<a href="https://conda.io/docs/user-guide/tasks/manage-environments.html#creating-an-environment-file-manually" target="_blank" rel="noopener">Condaç¯å¢ƒæ–‡ä»¶ä¸­</a>çš„ä¾èµ–<code>conda.yaml</code>é¡¹ï¼Œå¹¶ä¸”å…·æœ‰ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å…¥å£ç‚¹ï¼š<code>alpha</code>å’Œ<code>l1_ratio</code>ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tutorial/MLproject</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">tutorial</span></span><br><span class="line"></span><br><span class="line"><span class="attr">conda_env:</span> <span class="string">conda.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">entry_points:</span></span><br><span class="line"><span class="attr">  main:</span></span><br><span class="line"><span class="attr">    parameters:</span></span><br><span class="line"><span class="attr">      alpha:</span> <span class="string">float</span></span><br><span class="line"><span class="attr">      l1_ratio:</span> <span class="string">&#123;type:</span> <span class="string">float,</span> <span class="attr">default:</span> <span class="number">0.1</span><span class="string">&#125;</span></span><br><span class="line"><span class="attr">    command:</span> <span class="string">"python train.py &#123;alpha&#125; &#123;l1_ratio&#125;"</span></span><br></pre></td></tr></table></figure>
<p>Condaæ–‡ä»¶ä¾èµ–é¡¹</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tutorial/conda.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">tutorial</span></span><br><span class="line"><span class="attr">channels:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">defaults</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">numpy=1.14.3</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">pandas=0.22.0</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">scikit-learn=0.19.1</span></span><br><span class="line"><span class="attr">  - pip:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">mlflow</span></span><br></pre></td></tr></table></figure>
<p>è¦è¿è¡Œæ­¤é¡¹ç›®ï¼Œè¯·è°ƒç”¨<code>mlflow run tutorial -P alpha=0.42</code><br>å¦‚æœå­˜å‚¨åº“<code>MLproject</code>åœ¨æ ¹ç›®å½•ä¸­æœ‰æ–‡ä»¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»GitHubè¿è¡Œé¡¹ç›®ã€‚æœ¬æ•™ç¨‹åœ¨æ‚¨å¯ä»¥è¿è¡Œçš„ã€‚è¿è¡Œæ­¤å‘½ä»¤åï¼ŒMLflowå°†åœ¨å…·æœ‰æŒ‡å®šä¾èµ–å…³ç³»çš„æ–°Condaç¯å¢ƒä¸­è¿è¡Œæ‚¨çš„è®­ç»ƒä»£ç ã€‚<a href="https://github.com/mlflow/mlflow-example" target="_blank" rel="noopener">https://github.com/mlflow/mlflow-example</a>å­˜å‚¨åº“ä¸­é‡å¤ã€‚<code>mlflow run git@github.com:mlflow/mlflow-example.git -P alpha=0.42</code></p>
<p><a name="146d11ee"></a></p>
<h2 id="æœåŠ¡æ¨¡å‹"><a href="#æœåŠ¡æ¨¡å‹" class="headerlink" title="æœåŠ¡æ¨¡å‹"></a><a href="https://mlflow.org/docs/latest/tutorial.html#id9" target="_blank" rel="noopener">æœåŠ¡æ¨¡å‹</a><a href="https://mlflow.org/docs/latest/tutorial.html#serving-the-model" target="_blank" rel="noopener"></a></h2><p>ç°åœ¨æ‚¨å·²ä½¿ç”¨MLprojectçº¦å®šæ‰“åŒ…æ¨¡å‹å¹¶ç¡®å®šäº†æœ€ä½³æ¨¡å‹ï¼Œç°åœ¨æ˜¯æ—¶å€™ä½¿ç”¨<a href="https://mlflow.org/docs/latest/models.html" target="_blank" rel="noopener">MLflowæ¨¡å‹</a>éƒ¨ç½²<a href="https://mlflow.org/docs/latest/models.html" target="_blank" rel="noopener">æ¨¡å‹äº†</a>ã€‚MLflowæ¨¡å‹æ˜¯ç”¨äºæ‰“åŒ…æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ ‡å‡†æ ¼å¼ï¼Œå¯ç”¨äºå„ç§ä¸‹æ¸¸å·¥å…· - ä¾‹å¦‚ï¼Œé€šè¿‡REST APIå®æ—¶æä¾›æœåŠ¡æˆ–åœ¨Apache Sparkä¸Šè¿›è¡Œæ‰¹é‡æ¨æ–­ã€‚<br>åœ¨ç¤ºä¾‹è®­ç»ƒä»£ç ä¸­ï¼Œåœ¨è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹ä¹‹åï¼ŒMLflowä¸­çš„å‡½æ•°å°†æ¨¡å‹ä¿å­˜ä¸ºè¿è¡Œä¸­çš„å·¥ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow.sklearn.log_model(lr, <span class="string">"model"</span>)</span><br></pre></td></tr></table></figure>
<p>è¦æŸ¥çœ‹æ­¤å·¥ä»¶ï¼Œæ‚¨å¯ä»¥å†æ¬¡ä½¿ç”¨UIã€‚å½“æ‚¨å•å‡»å®éªŒè¿è¡Œåˆ—è¡¨ä¸­çš„æ—¥æœŸæ—¶ï¼Œæ‚¨å°†çœ‹åˆ°æ­¤é¡µé¢ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552619764349-39a712fe-a675-4e68-8258-fcfec15858f3.png#align=left&amp;display=inline&amp;height=901&amp;originHeight=1333&amp;originWidth=1104&amp;size=0&amp;status=done&amp;width=746" alt>åœ¨åº•éƒ¨ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°è°ƒç”¨<code>mlflow.sklearn.log_model</code>ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶<code>/Users/mlflow/mlflow-prototype/mlruns/0/7c1a0d5c42844dcdb8f5191146925174/artifacts/model</code>ã€‚ç¬¬ä¸€ä¸ªæ–‡ä»¶<code>MLmodel</code>æ˜¯ä¸€ä¸ªå…ƒæ•°æ®æ–‡ä»¶ï¼Œå‘Šè¯‰MLflowå¦‚ä½•åŠ è½½æ¨¡å‹ã€‚ç¬¬äºŒä¸ªæ–‡ä»¶<code>model.pkl</code>æ˜¯æ‚¨è®­ç»ƒçš„çº¿æ€§å›å½’æ¨¡å‹çš„åºåˆ—åŒ–ç‰ˆæœ¬ã€‚<br>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥å°†æ­¤MLmodelæ ¼å¼ä¸MLflowä¸€èµ·ä½¿ç”¨ï¼Œä»¥éƒ¨ç½²å¯ä»¥æä¾›é¢„æµ‹çš„æœ¬åœ°RESTæœåŠ¡å™¨ã€‚<br>è¦éƒ¨ç½²æœåŠ¡å™¨ï¼Œè¯·è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mlflow pyfunc serve /Users/mlflow/mlflow-prototype/mlruns/0/7c1a0d5c42844dcdb8f5191146925174/artifacts/model -p 1234</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„<br>ç”¨äºåˆ›å»ºæ¨¡å‹çš„Pythonç‰ˆæœ¬å¿…é¡»ä¸è¿è¡Œçš„ç‰ˆæœ¬ç›¸åŒã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°é”™è¯¯ æˆ–ã€‚<code>mlflow sklearn`</code>UnicodeDecodeError: â€˜asciiâ€™ codec canâ€™t decode byte 0x9f in position 1: ordinal not in range(128)<code></code>raise ValueError, â€œunsupported pickle protocol: %dâ€`</p>
</blockquote>
<p>éƒ¨ç½²æœåŠ¡å™¨åï¼Œæ‚¨å¯ä»¥ä¼ é€’ä¸€äº›ç¤ºä¾‹æ•°æ®å¹¶æŸ¥çœ‹é¢„æµ‹ã€‚ä»¥ä¸‹ç¤ºä¾‹ç”¨äº<code>curl</code>å‘<code>split</code>pyfuncæœåŠ¡å™¨å‘é€å¸¦æœ‰æ–¹å‘çš„JSONåºåˆ—åŒ–pandas DataFrame ã€‚æœ‰å…³pyfuncæ¨¡å‹æœåŠ¡å™¨æ¥å—çš„è¾“å…¥æ•°æ®æ ¼å¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://mlflow.org/docs/latest/models.html#pyfunc-deployment" target="_blank" rel="noopener">MLflowéƒ¨ç½²å·¥å…·æ–‡æ¡£</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H &quot;Content-Type:application/json; format=pandas-split&quot; --data &apos;&#123;&quot;columns&quot;:[&quot;alcohol&quot;, &quot;chlorides&quot;, &quot;citric acid&quot;, &quot;density&quot;, &quot;fixed acidity&quot;, &quot;free sulfur dioxide&quot;, &quot;pH&quot;, &quot;residual sugar&quot;, &quot;sulphates&quot;, &quot;total sulfur dioxide&quot;, &quot;volatile acidity&quot;],&quot;data&quot;:[[12.8, 0.029, 0.48, 0.98, 6.2, 29, 3.33, 1.2, 0.39, 75, 0.66]]&#125;&apos; http://127.0.0.1:1234/invocations</span><br></pre></td></tr></table></figure>
<p>æœåŠ¡å™¨åº”è¯¥å“åº”è¾“å‡ºç±»ä¼¼äºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;predictions&quot;: [6.379428821398614]&#125;</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/03/15/yuque/Mlflowä»‹ç»/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/31/yuque/æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ/">æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</a>
    </h1>
  

        
        <a href="/2019/01/31/yuque/æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ/" class="archive-article-date">
  	<time datetime="2019-01-31T10:12:24.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-01-31</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a name="b4699b6e"></a></p>
<h1 id="æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ"><a href="#æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ"></a>æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h1><p><a href="https://medium.com/@jonathan_hui" target="_blank" rel="noopener">ä¹”çº³æ£®æƒ </a>ä»¥ä¸‹<br>2018å¹´3æœˆ28æ—¥<br>åœ¨æœ¬ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬å°†å…¨é¢ä»‹ç»ç‰©ä½“æ£€æµ‹ã€‚åœ¨è¿™é‡Œçš„ç¬¬1éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ŒåŒ…æ‹¬å¿«é€ŸR-CNNï¼Œæ›´å¿«çš„R-CNNï¼ŒR-FCNå’ŒFPNã€‚åœ¨ç¬¬2éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å•å°„å‡»æ¢æµ‹å™¨ã€‚åœ¨ç¬¬3éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æ€§èƒ½å’Œä¸€äº›å®ç°é—®é¢˜ã€‚é€šè¿‡åœ¨ä¸€ä¸ªç¯å¢ƒä¸­ç ”ç©¶å®ƒä»¬ï¼Œæˆ‘ä»¬ç ”ç©¶ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„ï¼Œä»€ä¹ˆæ˜¯é‡è¦çš„ï¼Œå“ªäº›å¯ä»¥æ”¹è¿›ã€‚å¸Œæœ›é€šè¿‡ç ”ç©¶æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾è¿™é‡Œï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬æä¾›æ›´å¤šå…³äºæˆ‘ä»¬å‰è¿›æ–¹å‘çš„è§è§£ã€‚<br><a href="https://medium.com/@jonathan_hui/what-do-we-learn-from-region-based-object-detectors-faster-r-cnn-r-fcn-fpn-7e354377a7c9" target="_blank" rel="noopener">ç¬¬1éƒ¨åˆ†</a>ï¼šæˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ<br><a href="https://medium.com/@jonathan_hui/what-do-we-learn-from-single-shot-object-detectors-ssd-yolo-fpn-focal-loss-3888677c5f4d" target="_blank" rel="noopener">ç¬¬2éƒ¨åˆ†</a>ï¼šæˆ‘ä»¬ä»å•å‘ç‰©ä½“æ¢æµ‹å™¨ï¼ˆSSDï¼ŒYOLOï¼‰ï¼ŒFPNå’Œç„¦ç‚¹æŸè€—ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ<br><a href="https://medium.com/@jonathan_hui/design-choices-lessons-learned-and-trends-for-object-detections-4f48b59ec5ff" target="_blank" rel="noopener">ç¬¬3éƒ¨åˆ†</a>ï¼šè®¾è®¡é€‰æ‹©ï¼Œç»éªŒæ•™è®­å’Œå¯¹è±¡æ£€æµ‹è¶‹åŠ¿ï¼Ÿ<br><a name="43bb065b"></a></p>
<h3 id="æ»‘åŠ¨çª—å£æ¢æµ‹å™¨"><a href="#æ»‘åŠ¨çª—å£æ¢æµ‹å™¨" class="headerlink" title="æ»‘åŠ¨çª—å£æ¢æµ‹å™¨"></a><strong>æ»‘åŠ¨çª—å£æ¢æµ‹å™¨</strong></h3><p>è‡ªAlexNetèµ¢å¾—2012å¹´ILSVRCæŒ‘æˆ˜ä»¥æ¥ï¼Œä½¿ç”¨CNNè¿›è¡Œåˆ†ç±»å·²ç»å æ®äº†è¯¥é¢†åŸŸçš„ä¸»å¯¼åœ°ä½ã€‚ç”¨äºç‰©ä½“æ£€æµ‹çš„ä¸€ç§è›®åŠ›æ–¹æ³•æ˜¯ä»å·¦ä¾§å’Œå³ä¾§ä»¥åŠä»ä¸Šåˆ°ä¸‹æ»‘åŠ¨çª—å£ä»¥ä½¿ç”¨åˆ†ç±»æ¥è¯†åˆ«ç‰©ä½“ã€‚ä¸ºäº†åœ¨ä¸åŒçš„è§‚å¯Ÿè·ç¦»æ£€æµ‹ä¸åŒçš„ç‰©ä½“ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸åŒå°ºå¯¸å’Œçºµæ¨ªæ¯”çš„çª—æˆ·ã€‚</p>
<p>æ»‘åŠ¨çª—ï¼ˆä»å³åˆ°å·¦ï¼Œä¸Šä¸‹ï¼‰<br>æˆ‘ä»¬æ ¹æ®æ»‘åŠ¨çª—å£ä»å›¾ç‰‡ä¸­å‰ªåˆ‡å‡ºè¡¥ä¸ã€‚ç”±äºè®¸å¤šåˆ†ç±»å™¨ä»…é‡‡ç”¨å›ºå®šå¤§å°çš„å›¾åƒï¼Œå› æ­¤ä¿®è¡¥ç¨‹åºä¼šå‘ç”Ÿæ‰­æ›²ã€‚ç„¶è€Œï¼Œè¿™ä¸åº”è¯¥å½±å“åˆ†ç±»å‡†ç¡®æ€§ï¼Œå› ä¸ºåˆ†ç±»å™¨è¢«è®­ç»ƒä»¥å¤„ç†å˜å½¢å›¾åƒã€‚</p>
<p>å°†å›¾åƒå˜å½¢ä¸ºå›ºå®šå¤§å°çš„å›¾åƒã€‚<br>å°†æ‰­æ›²çš„å›¾åƒå—é¦ˆé€åˆ°CNNåˆ†ç±»å™¨ä¸­ä»¥æå–4096ä¸ªç‰¹å¾ã€‚ç„¶åæˆ‘ä»¬åº”ç”¨SVMåˆ†ç±»å™¨æ¥è¯†åˆ«ç±»å’Œè¾¹ç•Œæ¡†çš„å¦ä¸€ä¸ªçº¿æ€§å›å½’é‡ã€‚</p>
<p>æ»‘åŠ¨çª—æ£€æµ‹å™¨çš„ç³»ç»Ÿæµç¨‹ã€‚<br>ä¸‹é¢æ˜¯ä¼ªä»£ç ã€‚æˆ‘ä»¬åˆ›å»ºäº†è®¸å¤šçª—å£æ¥æ£€æµ‹ä¸åŒä½ç½®çš„ä¸åŒå¯¹è±¡å½¢çŠ¶ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¸€ä¸ªæ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆæ˜¯å‡å°‘_çª—å£_æ•°é‡ã€‚<br>çª—å£ä¸­çš„çª—å£<br>    patch = get_patchï¼ˆå›¾åƒï¼Œçª—å£ï¼‰<br>    ç»“æœ=æ£€æµ‹å™¨ï¼ˆè¡¥ä¸ï¼‰<a name="68696ce0"></a></p>
<h3 id="é€‰æ‹©æ€§æœç´¢"><a href="#é€‰æ‹©æ€§æœç´¢" class="headerlink" title="é€‰æ‹©æ€§æœç´¢"></a>é€‰æ‹©æ€§æœç´¢</h3><p>æˆ‘ä»¬ä½¿ç”¨åŒºåŸŸæè®®æ–¹æ³•æ¥åˆ›å»ºç”¨äºå¯¹è±¡æ£€æµ‹çš„<strong>æ„Ÿå…´è¶£åŒºåŸŸï¼ˆROIï¼‰</strong>ï¼Œè€Œä¸æ˜¯å¼ºåŠ›æ–¹æ³•ã€‚åœ¨<strong>é€‰æ‹©æ€§æœç´¢</strong>ï¼ˆ<strong>SS</strong>ï¼‰ä¸­ï¼Œæˆ‘ä»¬ä»æ¯ä¸ªå•ç‹¬çš„åƒç´ å¼€å§‹ä½œä¸ºå…¶è‡ªå·±çš„ç»„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¡ç®—æ¯ä¸ªç»„çš„çº¹ç†ï¼Œå¹¶ç»„åˆä¸¤ä¸ªæœ€æ¥è¿‘çš„ç»„ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å•ä¸ªåŒºåŸŸåå™¬å…¶ä»–åŒºåŸŸï¼Œæˆ‘ä»¬æ›´å–œæ¬¢å…ˆå°†è¾ƒå°çš„ç»„åˆ†ç»„ã€‚æˆ‘ä»¬ç»§ç»­åˆå¹¶åŒºåŸŸï¼Œç›´åˆ°æ‰€æœ‰å†…å®¹ç»„åˆåœ¨ä¸€èµ·ã€‚åœ¨ä¸‹é¢çš„ç¬¬ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•å¢é•¿åŒºåŸŸï¼Œç¬¬äºŒè¡Œä¸­çš„è“è‰²çŸ©å½¢æ˜¾ç¤ºäº†æˆ‘ä»¬åœ¨åˆå¹¶æœŸé—´å¯èƒ½å®ç°çš„ROIã€‚</p>
<p>ï¼ˆå›¾ç‰‡æ¥æºï¼švan de Sandeç­‰ï¼ŒICCVâ€™11ï¼‰<br><a name="R-CNN"></a></p>
<h3 id="R-CNN"><a href="#R-CNN" class="headerlink" title="R-CNN"></a>R-CNN</h3><p>R-CNNåˆ©ç”¨åŒºåŸŸæè®®æ–¹æ³•æ¥åˆ›å»ºå¤§çº¦2000ä¸ª<strong>ROI</strong>ï¼ˆ<strong>æ„Ÿå…´è¶£</strong>çš„åŒºåŸŸï¼‰ã€‚åŒºåŸŸè¢«æ‰­æ›²æˆå›ºå®šå¤§å°çš„å›¾åƒå¹¶å•ç‹¬é¦ˆé€åˆ°CNNç½‘ç»œã€‚ç„¶åæ˜¯å®Œå…¨è¿æ¥çš„å±‚ï¼Œä»¥å¯¹å¯¹è±¡è¿›è¡Œåˆ†ç±»å¹¶ç»†åŒ–è¾¹ç•Œæ¡†ã€‚</p>
<p>ä½¿ç”¨åŒºåŸŸæè®®ï¼ŒCNNï¼Œä»¿å°„å±‚æ¥å®šä½å¯¹è±¡ã€‚<br>è¿™æ˜¯ç³»ç»Ÿæµç¨‹ã€‚</p>
<p>R-CNNçš„ç³»ç»Ÿæµç¨‹<br>R-CNNçš„æŠ•èµ„å›æŠ¥ç‡ä½å¾—å¤šä½†è´¨é‡æ›´é«˜ï¼Œæ¯”æ»‘åŠ¨çª—æ›´å¿«ï¼Œæ›´å‡†ç¡®ã€‚<br>æŠ•èµ„å›æŠ¥ç‡= <br>ROIä¸­æŠ•èµ„å›æŠ¥ç‡çš„åŒºåŸŸæç¤ºï¼ˆå›¾åƒï¼‰<br>    è¡¥ä¸= get_patchï¼ˆå›¾åƒï¼ŒæŠ•èµ„å›æŠ¥ç‡ï¼‰<br>    ç»“æœ=æ£€æµ‹å™¨ï¼ˆè¡¥ä¸ï¼‰<a name="9d7dcb56"></a></p>
<h4 id="è¾¹ç•Œæ¡†å›å½’é‡"><a href="#è¾¹ç•Œæ¡†å›å½’é‡" class="headerlink" title="è¾¹ç•Œæ¡†å›å½’é‡"></a>è¾¹ç•Œæ¡†å›å½’é‡</h4><p>åŒºåŸŸææ¡ˆæ–¹æ³•è®¡ç®—å¯†é›†ã€‚ä¸ºäº†åŠ å¿«è¿™ä¸€è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç»å¸¸é€‰æ‹©ä¸€ç§è¾ƒä¾¿å®œçš„åŒºåŸŸå»ºè®®æ–¹æ³•æ¥åˆ›å»ºROIï¼Œç„¶åä½¿ç”¨çº¿æ€§å›å½’é‡ï¼ˆä½¿ç”¨å®Œå…¨è¿æ¥çš„å±‚ï¼‰è¿›ä¸€æ­¥ç»†åŒ–è¾¹ç•Œæ¡†ã€‚</p>
<p>ä½¿ç”¨å›å½’å°†åŸå§‹ROIä»è“è‰²ç»†åŒ–ä¸ºçº¢è‰²ã€‚<br><a name="02b68898"></a></p>
<h3 id="å¿«é€ŸR-CNN"><a href="#å¿«é€ŸR-CNN" class="headerlink" title="å¿«é€ŸR-CNN"></a>å¿«é€ŸR-CNN</h3><p>R-CNNéœ€è¦è®¸å¤šæè®®å‡†ç¡®å¹¶ä¸”è®¸å¤šåŒºåŸŸå½¼æ­¤é‡å ã€‚<strong>R-CNNçš„è®­ç»ƒå’Œæ¨ç†é€Ÿåº¦å¾ˆæ…¢ã€‚</strong>å¦‚æœæˆ‘ä»¬æœ‰2,000ä¸ªææ¡ˆï¼Œåˆ™æ¯ä¸ªææ¡ˆéƒ½ç”±CNNå•ç‹¬å¤„ç†ï¼Œå³æˆ‘ä»¬é’ˆå¯¹ä¸åŒçš„æŠ•èµ„å›æŠ¥ç‡é‡å¤æå–2000æ¬¡ç‰¹å¾ã€‚<br>æˆ‘ä»¬ä¸æ˜¯ä»å¤´å¼€å§‹ä¸ºæ¯ä¸ªå›¾åƒè¡¥ä¸æå–ç‰¹å¾ï¼Œè€Œæ˜¯ä½¿ç”¨<strong>ç‰¹å¾æå–å™¨</strong>ï¼ˆCNNï¼‰é¦–å…ˆæå–æ•´ä¸ªå›¾åƒçš„ç‰¹å¾ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨å¤–éƒ¨åŒºåŸŸæè®®æ–¹æ³•ï¼ˆå¦‚é€‰æ‹©æ€§æœç´¢ï¼‰æ¥åˆ›å»ºROIï¼Œåè€…ä¸ç›¸åº”çš„è¦ç´ å›¾ç»„åˆä»¥å½¢æˆç”¨äºå¯¹è±¡æ£€æµ‹çš„è¡¥ä¸ã€‚æˆ‘ä»¬ä½¿ç”¨<strong>ROIæ± </strong>å°†è´´ç‰‡æ‰­æ›²åˆ°å›ºå®šå¤§å°ï¼Œå¹¶å°†å®ƒä»¬é¦ˆé€åˆ°å®Œå…¨è¿æ¥çš„å±‚ä»¥è¿›è¡Œåˆ†ç±»å’Œ<strong>å®šä½</strong>ï¼ˆæ£€æµ‹å¯¹è±¡çš„ä½ç½®ï¼‰ã€‚é€šè¿‡ä¸é‡å¤ç‰¹å¾æå–ï¼ŒFast R-CNNæ˜¾ç€ç¼©çŸ­äº†å¤„ç†æ—¶é—´ã€‚</p>
<p>åœ¨è¦ç´ å›¾ä¸Šåº”ç”¨åŒºåŸŸå»ºè®®ï¼Œå¹¶ä½¿ç”¨ROIæ± å½¢æˆå›ºå®šå¤§å°çš„ä¿®è¡¥ç¨‹åºã€‚<br>è¿™æ˜¯ç½‘ç»œæµç¨‹ï¼š</p>
<p>åœ¨ä¸‹é¢çš„ä¼ªä»£ç ä¸­ï¼Œæ˜‚è´µçš„ç‰¹å¾æå–æ­£åœ¨é€æ¸é€€å‡ºforå¾ªç¯ï¼Œè¿™æ˜¯å› ä¸ºå®ƒé’ˆå¯¹æ‰€æœ‰2000ä¸ªROIæ‰§è¡Œè€Œæ˜¾ç€æé«˜äº†é€Ÿåº¦ã€‚å¿«é€ŸR-CNNåœ¨è®­ç»ƒä¸­æ¯”R-CNNå¿«10å€ï¼Œåœ¨æ¨ç†ä¸­å¿«150å€ã€‚<br>feature_maps = processï¼ˆimageï¼‰<br>ROI = <br>ROIä¸­ROIçš„region_proposalï¼ˆimageï¼‰<br>    è¡¥ä¸= roi_poolingï¼ˆfeature_mapsï¼ŒROIï¼‰<br>    ç»“æœ= detector2ï¼ˆè¡¥ä¸ï¼‰Fast R-CNNçš„ä¸€ä¸ªä¸»è¦ç‰¹ç‚¹æ˜¯æ•´ä¸ªç½‘ç»œï¼ˆç‰¹å¾æå–å™¨ï¼Œåˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†å›å½’å™¨ï¼‰å¯ä»¥é€šè¿‡<strong>å¤šä»»åŠ¡æŸå¤±</strong>ï¼ˆåˆ†ç±»ä¸¢å¤±å’Œæœ¬åœ°åŒ–ä¸¢å¤±ï¼‰è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒã€‚è¿™æé«˜äº†å‡†ç¡®æ€§ã€‚<br><strong>æŠ•èµ„å›æŠ¥ç‡</strong><br>ç”±äºFast R-CNNä½¿ç”¨å®Œå…¨è¿æ¥çš„å±‚ï¼Œå› æ­¤æˆ‘ä»¬åº”ç”¨<strong>ROIæ± </strong>æ¥å°†å¯å˜å¤§å°çš„ROIæ‰­æ›²æˆé¢„å®šä¹‰çš„å¤§å°å½¢çŠ¶ã€‚<br>è®©æˆ‘ä»¬é€šè¿‡å°†8Ã—8ç‰¹å¾æ˜ å°„è½¬æ¢ä¸ºé¢„å®šä¹‰çš„2Ã—2å½¢çŠ¶æ¥ç®€åŒ–è®¨è®ºã€‚</p>
<ul>
<li>å·¦ä¸‹æ–¹ï¼šæˆ‘ä»¬çš„åŠŸèƒ½å›¾ã€‚</li>
<li>å³ä¸Šè§’ï¼šæˆ‘ä»¬å°†ROIï¼ˆè“è‰²ï¼‰ä¸è¦ç´ å›¾é‡å ã€‚</li>
<li>å·¦ä¸‹å›¾ï¼šæˆ‘ä»¬å°†ROIåˆ†æˆç›®æ ‡ç»´åº¦ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæˆ‘ä»¬çš„2Ã—2ç›®æ ‡ï¼Œæˆ‘ä»¬å°†ROIåˆ†æˆ4ä¸ªå…·æœ‰ç›¸ä¼¼æˆ–ç›¸åŒå¤§å°çš„éƒ¨åˆ†ã€‚</li>
<li>å³ä¸‹è§’ï¼šæ‰¾åˆ°æ¯ä¸ªéƒ¨åˆ†çš„æœ€å¤§å€¼ï¼Œç»“æœæ˜¯æˆ‘ä»¬çš„å˜å½¢ç‰¹å¾æ˜ å°„ã€‚</li>
</ul>
<p>è¾“å…¥è¦ç´ å›¾ï¼ˆå·¦ä¸Šï¼‰ï¼Œè¾“å‡ºè¦ç´ å›¾ï¼ˆå³ä¸‹ï¼‰ï¼Œè“æ¡†æ˜¯ROIï¼ˆå³ä¸Šï¼‰ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª2Ã—2ç‰¹å¾è¡¥ä¸ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è¾“å…¥åˆ†ç±»å™¨å’Œç›’å­å›å½’å™¨ã€‚<br><a name="1f096ba3"></a></p>
<h3 id="æ›´å¿«çš„R-CNN"><a href="#æ›´å¿«çš„R-CNN" class="headerlink" title="æ›´å¿«çš„R-CNN"></a>æ›´å¿«çš„R-CNN</h3><p>å¿«é€ŸR-CNNä¾èµ–äºå¤–éƒ¨åŒºåŸŸæè®®æ–¹æ³•ï¼Œå¦‚é€‰æ‹©æ€§æœç´¢ã€‚ä½†æ˜¯ï¼Œè¿™äº›ç®—æ³•åœ¨CPUä¸Šè¿è¡Œå¹¶ä¸”é€Ÿåº¦å¾ˆæ…¢ã€‚åœ¨æµ‹è¯•ä¸­ï¼Œå¿«é€ŸR-CNNèŠ±è´¹2.3ç§’è¿›è¡Œé¢„æµ‹ï¼Œå…¶ä¸­2ç§’ç”¨äºç”Ÿæˆ2000ä¸ªROIã€‚<br>feature_maps = processï¼ˆimageï¼‰<br>ROIs = region_proposalï¼ˆimageï¼‰ï¼ƒè´µï¼<br>æŠ•èµ„å›æŠ¥ç‡ä¸­çš„ROI <br>    è¡¥ä¸= roi_poolingï¼ˆfeature_mapsï¼ŒROIï¼‰<br>    ç»“æœ= detector2ï¼ˆè¡¥ä¸ï¼‰æ›´å¿«çš„R-CNNé‡‡ç”¨ä¸å¿«é€ŸR-CNNç±»ä¼¼çš„è®¾è®¡ï¼Œé™¤äº†å®ƒç”¨å†…éƒ¨æ·±åº¦ç½‘ç»œæ›¿æ¢åŒºåŸŸæè®®æ–¹æ³•ï¼Œè€ŒROIåˆ™æ¥è‡ªç‰¹å¾æ˜ å°„ã€‚æ–°åŒºåŸŸææ¡ˆç½‘ç»œï¼ˆ<strong>RPN</strong>ï¼‰æ›´é«˜æ•ˆï¼Œå¹¶ä¸”åœ¨ç”ŸæˆROIæ—¶æ¯ä¸ªæ˜ åƒè¿è¡Œ10æ¯«ç§’ã€‚</p>
<p>ç½‘ç»œæµé‡ä¸Fast R-CNNç›¸åŒã€‚<br>ç½‘ç»œæµç¨‹ç±»ä¼¼ï¼Œä½†åŒºåŸŸææ¡ˆç°åœ¨ç”±å·ç§¯ç½‘ç»œï¼ˆRPNï¼‰å–ä»£ã€‚</p>
<p>å¤–éƒ¨åŒºåŸŸæè®®ç”±å†…éƒ¨æ·±å±‚ç½‘ç»œå–ä»£ã€‚<br><strong>åŒºåŸŸææ¡ˆç½‘ç»œ</strong><br>åŒºåŸŸæè®®ç½‘ç»œï¼ˆ<strong>RPN</strong>ï¼‰å°†æ¥è‡ªç¬¬ä¸€ä¸ªå·ç§¯ç½‘ç»œçš„è¾“å‡ºç‰¹å¾æ˜ å°„ä½œä¸ºè¾“å…¥ã€‚å®ƒåœ¨ç‰¹å¾æ˜ å°„ä¸Šæ»‘åŠ¨3Ã—3è¿‡æ»¤å™¨ï¼Œä»¥ä½¿ç”¨åƒZFç½‘ç»œè¿™æ ·çš„å·ç§¯ç½‘ç»œï¼ˆä¸‹é¢ï¼‰è¿›è¡Œç±»åˆ«æ— å…³åŒºåŸŸæè®®ã€‚å…¶ä»–æ·±åº¦ç½‘ç»œå¦‚VGGæˆ–ResNetå¯ç”¨äºä»¥é€Ÿåº¦ä¸ºä»£ä»·è¿›è¡Œæ›´å…¨é¢çš„ç‰¹å¾æå–ã€‚ZFç½‘ç»œè¾“å‡º256ä¸ªå€¼ï¼Œè¿™äº›å€¼è¢«é¦ˆé€åˆ°2ä¸ªå•ç‹¬çš„å®Œå…¨è¿æ¥çš„å±‚ä¸­ä»¥é¢„æµ‹è¾¹ç•Œæ¡†å’Œ2ä¸ªå¯¹è±¡æ€§å¾—åˆ†ã€‚è¯¥<strong>å¯¹è±¡æ€§</strong>æµ‹é‡æ¡†æ˜¯å¦åŒ…å«å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å›å½’é‡æ¥è®¡ç®—å•ä¸ªå¯¹è±¡åº¦å¾—åˆ†ä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œæ›´å¿«çš„R-CNNä½¿ç”¨å…·æœ‰2ä¸ªå¯èƒ½ç±»çš„åˆ†ç±»å™¨ï¼šä¸€ä¸ªç”¨äºâ€œå…·æœ‰å¯¹è±¡â€ç±»åˆ«è€Œä¸€ä¸ªç”¨äºæ²¡æœ‰ï¼ˆå³èƒŒæ™¯ç±»åˆ«ï¼‰ã€‚</p>
<p>å¯¹äºè¦ç´ å›¾ä¸­çš„æ¯ä¸ªä½ç½®ï¼ŒRPNè¿›è¡Œ<strong>k</strong>çŒœæµ‹ã€‚å› æ­¤ï¼ŒRPNæ¯ä¸ªä½ç½®è¾“å‡º4Ã—kåæ ‡å’Œ2Ã—kåˆ†æ•°ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†å…·æœ‰3Ã—3æ»¤æ³¢å™¨çš„8Ã—8ç‰¹å¾å›¾ï¼Œå¹¶ä¸”å®ƒè¾“å‡ºæ€»å…±8Ã—8Ã—3ä¸ªROIï¼ˆå¯¹äºk = 3ï¼‰ã€‚å³ä¾§å›¾è¡¨æ˜¾ç¤ºäº†å•ä¸ªä½ç½®æå‡ºçš„3ä¸ªææ¡ˆã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¾—åˆ°3ä¸ªçŒœæµ‹ï¼Œæˆ‘ä»¬ç¨åä¼šæ”¹è¿›æˆ‘ä»¬çš„çŒœæµ‹ã€‚ç”±äºæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæ­£ç¡®çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„åˆæ­¥çŒœæµ‹æœ‰ä¸åŒçš„å½¢çŠ¶å’Œå¤§å°ï¼Œæˆ‘ä»¬ä¼šæ›´å¥½ã€‚å› æ­¤ï¼Œæ›´å¿«çš„R-CNNä¸ä¼šæå‡ºéšæœºè¾¹ç•Œæ¡†æè®®ã€‚ç›¸åï¼Œå®ƒé¢„æµ‹åƒÎ´xï¼ŒÎ´yè¿™æ ·çš„åç§»ç›¸å¯¹äºä¸€äº›ç§°ä¸º<strong>é”šç‚¹çš„</strong>å‚è€ƒæ¡†çš„å·¦ä¸Šè§’ã€‚æˆ‘ä»¬é™åˆ¶äº†é‚£äº›åç§»çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„çŒœæµ‹ä»ç„¶ç±»ä¼¼äºé”šç‚¹ã€‚</p>
<p>ä¸ºäº†å¯¹æ¯ä¸ªä½ç½®è¿›è¡Œkä¸ªé¢„æµ‹ï¼Œæˆ‘ä»¬éœ€è¦ä»¥æ¯ä¸ªä½ç½®ä¸ºä¸­å¿ƒçš„kä¸ªé”šç‚¹ã€‚æ¯ä¸ªé¢„æµ‹ä¸ç‰¹å®šé”šç›¸å…³è”ï¼Œä½†ä¸åŒä½ç½®å…±äº«ç›¸åŒçš„é”šå½¢çŠ¶ã€‚</p>
<p>è¿™äº›é”šæ˜¯ç»è¿‡ç²¾å¿ƒé¢„å…ˆé€‰æ‹©çš„ï¼Œå› æ­¤å®ƒä»¬æ˜¯å¤šæ ·çš„ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°è¦†ç›–ä¸åŒå°ºåº¦å’Œçºµæ¨ªæ¯”çš„çœŸå®ç‰©ä½“ã€‚è¿™å¯ä»¥é€šè¿‡æ›´å¥½çš„çŒœæµ‹æŒ‡å¯¼åˆå§‹è®­ç»ƒï¼Œå¹¶å…è®¸æ¯ä¸ªé¢„æµ‹ä¸“æ³¨äºæŸç§å½¢çŠ¶ã€‚è¿™ç§ç­–ç•¥ä½¿æ—©æœŸè®­ç»ƒæ›´åŠ ç¨³å®šå’Œè½»æ¾ã€‚<br>æ›´å¿«çš„R-CNNä½¿ç”¨æ›´å¤šçš„é”šç‚¹ã€‚å®ƒé…ç½®äº†9ä¸ªé”šç®±ï¼š3ç§ä¸åŒçš„æ¯”ä¾‹ï¼Œ3ç§ä¸åŒçš„å®½é«˜æ¯”ã€‚æ¯ä¸ªä½ç½®ä½¿ç”¨9ä¸ªé”šç‚¹ï¼Œæ¯ä¸ªä½ç½®ç”Ÿæˆ2Ã—9ä¸ªå¯¹è±¡åº¦åˆ†æ•°å’Œ4Ã—9ä¸ªåæ ‡ã€‚</p>
<p><a href="https://arxiv.org/pdf/1506.01497.pdf" target="_blank" rel="noopener">èµ„æº</a></p>
<blockquote>
<p><strong>é”š</strong>åœ¨ä¸åŒçš„è®ºæ–‡ä¸­ä¹Ÿç§°ä¸º&gt; <strong>å…ˆéªŒ</strong>æˆ–&gt; <strong>é»˜è®¤è¾¹ç•Œæ¡†</strong>ã€‚<br><a name="89dc102d"></a></p>
</blockquote>
<h3 id="R-CNNæ–¹æ³•çš„æ€§èƒ½"><a href="#R-CNNæ–¹æ³•çš„æ€§èƒ½" class="headerlink" title="R-CNNæ–¹æ³•çš„æ€§èƒ½"></a>R-CNNæ–¹æ³•çš„æ€§èƒ½</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ›´å¿«çš„R-CNNç”šè‡³æ›´å¿«ã€‚</p>
<p><a name="1c4a83c6"></a></p>
<h3 id="åŸºäºåŒºåŸŸçš„å®Œå…¨å·ç§¯ç½‘ç»œï¼ˆR-FCNï¼‰"><a href="#åŸºäºåŒºåŸŸçš„å®Œå…¨å·ç§¯ç½‘ç»œï¼ˆR-FCNï¼‰" class="headerlink" title="åŸºäºåŒºåŸŸçš„å®Œå…¨å·ç§¯ç½‘ç»œï¼ˆR-FCNï¼‰"></a>åŸºäºåŒºåŸŸçš„å®Œå…¨å·ç§¯ç½‘ç»œï¼ˆR-FCNï¼‰</h3><p>å‡è®¾æˆ‘ä»¬åªæœ‰ä¸€ä¸ªç‰¹å¾å›¾æ£€æµ‹åˆ°è„¸éƒ¨çš„å³çœ¼ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å®šä½ä¸€å¼ è„¸å—ï¼Ÿè¿™åº”è¯¥ã€‚ç”±äºå³çœ¼åº”ä½äºé¢éƒ¨å›¾ç‰‡çš„å·¦ä¸Šè§’ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å®šä½é¢éƒ¨ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸“é—¨æ£€æµ‹å·¦çœ¼ï¼Œé¼»å­æˆ–å˜´å·´çš„å…¶ä»–ç‰¹å¾å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»“æœç»„åˆåœ¨ä¸€èµ·ä»¥æ›´å¥½åœ°å®šä½è„¸éƒ¨ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç»å†æ‰€æœ‰éº»çƒ¦å‘¢ã€‚åœ¨æ›´å¿«çš„R-CNNä¸­ï¼Œ<em>æ¢æµ‹å™¨</em>åº”ç”¨å¤šä¸ªå®Œå…¨è¿æ¥çš„å±‚æ¥è¿›è¡Œé¢„æµ‹ã€‚æ‹¥æœ‰2,000ä¸ªæŠ•èµ„å›æŠ¥ç‡ï¼Œä»·æ ¼æ˜‚è´µã€‚<br>feature_maps =å¤„ç†ï¼ˆå›¾åƒï¼‰<br>çš„ROI = region_proposalï¼ˆfeature_mapsï¼‰<br>ç”¨äºåœ¨æ„Ÿå…´è¶£åŒºROI <br>    è¡¥ä¸= roi_poolingï¼ˆfeature_mapsï¼ŒROIï¼‰<br>    class_scoresï¼Œç›’=æ£€æµ‹å™¨ï¼ˆè´´ç‰‡ï¼‰ï¼ƒæ˜‚è´µï¼<br>    class_probabilities = softmaxï¼ˆclass_scoresï¼‰R-FCNé€šè¿‡å‡å°‘æ¯ä¸ªROIæ‰€éœ€çš„å·¥ä½œé‡æ¥æé«˜é€Ÿåº¦ã€‚ä¸Šé¢çš„åŸºäºåŒºåŸŸçš„ç‰¹å¾å›¾ä¸ROIæ— å…³ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ¯ä¸ªROIä¹‹å¤–è®¡ç®—ã€‚å‰©ä¸‹çš„å·¥ä½œè¦ç®€å•å¾—å¤šï¼Œå› æ­¤R-FCNæ¯”å¿«é€ŸR-CNNæ›´å¿«ã€‚<br>feature_maps = processï¼ˆimageï¼‰<br>ROIs = region_proposalï¼ˆfeature_mapsï¼‰          <br>score_maps = compute_score_mapï¼ˆfeature_mapsï¼‰<br>ROIä¸­çš„ROI <br>    V = region_roi_poolï¼ˆscore_mapsï¼ŒROIï¼‰      <br>    class_scoresï¼Œbox = averageï¼ˆVï¼‰ï¼ƒæ›´ç®€å•ï¼<br>    class_probabilities = softmaxï¼ˆclass_scoresï¼‰è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ª5Ã—5çš„ç‰¹å¾æ˜ å°„<strong>M</strong>ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªè“è‰²æ–¹å½¢å¯¹è±¡ã€‚æˆ‘ä»¬å°†æ–¹å½¢å¯¹è±¡å¹³å‡åˆ†æˆ3Ã—3ä¸ªåŒºåŸŸã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ä»Måˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹å¾å›¾ï¼Œä»…æ£€æµ‹æ­£æ–¹å½¢çš„å·¦ä¸Šè§’ï¼ˆTLï¼‰ã€‚æ–°åŠŸèƒ½å›¾çœ‹èµ·æ¥åƒå³ä¸‹æ–¹çš„é‚£ä¸ªã€‚ä»…æ¿€æ´»é»„è‰²<strong>ç½‘æ ¼å•å…ƒ</strong> [2,2]ã€‚</p>
<p>ä»å·¦ä¾§åˆ›å»ºæ–°çš„è¦ç´ å›¾ä»¥æ£€æµ‹å¯¹è±¡çš„å·¦ä¸Šè§’ã€‚<br>ç”±äºæˆ‘ä»¬å°†æ­£æ–¹å½¢åˆ’åˆ†ä¸º9ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»º9ä¸ªç‰¹å¾æ˜ å°„ï¼Œæ¯ä¸ªç‰¹å¾æ˜ å°„æ£€æµ‹å¯¹è±¡çš„ç›¸åº”åŒºåŸŸã€‚è¿™äº›ç‰¹å¾å›¾ç§°ä¸º<strong>ä½ç½®æ•æ„Ÿåˆ†æ•°å›¾ï¼Œ</strong>å› ä¸ºæ¯ä¸ªå›¾æ£€æµ‹ï¼ˆåˆ†æ•°ï¼‰å¯¹è±¡çš„å­åŒºåŸŸã€‚</p>
<p>ç”Ÿæˆ9ä¸ªå¾—åˆ†å›¾<br>å‡è®¾ä¸‹é¢çš„è™šçº¿çº¢è‰²çŸ©å½¢æ˜¯å»ºè®®çš„ROIã€‚æˆ‘ä»¬å°†å…¶åˆ’åˆ†ä¸º3Ã—3ä¸ªåŒºåŸŸï¼Œå¹¶è¯¢é—®æ¯ä¸ªåŒºåŸŸåŒ…å«å¯¹è±¡çš„ç›¸åº”éƒ¨åˆ†çš„å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼Œå·¦ä¸Šè§’ROIåŒºåŸŸåŒ…å«å·¦çœ¼çš„å¯èƒ½æ€§æœ‰å¤šå¤§ã€‚æˆ‘ä»¬å°†ç»“æœå­˜å‚¨åœ¨å³å›¾ä¸­çš„3Ã—3æŠ•ç¥¨æ•°ç»„ä¸­ã€‚ä¾‹å¦‚ï¼Œvote_array [0] [0]åŒ…å«å…³äºæˆ‘ä»¬æ˜¯å¦æ‰¾åˆ°æ–¹å½¢å¯¹è±¡çš„å·¦ä¸Šè§’åŒºåŸŸçš„åˆ†æ•°ã€‚</p>
<p>å°†ROIåº”ç”¨äºè¦ç´ å›¾ä»¥è¾“å‡º3 x 3é˜µåˆ—ã€‚<br>å°†å¾—åˆ†å›¾å’ŒROIæ˜ å°„åˆ°æŠ•ç¥¨æ•°ç»„çš„è¿‡ç¨‹ç§°ä¸º<strong>ä½ç½®æ•æ„Ÿçš„</strong> <strong>ROIæ± </strong>ã€‚è¿™ä¸ªè¿‡ç¨‹éå¸¸æ¥è¿‘æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ROIæ± ã€‚æˆ‘ä»¬ä¸ä¼šè¿›ä¸€æ­¥ä»‹ç»å®ƒï¼Œä½†æ‚¨å¯ä»¥å‚è€ƒæœªæ¥çš„é˜…è¯»éƒ¨åˆ†ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚</p>
<p>å°†ROIçš„ä¸€éƒ¨åˆ†å åŠ åˆ°ç›¸åº”çš„å¾—åˆ†å›¾ä¸Šä»¥è®¡ç®—V [i] [j]<br>è®¡ç®—ä½ç½®æ•æ„ŸROIæ± çš„æ‰€æœ‰å€¼åï¼Œç±»åˆ«åˆ†æ•°æ˜¯å…¶æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ã€‚</p>
<p>æŠ•èµ„å›æŠ¥ç‡æ± <br>å‡è®¾æˆ‘ä»¬æœ‰<strong>C</strong>ç±»è¦æ£€æµ‹ã€‚æˆ‘ä»¬å°†å®ƒæ‰©å±•ä¸ºC + 1ç±»ï¼Œå› æ­¤æˆ‘ä»¬ä¸ºèƒŒæ™¯ï¼ˆéå¯¹è±¡ï¼‰æ·»åŠ äº†ä¸€ä¸ªæ–°ç±»ã€‚æ¯ä¸ªç­çº§éƒ½æœ‰è‡ªå·±çš„3Ã—3åˆ†æ•°å›¾ï¼Œå› æ­¤æ€»å…±æœ‰ï¼ˆC + 1ï¼‰Ã—3Ã—3åˆ†æ•°å›¾ã€‚ä½¿ç”¨è‡ªå·±çš„ä¸€ç»„å¾—åˆ†å›¾ï¼Œæˆ‘ä»¬é¢„æµ‹æ¯ä¸ªç­çº§çš„ç­çº§å¾—åˆ†ã€‚ç„¶åæˆ‘ä»¬åœ¨è¿™äº›åˆ†æ•°ä¸Šåº”ç”¨softmaxæ¥è®¡ç®—æ¯ä¸ªç±»çš„æ¦‚ç‡ã€‚<br>ä»¥ä¸‹æ˜¯æ•°æ®æµã€‚å¯¹äºæˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¸‹é¢æœ‰k = 3ã€‚</p>
<p><a name="f64e8873"></a></p>
<h3 id="æˆ‘ä»¬çš„æ—…ç¨‹åˆ°ç›®å‰ä¸ºæ­¢"><a href="#æˆ‘ä»¬çš„æ—…ç¨‹åˆ°ç›®å‰ä¸ºæ­¢" class="headerlink" title="æˆ‘ä»¬çš„æ—…ç¨‹åˆ°ç›®å‰ä¸ºæ­¢"></a>æˆ‘ä»¬çš„æ—…ç¨‹åˆ°ç›®å‰ä¸ºæ­¢</h3><p>æˆ‘ä»¬ä»åŸºæœ¬çš„æ»‘åŠ¨çª—å£ç®—æ³•å¼€å§‹ã€‚<br>çª—å£ä¸­çš„çª—å£<br>    patch = get_patchï¼ˆå›¾åƒï¼Œçª—å£ï¼‰<br>    ç»“æœ=æ£€æµ‹å™¨ï¼ˆè¡¥ä¸ï¼‰ç„¶åæˆ‘ä»¬å°è¯•å‡å°‘çª—å£çš„æ•°é‡ï¼Œå¹¶åœ¨forå¾ªç¯ä¹‹å¤–ç§»åŠ¨å°½å¯èƒ½å¤šçš„å·¥ä½œã€‚<br>æŠ•èµ„å›æŠ¥ç‡= <br>ROIä¸­æŠ•èµ„å›æŠ¥ç‡çš„åŒºåŸŸæç¤ºï¼ˆå›¾åƒï¼‰<br>    è¡¥ä¸= get_patchï¼ˆå›¾åƒï¼ŒæŠ•èµ„å›æŠ¥ç‡ï¼‰<br>    ç»“æœ=æ£€æµ‹å™¨ï¼ˆè¡¥ä¸ï¼‰åœ¨<a href="https://medium.com/@jonathan_hui/what-do-we-learn-from-single-shot-object-detectors-ssd-yolo-fpn-focal-loss-3888677c5f4d" target="_blank" rel="noopener">ç¬¬2éƒ¨åˆ†ä¸­</a>ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å®Œå…¨åˆ é™¤äº†forå¾ªç¯ã€‚å•å‘æ¢æµ‹å™¨å¯åœ¨å•æ¬¡å°„å‡»ä¸­è¿›è¡Œç‰©ä½“æ¢æµ‹ï¼Œæ— éœ€å•ç‹¬çš„åŒºåŸŸå»ºè®®æ­¥éª¤ã€‚<br><a name="b4412bfb"></a></p>
<h3 id="è¿›ä¸€æ­¥é˜…è¯»FPNï¼ŒR-FCNå’ŒMask-R-CNN"><a href="#è¿›ä¸€æ­¥é˜…è¯»FPNï¼ŒR-FCNå’ŒMask-R-CNN" class="headerlink" title="è¿›ä¸€æ­¥é˜…è¯»FPNï¼ŒR-FCNå’ŒMask R-CNN"></a>è¿›ä¸€æ­¥é˜…è¯»FPNï¼ŒR-FCNå’ŒMask R-CNN</h3><p>FPNå’ŒR-FCNéƒ½æ¯”æˆ‘ä»¬åœ¨æ­¤æè¿°çš„æ›´å¤æ‚ã€‚å¦‚éœ€è¿›ä¸€æ­¥ç ”ç©¶ï¼Œè¯·å‚é˜…ï¼š</p>
<ul>
<li><a href="https://medium.com/@jonathan_hui/understanding-feature-pyramid-networks-for-object-detection-fpn-45b227b9106c" target="_blank" rel="noopener">ç”¨äºå¯¹è±¡æ£€æµ‹çš„ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆFPNï¼‰ã€‚</a></li>
<li><a href="https://medium.com/@jonathan_hui/understanding-region-based-fully-convolutional-networks-r-fcn-for-object-detection-828316f07c99" target="_blank" rel="noopener">åŸºäºåŒºåŸŸçš„å®Œå…¨å·ç§¯ç½‘ç»œï¼ˆR-FCNï¼‰</a>ã€‚</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2019/01/31/yuque/æˆ‘ä»¬ä»åŸºäºåŒºåŸŸçš„ç‰©ä½“æ¢æµ‹å™¨ï¼ˆæ›´å¿«çš„R-CNNï¼ŒR-FCNï¼ŒFPNï¼‰ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Kaggleï¼ƒ1è·èƒœå›¾åƒåˆ†ç±»æŒ‘æˆ˜æ–¹æ³•" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/yuque/Kaggleï¼ƒ1è·èƒœå›¾åƒåˆ†ç±»æŒ‘æˆ˜æ–¹æ³•/">Kaggleï¼ƒ1è·èƒœå›¾åƒåˆ†ç±»æŒ‘æˆ˜æ–¹æ³•</a>
    </h1>
  

        
        <a href="/2018/12/21/yuque/Kaggleï¼ƒ1è·èƒœå›¾åƒåˆ†ç±»æŒ‘æˆ˜æ–¹æ³•/" class="archive-article-date">
  	<time datetime="2018-12-21T09:03:34.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545383030520-f6dbd874-48b5-4066-bacc-bae58fd00765.png#width=826" alt><br>è¿™ç¯‡æ–‡ç« æ˜¯å…³äºæˆ‘ç”¨äºKaggleç«èµ›çš„æ–¹æ³•ï¼š<a href="https://www.kaggle.com/c/plant-seedlings-classification" target="_blank" rel="noopener">æ¤ç‰©å¹¼è‹—åˆ†ç±»ã€‚</a>æˆ‘åœ¨æ’åä¸­æ’åç¬¬ä¸€ï¼ŒæŒç»­äº†å‡ ä¸ªæœˆï¼Œæœ€ç»ˆåœ¨æœ€ç»ˆè¯„ä¼°ç»“æŸæ—¶ä»¥ï¼ƒ5ç»“æŸã€‚è¯¥æ–¹æ³•éå¸¸é€šç”¨ï¼Œä¹Ÿå¯ç”¨äºå…¶ä»–å›¾åƒè¯†åˆ«ä»»åŠ¡ã€‚</p>
<blockquote>
<p><strong>Kaggle</strong>æ˜¯ä¸€ä¸ª&gt; <a href="https://en.wikipedia.org/wiki/Predictive_modelling" target="_blank" rel="noopener">é¢„æµ‹å»ºæ¨¡</a>å’Œ&gt; <a href="https://en.wikipedia.org/wiki/Analytics" target="_blank" rel="noopener">åˆ†æ</a>ç«èµ›çš„å¹³å°ï¼Œç»Ÿè®¡äººå‘˜å’Œæ•°æ®æŒ–æ˜è€…åœ¨ç«äº‰ä¸­ç”Ÿæˆé¢„æµ‹å’Œæè¿°å…¬å¸å’Œç”¨æˆ·ä¸Šä¼ çš„æ•°æ®é›†çš„æœ€ä½³æ¨¡å‹ã€‚è¿™ç§&gt; <a href="https://en.wikipedia.org/wiki/Crowdsourcing" target="_blank" rel="noopener">ä¼—åŒ…</a>æ–¹æ³•ä¾èµ–äºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šæ— æ•°çš„ç­–ç•¥å¯ä»¥åº”ç”¨äºä»»ä½•é¢„æµ‹å»ºæ¨¡ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸å¯èƒ½äº‹å…ˆçŸ¥é“å“ªç§æŠ€æœ¯æˆ–åˆ†æå¸ˆæœ€æœ‰æ•ˆã€‚[1]<br>å¦å¤–ï¼Œè¯·æŸ¥çœ‹åœ¨NLPä¸Šè·å¾—<strong>Intent Classification</strong>ä»»åŠ¡çš„æœ€æ–°<strong>æˆæœ</strong>çš„åšå®¢ï¼š</p>
</blockquote>
<p><a href="https://medium.com/@shridhar743/know-your-intent-sota-results-in-intent-classification-8e1ca47f364c" target="_blank" rel="noopener">äº†è§£æ‚¨çš„æ„å›¾ï¼šSoTAç»“æœæ„å›¾åˆ†ç±»<br>æ­¤åšå®¢æ–‡ç« æ˜¾ç¤ºäº†åœ¨ä¸‰ä¸ªè¯­æ–™åº“ä¸Šè·å¾—çš„æœ€æ–°æœ€æ–°ç»“æœï¼šmedium.com</a></p>
<hr>
<p><a name="a9de"></a></p>
<h3 id="ä»»åŠ¡æ¦‚è¿°"><a href="#ä»»åŠ¡æ¦‚è¿°" class="headerlink" title="ä»»åŠ¡æ¦‚è¿°"></a><a href="#a9de"></a>ä»»åŠ¡æ¦‚è¿°</h3><p>ä½ å¯ä»¥åŒºåˆ†æ‚è‰å’Œå†œä½œç‰©å¹¼è‹—å—ï¼Ÿ<br>æœ‰æ•ˆåœ°è¿™æ ·åšçš„èƒ½åŠ›å¯ä»¥æ„å‘³ç€æ›´å¥½çš„ä½œç‰©äº§é‡å’Œæ›´å¥½çš„ç¯å¢ƒç®¡ç†ã€‚</p>
<p>æ‰€è¿°<strong>å¥¥å°”èƒ¡æ–¯å¤§å­¦ä¿¡å·å¤„ç†</strong>ç»„ï¼Œåœ¨å…·æœ‰åä½œ<strong>å—ä¸¹éº¦å¤§å­¦</strong>ï¼Œé‡Šæ”¾å«æœ‰å±äº12ç§çº¦960ç‹¬ç‰¹çš„æ¤ç‰©çš„å›¾åƒæ•°æ®é›†åœ¨å‡ ä¸ªç”Ÿé•¿é˜¶æ®µã€‚[1] [2]<br><img src="https://cdn-images-1.medium.com/max/1000/1*g_zIn9WVdJHCN2dfEV0X_A.png#width=" alt><br><em>å…¶ä¸­ä¸€ä¸ªæ ·æœ¬æ¤ç‰©ï¼šé¹…è‚ èœæ ·æœ¬[3]</em></p>
<p>å…¬å¼€å¯è·å¾—åœ¨å‡ ä¸ªç”Ÿé•¿é˜¶æ®µå±äº12ç§ç‰©ç§çš„çº¦960ç§ç‹¬ç‰¹æ¤ç‰©çš„å›¾åƒæ•°æ®åº“ã€‚å®ƒåŒ…æ‹¬å¸¦æ³¨é‡Šçš„RGBå›¾åƒï¼Œç‰©ç†åˆ†è¾¨ç‡çº¦ä¸ºæ¯æ¯«ç±³10ä¸ªåƒç´ ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨æ•°æ®åº“è·å¾—çš„åˆ†ç±»ç»“æœçš„è¯„ä¼°æ ‡å‡†åŒ–ï¼Œæå‡ºäº†åŸºäºF1åˆ†æ•°çš„åŸºå‡†ã€‚è¯¥<a href="https://vision.eng.au.dk/plant-seedlings-dataset/" target="_blank" rel="noopener">URL</a>æä¾›äº†æ•°æ®é›†[13]</p>
<p>ä¸‹å›¾æ˜¯æè¿°æ•°æ®é›†ä¸­æ‰€æœ‰12ä¸ªç±»çš„ç¤ºä¾‹ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545383065394-724bbdf8-bb85-4775-8661-8df88480e85d.png#width=826" alt></p>
<p><a name="aed6"></a></p>
<h4 id="å°†å›¾åƒåˆ†ç±»ä¸ºå„ä¸ªç±»çš„ä»»åŠ¡ï¼Œä»»åŠ¡åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š"><a href="#å°†å›¾åƒåˆ†ç±»ä¸ºå„ä¸ªç±»çš„ä»»åŠ¡ï¼Œä»»åŠ¡åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š" class="headerlink" title="å°†å›¾åƒåˆ†ç±»ä¸ºå„ä¸ªç±»çš„ä»»åŠ¡ï¼Œä»»åŠ¡åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š"></a><a href="#aed6"></a>å°†å›¾åƒåˆ†ç±»ä¸ºå„ä¸ªç±»çš„ä»»åŠ¡ï¼Œä»»åŠ¡åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼š</h4><p><a name="d486"></a></p>
<h3 id="æ­¥éª¤1ï¼š"><a href="#æ­¥éª¤1ï¼š" class="headerlink" title="æ­¥éª¤1ï¼š"></a><a href="#d486"></a>æ­¥éª¤1ï¼š</h3><p>æœºå™¨å­¦ä¹ ä¸­çš„ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€é‡è¦çš„ä»»åŠ¡æ˜¯åœ¨ç»§ç»­ä»»ä½•ç®—æ³•ä¹‹å‰åˆ†ææ•°æ®é›†ã€‚è¿™å¯¹äºç†è§£æ•°æ®é›†çš„å¤æ‚æ€§éå¸¸é‡è¦ï¼Œè¿™æœ€ç»ˆå°†æœ‰åŠ©äºè®¾è®¡ç®—æ³•ã€‚</p>
<p>å›¾åƒå’Œç±»çš„åˆ†å¸ƒå¦‚ä¸‹ï¼š<br><img src="https://cdn-images-1.medium.com/max/1000/1*axNbDRk6whrwE29zDafAJQ.png#width=" alt><br>å¦‚å‰æ‰€è¿°ï¼Œå…±æœ‰12ä¸ªç±»ï¼Œæ€»å…±æœ‰4750ä¸ªå›¾åƒã€‚ç„¶è€Œï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œåˆ†å¸ƒä¸å‡åŒ€ï¼Œå¹¶ä¸”ç±»åˆ«åˆ†å¸ƒä»æœ€å¤§654ä¸ªå›¾åƒå˜åŒ–åˆ°æœ€å°221ä¸ªå›¾åƒã€‚è¿™æ¸…æ¥šåœ°è¡¨æ˜æ•°æ®ä¸å¹³è¡¡ï¼Œæ•°æ®éœ€è¦å¹³è¡¡æ‰èƒ½è·å¾—æœ€ä½³ç»“æœã€‚æˆ‘ä»¬å°†åœ¨ç¬¬<strong>3</strong>æ­¥ä¸­è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*V5C9piJvHcsV-dqLuVpOPQ.png#width=" alt>æ¯ç­çš„å›¾åƒåˆ†å‘</p>
<p>ç°åœ¨ï¼Œå°†å›¾åƒå¯è§†åŒ–ä»¥ä¾¿æ›´å¥½åœ°ç†è§£æ•°æ®éå¸¸é‡è¦ã€‚å› æ­¤ï¼Œæ˜¾ç¤ºæ¥è‡ªæ¯ä¸ªç±»çš„ä¸€äº›æ ·æœ¬å›¾åƒä»¥ä¾¿æŸ¥çœ‹å›¾åƒå½¼æ­¤ä¹‹é—´çš„å·®å¼‚ã€‚<br><img src="https://cdn-images-1.medium.com/max/1000/1*phgfJG3mycgz8BGlA9Jj9Q.png#width=" alt><br>ä»ä¸Šé¢çš„å›¾åƒä¸­å¯ä»¥ç†è§£çš„æ˜¯ï¼Œæ‰€æœ‰å›¾åƒçœ‹èµ·æ¥éƒ½éå¸¸ç›¸ä¼¼ã€‚æ‰€ä»¥ï¼Œæˆ‘å†³å®šä½¿ç”¨ç§°ä¸º<a href="https://lvdmaaten.github.io/tsne/" target="_blank" rel="noopener">t-Distributedéšæœºé‚»å±…åµŒå…¥</a>ï¼ˆt-SNEï¼‰çš„å¯è§†åŒ–æŠ€æœ¯æ¥çœ‹å›¾åƒ<a href="https://lvdmaaten.github.io/tsne/" target="_blank" rel="noopener">çš„åˆ†å¸ƒ</a>ã€‚<br>tåˆ†å¸ƒå¼éšæœºé‚»åŸŸåµŒå…¥ï¼ˆt-SNEï¼‰æ˜¯ä¸€ç§é™ç»´çš„æŠ€æœ¯ï¼Œç‰¹åˆ«é€‚ç”¨äºé«˜ç»´æ•°æ®é›†çš„å¯è§†åŒ–ã€‚è¯¥æŠ€æœ¯å¯ä»¥é€šè¿‡Barnes-Hutè¿‘ä¼¼å®ç°ï¼Œå…è®¸å®ƒåº”ç”¨äºå¤§å‹çœŸå®ä¸–ç•Œçš„æ•°æ®é›†ã€‚[14]<br><img src="https://cdn-images-1.medium.com/max/1000/1*HK33kGhDF43ZAKrROxoKWA.png#width=" alt>æ•°æ®é›†çš„t-SNEå¯è§†åŒ–</p>
<p>ä»”ç»†è§‚å¯Ÿä¹‹åï¼Œæˆ‘ä»¬å¾ˆéš¾çœ‹å‡ºè¯¾ç¨‹çš„å·®å¼‚ã€‚å› æ­¤ï¼Œé‡è¦çš„æ˜¯è¦äº†è§£æ•°æ®æ˜¯å¦å¾ˆéš¾ä»…ä»…ä¸ºäººç±»åŒºåˆ†ï¼Œæˆ–è€…æœºå™¨å­¦ä¹ æ¨¡å‹ä¹Ÿå¾ˆéš¾ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†ä¸ºå®ƒåšä¸€ä¸ªåŸºæœ¬çš„åŸºå‡†æµ‹è¯•ã€‚</p>
<p><a name="12da"></a></p>
<h4 id="åŸ¹è®­å’ŒéªŒè¯é›†"><a href="#åŸ¹è®­å’ŒéªŒè¯é›†" class="headerlink" title="åŸ¹è®­å’ŒéªŒè¯é›†"></a><a href="#12da"></a>åŸ¹è®­å’ŒéªŒè¯é›†</h4><p>åœ¨å¼€å§‹ä½¿ç”¨æ¨¡å‹åŸºå‡†æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®åˆ’åˆ†ä¸ºè®­ç»ƒå’ŒéªŒè¯æ•°æ®é›†ã€‚åœ¨åŸå§‹æµ‹è¯•é›†ä¸Šæµ‹è¯•æ¨¡å‹ä¹‹å‰ï¼ŒéªŒè¯é›†å°†æ‰®æ¼”æµ‹è¯•æ•°æ®é›†çš„è§’è‰²ã€‚å› æ­¤ï¼ŒåŸºæœ¬ä¸Šåœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹å¹¶åœ¨éªŒè¯é›†ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œç„¶åéšç€æ—¶é—´çš„æ¨ç§»å¯ä»¥åœ¨éªŒè¯é›†ä¸Šæ”¹è¿›æ¨¡å‹ã€‚ä¸€æ—¦æˆ‘ä»¬å¯¹éªŒè¯é›†çš„ç»“æœæ„Ÿåˆ°æ»¡æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨çœŸå®çš„æµ‹è¯•æ•°æ®é›†ä¸Šåº”ç”¨è¯¥æ¨¡å‹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å‹æ˜¯å¦è¿‡åº¦æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆæˆ‘ä»¬çš„éªŒè¯é›†ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ‹Ÿåˆæ¨¡å‹ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡å°†80ï¼…çš„å›¾åƒä¿ç•™ä¸ºè®­ç»ƒæ•°æ®é›†å¹¶å°†20ï¼…çš„å›¾åƒä¿æŒä¸ºéªŒè¯é›†æ¥åˆ’åˆ†4750ä¸ªå›¾åƒçš„æ•°æ®é›†ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*0h-aFSLtqVvTl4XpWWSRMQ.png#width=" alt>åŸ¹è®­å’ŒéªŒè¯æ•°æ®åˆ†å¼€<br><a name="1608"></a></p>
<h3 id="ç¬¬2æ­¥ï¼š"><a href="#ç¬¬2æ­¥ï¼š" class="headerlink" title="ç¬¬2æ­¥ï¼š"></a><a href="#1608"></a>ç¬¬2æ­¥ï¼š</h3><p>ä¸€æ—¦æˆ‘ä»¬è·å¾—äº†åŸ¹è®­å’ŒéªŒè¯é›†ï¼Œæˆ‘ä»¬å°†ä»æ•°æ®é›†çš„åŸºå‡†æµ‹è¯•å¼€å§‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œåœ¨ç»™å‡ºæµ‹è¯•æ•°æ®é›†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶åˆ†ç±»ä¸º12ä¸ªç±»ä¸­çš„ä¸€ä¸ªã€‚æ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨<strong>å·ç§¯ç¥ç»ç½‘ç»œ</strong>æ¥å®Œæˆä»»åŠ¡ã€‚<br>å¦‚æœæ‚¨æ˜¯åˆå­¦è€…å¹¶ä¸”éœ€è¦æ›´å¥½åœ°ç†è§£æ·±åº¦å­¦ä¹ æœ¯è¯­ï¼Œè¯·è®¿é—®ä»¥ä¸‹&gt; <a href="https://medium.com/@shridhar743/a-beginners-guide-to-deep-learning-5ee814cf7706" target="_blank" rel="noopener">åšå®¢ï¼š</a></p>
<p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åˆ›å»ºCNNæ¨¡å‹ï¼Œä½†å¯¹äºç¬¬ä¸€ä¸ªåŸºå‡†æµ‹è¯•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://keras.io/" target="_blank" rel="noopener">Kerasæ·±åº¦å­¦ä¹ åº“</a>ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨Kerasä¸­å¯ç”¨çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œé€šè¿‡ImageNetæ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬å°†æ ¹æ®æˆ‘ä»¬çš„ä»»åŠ¡å¯¹å…¶è¿›è¡Œå¾®è°ƒã€‚</p>
<p>ä»å¤´å¼€å§‹è®­ç»ƒå·ç§¯ç¥ç»ç½‘ç»œå‡ ä¹å®é™…ä¸Šæ˜¯ä½æ•ˆçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ImageNetä¸Šä½¿ç”¨é¢„å…ˆè®­ç»ƒçš„CNNæ¨¡å‹çš„æƒé‡ï¼Œä½¿ç”¨1000ä¸ªç±»ï¼Œå¹¶é€šè¿‡ä¿æŒä¸€äº›å±‚å†»ç»“å¹¶è§£å†»å…¶ä¸­ä¸€äº›å¹¶å¯¹å…¶è¿›è¡Œè®­ç»ƒæ¥å¯¹å…¶è¿›è¡Œå¾®è°ƒã€‚è¿™æ˜¯å› ä¸ºé¡¶å±‚å­¦ä¹ ç®€å•çš„åŸºæœ¬åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸éœ€è¦è®­ç»ƒè¿™äº›å±‚ï¼Œå®ƒå¯ä»¥ç›´æ¥åº”ç”¨äºæˆ‘ä»¬çš„ä»»åŠ¡ã€‚éœ€è¦æ³¨æ„çš„ä¸€ä»¶é‡è¦äº‹æƒ…æ˜¯æˆ‘ä»¬éœ€è¦æ£€æŸ¥æˆ‘ä»¬çš„æ•°æ®é›†æ˜¯å¦ä¸ImageNetç±»ä¼¼ï¼Œä»¥åŠæˆ‘ä»¬çš„æ•°æ®é›†æœ‰å¤šå¤§ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½å°†å†³å®šæˆ‘ä»¬å¦‚ä½•æ‰§è¡Œå¾®è°ƒã€‚è¦äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·é˜…è¯»<a href="https://medium.com/@karpathy" target="_blank" rel="noopener">Andrej Karpathy</a>çš„åšå®¢ï¼š</p>
<p><a href="http://cs231n.github.io/transfer-learning/" target="_blank" rel="noopener">ç”¨äºè§†è§‰è¯†åˆ«çš„CS231nå·ç§¯ç¥ç»ç½‘ç»œç”¨äº<br>æ–¯å¦ç¦ç±»CS231nçš„è¯¾ç¨‹ææ–™å’Œæ³¨é‡Šï¼šç”¨äºè§†è§‰è¯†åˆ«çš„å·ç§¯ç¥ç»ç½‘ç»œã€‚cs231n.github.io</a></p>
<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ•°æ®é›†å¾ˆå°ä½†æœ‰ç‚¹ç±»ä¼¼äºImageNetã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ImageNetçš„æƒé‡ï¼Œåªéœ€æ·»åŠ ä¸€ä¸ªåŒ…å«12ä¸ªç±»çš„æœ€ç»ˆè¾“å‡ºå±‚å³å¯æŸ¥çœ‹ç¬¬ä¸€ä¸ªåŸºå‡†æµ‹è¯•ã€‚ç„¶åæˆ‘ä»¬å°†è§£é™¤ä¸€äº›åº•å±‚çš„è§£å†»ï¼Œç„¶åè®­ç»ƒè¿™äº›å±‚ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨Kerasä½œä¸ºåˆå§‹åŸºå‡†ï¼Œå› ä¸ºKerasæä¾›äº†è®¸å¤šé¢„è®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ResNet50å’ŒInceptionResNetV2æ¥å®Œæˆæˆ‘ä»¬çš„ä»»åŠ¡ã€‚ä½¿ç”¨ä¸€ä¸ªç®€å•æ¨¡å‹å’Œä¸€ä¸ªéå¸¸é«˜ç«¯æ¨¡å‹å¯¹æ•°æ®é›†è¿›è¡ŒåŸºå‡†æµ‹è¯•éå¸¸é‡è¦ï¼Œä»¥äº†è§£æˆ‘ä»¬æ˜¯å¦è¿‡åº¦æ‹Ÿåˆ/ä¸é€‚åˆç»™å®šæ¨¡å‹ä¸Šçš„æ•°æ®é›†ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/yuque/Kaggleï¼ƒ1è·èƒœå›¾åƒåˆ†ç±»æŒ‘æˆ˜æ–¹æ³•/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Capsule Networksï¼šä¸€ç§å…¨æ–°ä¸”æå…·å¸å¼•åŠ›çš„AIæ¶æ„" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/yuque/Capsule Networksï¼šä¸€ç§å…¨æ–°ä¸”æå…·å¸å¼•åŠ›çš„AIæ¶æ„/">Capsule Networksï¼šä¸€ç§å…¨æ–°ä¸”æå…·å¸å¼•åŠ›çš„AIæ¶æ„</a>
    </h1>
  

        
        <a href="/2018/12/21/yuque/Capsule Networksï¼šä¸€ç§å…¨æ–°ä¸”æå…·å¸å¼•åŠ›çš„AIæ¶æ„/" class="archive-article-date">
  	<time datetime="2018-12-21T07:02:37.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://heartbeat.fritz.ai/capsule-networks-a-new-and-attractive-ai-architecture-bd1198cc8ad4" target="_blank" rel="noopener">é“¾æ¥</a><br><a name="481b"></a></p>
<h2 id="æœ¬æ–‡å·²è¢«ç¿»è¯‘æˆè‹±æ–‡å¹¶é¦–æ¬¡å‘è¡¨äºDeep-Learning-Turkey-ã€‚"><a href="#æœ¬æ–‡å·²è¢«ç¿»è¯‘æˆè‹±æ–‡å¹¶é¦–æ¬¡å‘è¡¨äºDeep-Learning-Turkey-ã€‚" class="headerlink" title="æœ¬æ–‡å·²è¢«ç¿»è¯‘æˆè‹±æ–‡å¹¶é¦–æ¬¡å‘è¡¨äºDeep Learning Turkey_ã€‚_"></a><a href="#481b"></a><em>æœ¬æ–‡å·²è¢«ç¿»è¯‘æˆè‹±æ–‡å¹¶é¦–æ¬¡å‘è¡¨äº</em><a href="https://medium.com/deep-learning-turkiye/yapay-zekan%C4%B1n-yeni-ve-%C3%A7ekici-mimarisi-kaps%C3%BCl-a%C4%9F%C4%B1na-uygulamal%C4%B1-bir-bak%C4%B1%C5%9F-ef7310e3d847" target="_blank" rel="noopener">Deep Learning Turkey</a>_ã€‚_</h2><p><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545375946092-dea95dae-971e-4274-a86b-98c17c3ee82a.png#width=826" alt><br><a href="https://heartbeat.fritz.ai/a-beginners-guide-to-convolutional-neural-networks-cnn-cf26c5ee17ed" target="_blank" rel="noopener">å·ç§¯ç¥ç»ç½‘ç»œ</a>ï¼ˆCNNï¼‰åœ¨è®¡ç®—æœºè§†è§‰åº”ç”¨ä¸­ç»å¸¸æ˜¯é¦–é€‰ï¼Œå› ä¸ºå®ƒä»¬åœ¨å¯¹è±¡è¯†åˆ«å’Œåˆ†ç±»ä»»åŠ¡ä¸Šå–å¾—äº†æˆåŠŸã€‚CNNç”±å †å åœ¨ä¸€èµ·çš„è®¸å¤šç¥ç»å…ƒç»„æˆã€‚è®¡ç®—è·¨ç¥ç»å…ƒçš„å·ç§¯éœ€è¦å¤§é‡è®¡ç®—ï¼Œå› æ­¤æ± åŒ–è¿‡ç¨‹é€šå¸¸ç”¨äºå‡å°ç½‘ç»œå±‚çš„å¤§å°ã€‚å·ç§¯æ–¹æ³•å¯ä»¥é€šè¿‡ç®€å•çš„è®¡ç®—å­¦ä¹ æ•°æ®çš„è®¸å¤šå¤æ‚ç‰¹å¾ã€‚é€šè¿‡å¯¹æˆ‘ä»¬çš„è¾“å…¥æ‰§è¡Œè®¸å¤šçŸ©é˜µä¹˜æ³•å’Œæ±‚å’Œï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæˆ‘ä»¬é—®é¢˜çš„ç­”æ¡ˆã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545375976729-c04cb9d8-3367-460d-87bb-a85c2e57ac26.png#width=665" alt></p>
<p><strong><em>æˆ‘æ€»æ˜¯å¬åˆ°CNNæœ‰å¤šæ£’ã€‚ä»€ä¹ˆæ—¶å€™å¤±è´¥ï¼Ÿ</em></strong></p>
<p>CNNåœ¨è§£å†³å¯¹è±¡è¯†åˆ«å’Œåˆ†ç±»é—®é¢˜æ–¹é¢å–å¾—äº†å·¨å¤§æˆåŠŸã€‚ä½†æ˜¯ï¼Œå®ƒä»¬å¹¶ä¸å®Œç¾ã€‚å¦‚æœCNNæ˜¾ç¤ºçš„æ–¹å‘å¯¹è±¡ä¸ç†Ÿæ‚‰ï¼Œæˆ–è€…å¯¹è±¡å‡ºç°åœ¨ä¸ä¹ æƒ¯çš„ä½ç½®ï¼Œåˆ™é¢„æµ‹ä»»åŠ¡å¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å°†ä¸€å¼ è„¸å€’ç½®ï¼Œç½‘ç»œå°†æ— æ³•å†è¯†åˆ«çœ¼ç›ï¼Œé¼»å­ï¼Œå˜´å·´ä»¥åŠä¸¤è€…ä¹‹é—´çš„ç©ºé—´å…³ç³»ã€‚åŒæ ·ï¼Œå¦‚æœä½ æ”¹å˜äº†è„¸éƒ¨çš„ç‰¹å®šåŒºåŸŸï¼ˆå³åˆ‡æ¢çœ¼ç›å’Œé¼»å­çš„ä½ç½®ï¼‰ï¼Œç½‘ç»œå°†èƒ½å¤Ÿè¯†åˆ«è„¸éƒ¨ï¼Œä½†å®ƒä¸å†æ˜¯çœŸå®çš„è„¸éƒ¨ã€‚CNNå­¦ä¹ å›¾åƒä¸­çš„ç»Ÿè®¡æ¨¡å¼ï¼Œä½†æ˜¯ä»–ä»¬æ²¡æœ‰å­¦ä¹ å…³äºä»€ä¹ˆä½¿äº‹ç‰©çœ‹èµ·æ¥åƒè„¸çš„åŸºæœ¬æ¦‚å¿µã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545376002462-0627f195-0f85-4cd8-a27c-fbd4ecd9ea94.png#width=826" alt><br>å…³äºä¸ºä»€ä¹ˆCNNæ— æ³•å­¦ä¹ æ¦‚å¿µçš„ç†è®ºï¼Œ_AI_ä¹‹_çˆ¶_<strong>Geoffrey Hinton</strong>ä¸“æ³¨äºç”¨äºç¼©å°ç½‘ç»œè§„æ¨¡å’Œè®¡ç®—è¦æ±‚çš„æ± åŒ–æ“ä½œã€‚ä»–æ„Ÿå¹é“ï¼š</p>
<blockquote>
<p><em>â€œåœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ä½¿ç”¨çš„æ± åŒ–æ“ä½œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é”™è¯¯ï¼Œå®ƒè¿ä½œè‰¯å¥½çš„äº‹å®æ˜¯ä¸€åœºç¾éš¾ï¼â€</em><br>æ±‡é›†å±‚æ­£åœ¨ç ´åä¿¡æ¯ï¼Œä½¿ç½‘ç»œæ— æ³•å­¦ä¹ æ›´é«˜çº§åˆ«çš„æ¦‚å¿µã€‚æ‰€ä»¥ä»–å¼€å§‹ç€æ‰‹å¼€å‘ä¸€ç§æ–°çš„æ¶æ„ï¼Œè¿™ç§æ¶æ„å¹¶æ²¡æœ‰è¿‡å¤šåœ°ä¾èµ–äºè¿™ç§æ“ä½œã€‚</p>
</blockquote>
<p><strong>ç»“æœï¼šèƒ¶å›Šç½‘ç»œ</strong><br><a name="9d89"></a></p>
<h3 id="ä»€ä¹ˆæ˜¯èƒ¶å›Šç½‘ç»œï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯èƒ¶å›Šç½‘ç»œï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯èƒ¶å›Šç½‘ç»œï¼Ÿ"></a><a href="#9d89"></a>ä»€ä¹ˆæ˜¯èƒ¶å›Šç½‘ç»œï¼Ÿ</h3><p>Hintonå’ŒSabourå€Ÿé‰´äº†ç¥ç»ç§‘å­¦çš„è§‚ç‚¹ï¼Œè®¤ä¸ºå¤§è„‘è¢«ç»„ç»‡æˆç§°ä¸º<strong><em>èƒ¶å›Šçš„</em></strong>æ¨¡å—ã€‚è¿™äº›èƒ¶å›Šç‰¹åˆ«æ“…é•¿å¤„ç†ç‰©ä½“çš„ç‰¹å¾ï¼Œå¦‚å§¿åŠ¿ï¼ˆä½ç½®ï¼Œå¤§å°ï¼Œæ–¹å‘ï¼‰ï¼Œå˜å½¢ï¼Œé€Ÿåº¦ï¼Œåç…§ç‡ï¼Œè‰²è°ƒï¼Œçº¹ç†ç­‰ã€‚</p>
<p>ç†è®ºä¸Šï¼Œå¤§è„‘å¿…é¡»æœ‰ä¸€ç§æœºåˆ¶ï¼Œç”¨äº<strong>_å°†_</strong>ä½çº§è§†è§‰ä¿¡æ¯<strong>_è·¯ç”±_</strong>åˆ°å®ƒè®¤ä¸ºæœ€é€‚åˆå¤„ç†å®ƒçš„èƒ¶å›Šã€‚å·²ç»æå‡ºäº†<strong>èƒ¶å›Šç½‘ç»œ</strong>å’Œ<strong>åŠ¨æ€è·¯ç”±ç®—æ³•</strong>ä½œä¸ºå·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ä¸å……åˆ†çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/750/1*y9RmBVmzKY63CET4LYRcUA.png#width=" alt><br><a href="https://www.wikiart.org/en/pablo-picasso/untitled-1937-8" target="_blank" rel="noopener">Portrait de femme au col d`hermineï¼ˆå¥¥å°”åŠ ï¼‰</a></p>
<p>èƒ¶å›Šè¡¨ç¤ºå›¾åƒä¸­å­˜åœ¨çš„ç‰¹å®šå®ä½“çš„å„ç§ç‰¹å¾ã€‚ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ç‰¹å¾æ˜¯å›¾åƒä¸­å­˜åœ¨å®ä¾‹åŒ–çš„å®ä½“ã€‚å®ä¾‹åŒ–çš„å®ä½“æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå¦‚ä½ç½®ï¼Œå¤§å°ï¼Œæ–¹å‘ï¼Œå˜å½¢ï¼Œé€Ÿåº¦ï¼Œåç…§ç‡ï¼Œè‰²è°ƒï¼Œçº¹ç†ç­‰ã€‚è¡¨ç¤ºå…¶å­˜åœ¨çš„ä¸€ç§æ˜¾è€Œæ˜“è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„é€»è¾‘å•å…ƒï¼Œå…¶è¾“å‡ºæ˜¯å®ä½“å­˜åœ¨çš„æ¦‚ç‡[ <a href="https://arxiv.org/pdf/1710.09829.pdf" target="_blank" rel="noopener">1</a> ]ã€‚ä¸ºäº†è·å¾—æ¯”CNNæ›´å¥½çš„ç»“æœï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨è¿­ä»£<strong>è·¯ç”±åè®®</strong>æœºåˆ¶ã€‚è¿™äº›åŠŸèƒ½ç§°ä¸º<strong>å®ä¾‹åŒ–å‚æ•°</strong>ã€‚åœ¨ç»å…¸CNNæ¨¡å‹ä¸­ï¼Œä¸èƒ½è·å¾—å›¾åƒä¸­å¯¹è±¡çš„è¿™ç§å±æ€§ã€‚å¹³å‡/æœ€å¤§æ± åŒ–å±‚å‡å°äº†ä¸€ç»„ä¿¡æ¯çš„å¤§å°ï¼ŒåŒæ—¶å‡å°äº†å¤§å°ã€‚</p>
<blockquote>
<p><strong>å¥½å§ï¼ŒæŸå¤„æœ‰ä¸€ä¸ªå˜´å”‡ï¼Œé¼»å­å’Œçœ¼ç›ï¼Œä½†å·ç§¯ç¥ç»ç½‘ç»œæ— æ³•å†³å®šå®ƒåº”è¯¥åœ¨å“ªé‡Œä»¥åŠå®ƒåœ¨å“ªé‡Œã€‚</strong> &gt; <strong>å¯¹äºä¼ ç»Ÿçš„ç½‘ç»œï¼Œé”™ä½çš„åŠŸèƒ½ä¸ä¼šè®©å®ƒå¤±æœ›ï¼</strong></p>
</blockquote>
<p><a name="65d9"></a></p>
<h3 id="å£çƒåŠŸèƒ½"><a href="#å£çƒåŠŸèƒ½" class="headerlink" title="å£çƒåŠŸèƒ½"></a><a href="#65d9"></a>å£çƒåŠŸèƒ½</h3><p><a name="q16xns"></a></p>
<h4 id="å£çƒåŠŸèƒ½-1"><a href="#å£çƒåŠŸèƒ½-1" class="headerlink" title="å£çƒåŠŸèƒ½"></a><a href="#q16xns"></a><img src="https://cdn-images-1.medium.com/max/750/1*b3unKamre_roNMTS7H_6EA.png#width=" alt>å£çƒåŠŸèƒ½</h4><p>åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­ï¼Œæ¿€æ´»å‡½æ•°æ˜¯åº”ç”¨äºå±‚è¾“å‡ºçš„ç®€å•æ•°å­¦è¿ç®—ã€‚å®ƒä»¬ç”¨äºè¿‘ä¼¼å­˜åœ¨äºæ•°æ®ä¸­çš„éçº¿æ€§å…³ç³»ã€‚æ¿€æ´»å±‚é€šå¸¸ä½œç”¨äºæ ‡é‡å€¼ - ä¾‹å¦‚ï¼Œå¯¹å‘é‡ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ ‡å‡†åŒ–ï¼Œä½¿å…¶è½åœ¨0å’Œ1ä¹‹é—´ã€‚<br>åœ¨Capsule Networksä¸­ï¼Œä¸€ç§ç§°ä¸º<em>squashå‡½æ•°</em>çš„ç‰¹æ®Šç±»å‹çš„æ¿€æ´»å‡½æ•°ç”¨äºå½’ä¸€åŒ–å‘é‡çš„å¤§å°ï¼Œè€Œä¸æ˜¯æ ‡é‡å…ƒç´ æœ¬èº«ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545376097052-2994fe87-934e-4515-9a1b-7187e3ac549d.png#width=826" alt></p>
<p><a href="https://arxiv.org/pdf/1710.09829.pdf" target="_blank" rel="noopener">åè®®è·¯ç”±ç®—æ³•</a><br>è¿™äº›å£çƒåŠŸèƒ½çš„è¾“å‡ºå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•é€šè¿‡è®­ç»ƒå­¦ä¹ ä¸åŒæ¦‚å¿µçš„å„ç§èƒ¶å›Šæ¥è·¯ç”±æ•°æ®ã€‚å›¾åƒä¸­æ¯ä¸ªå¯¹è±¡çš„å±æ€§åœ¨è·¯ç”±å®ƒä»¬çš„å‘é‡ä¸­è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œè„¸éƒ¨çš„æ¿€æ´»å¯ä»¥å°†å›¾åƒçš„ä¸åŒéƒ¨åˆ†è·¯ç”±åˆ°ç†è§£çœ¼ç›ï¼Œé¼»å­ï¼Œå˜´å·´å’Œè€³æœµçš„èƒ¶å›Šã€‚<br><a name="d0f9"></a></p>
<h3 id="èƒ¶å›Šç½‘ç»œåœ¨MNISTæ•°æ®é›†ä¸­çš„åº”ç”¨"><a href="#èƒ¶å›Šç½‘ç»œåœ¨MNISTæ•°æ®é›†ä¸­çš„åº”ç”¨" class="headerlink" title="èƒ¶å›Šç½‘ç»œåœ¨MNISTæ•°æ®é›†ä¸­çš„åº”ç”¨"></a><a href="#d0f9"></a>èƒ¶å›Šç½‘ç»œåœ¨MNISTæ•°æ®é›†ä¸­çš„åº”ç”¨</h3><p><img src="https://cdn-images-1.medium.com/max/1000/0*EXnVG4QgSdxLBt0g.png#width=" alt><a href="http://www.machinelearningtutorial.net/2018/01/11/dynamic-routing-between-capsules-a-novel-architecture-for-convolutional-neural-networks/" target="_blank" rel="noopener">ç”±èƒ¶å›Šç½‘ç»œæ‰§è¡Œçš„è§’åº¦ä¼°è®¡</a></p>
<p><strong><em>ç°åœ¨ï¼Œä¸‹ä¸€æ­¥è‡³å…³é‡è¦ï¼š</em></strong></p>
<p>å°±åƒä¸åŒå±‚æ¬¡çš„æ·±å±‚CNNä¸­çš„å±‚å­¦ä¹ å›¾åƒçš„ä¸åŒè¯­ä¹‰å±æ€§ï¼ˆå†…å®¹ï¼Œçº¹ç†ï¼Œæ ·å¼ç­‰ï¼‰ä¸€æ ·ï¼Œèƒ¶å›Šä¹Ÿå¯ä»¥ç»„ç»‡æˆä¸åŒçš„å±‚æ¬¡ã€‚åœ¨ä¸€ä¸ªçº§åˆ«çš„èƒ¶å›Šè¿›è¡Œé¢„æµ‹ï¼Œäº†è§£ç‰©ä½“çš„å½¢çŠ¶ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™æ›´é«˜çº§åˆ«çš„èƒ¶å›Šï¼Œè¿™äº›èƒ¶å›Šå¯ä»¥äº†è§£æ–¹å‘ã€‚å½“å¤šä¸ªé¢„æµ‹ä¸€è‡´æ—¶ï¼Œæ›´é«˜çº§åˆ«çš„é¢„æµ‹å˜å¾—æ´»è·ƒã€‚<a href="https://www.ijcai.org/Proceedings/81-2/Papers/019.pdf" target="_blank" rel="noopener">æ­¤è¿‡ç¨‹è¢«æè¿°ä¸ºåŠ¨æ€è·¯ç”±ï¼Œæˆ‘ç°åœ¨å°†æ›´è¯¦ç»†åœ°è®¨è®ºã€‚</a></p>
<p><strong><em>é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé€æ­¥çš„èƒ¶å›Šæ¶æ„æ¥åˆ†ç±»MNISTæ•°æ®é›†ï¼š</em></strong></p>
<p>ç¬¬ä¸€å±‚æœ‰ä¸€ä¸ªç»å…¸çš„å·ç§¯å±‚ã€‚åœ¨ç¬¬äºŒå±‚ä¸­ï¼Œåœ¨ç§°ä¸º<em>ä¸»è¦èƒ¶å›Š</em>çš„å±‚ä¸­æ‰§è¡Œå·ç§¯å¤„ç†ï¼Œå…¶ä¸­åº”ç”¨è¯¥<code>squash</code>å‡½æ•°ã€‚æ¯ä¸ªä¸»è¦èƒ¶å›Šæ¥æ”¶å›¾åƒçš„ä¸€ä¸ªå°åŒºåŸŸä½œä¸ºè¾“å…¥ï¼ˆç§°ä¸ºå…¶æ„Ÿå—é‡ï¼‰ï¼Œå¹¶ä¸”å®ƒè¯•å›¾æ£€æµ‹ç‰¹å®šå›¾æ¡ˆçš„å­˜åœ¨å’Œå§¿åŠ¿ - ä¾‹å¦‚ï¼Œåœ†åœˆã€‚</p>
<p>æ›´é«˜å±‚ä¸­çš„èƒ¶å›Šï¼ˆç§°ä¸ºè·¯ç”±èƒ¶å›Šï¼‰æ£€æµ‹æ›´å¤§å’Œæ›´å¤æ‚çš„å¯¹è±¡ï¼Œä¾‹å¦‚æ•°å­—8ï¼Œç”±ä¸¤ä¸ªåœ†åœˆç»„æˆã€‚ç„¶åä»–ä»¬ä½¿ç”¨ä¸€ç§æ–°é¢–çš„æŒ¤å‹åŠŸèƒ½æ¥ä¿è¯è¿™äº›çŸ¢é‡çš„é•¿åº¦åœ¨0åˆ°1ä¹‹é—´ã€‚</p>
<p>åœ¨ä¸»èƒ¶å›Šå±‚ä¹‹å‰æ–½åŠ æ ‡å‡†å·ç§¯å±‚ï¼Œå¹¶è·å¾—9Ã—9Ã—256çš„è¾“å‡ºã€‚åœ¨ä¸»èƒ¶å›Šå±‚ä¸­åº”ç”¨å…·æœ‰32ä¸ªé€šé“çš„æ–°å·ç§¯è¿‡ç¨‹ï¼Œæ­¥å¹…ä¸º2.ç„¶è€Œï¼Œå°†å…¶ä¸å…¶ä»–å·ç§¯è¿‡ç¨‹åˆ†å¼€çš„è¿™ä¸ªç‰¹å¾æ˜¯å‹ç¼©çš„åŠŸèƒ½ã€‚æœ€åï¼Œè¿™ç»™å‡ºäº†ä¸»è¦èƒ¶å›Šçš„è¾“å‡ºã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*ih6faUAZq9rhpo8sOFKYSw.gif#width=" alt><a href="https://medium.freecodecamp.org/understanding-capsule-networks-ais-alluring-new-architecture-bdb228173ddc" target="_blank" rel="noopener">åˆçº§èƒ¶å›Šçš„å·ç§¯è¿‡ç¨‹</a></p>
<p>è¿™æä¾›äº†6x6è¾“å‡ºã€‚ç„¶è€Œï¼Œåœ¨èƒ¶å›Šå±‚ä¸­ï¼Œå®ç°åŠ¨æ€è·¯ç”±ç®—æ³•ï¼Œä½¿å¾—è¿™äº›8é•¿åº¦è¾“å‡ºDigitCapså‘é‡çš„32ä¸ªè¾“å‡ºç”±äºå…·æœ‰ç¬¬ä¸‰å±‚åŠ¨æ€è·¯ç”±çš„èƒ¶å›Šå±‚è€Œè·å¾—ï¼ˆé€åè®®è·¯ç”±ç®—æ³•ï¼‰ ã€‚é€åè®®ç®—æ³•åŒ…æ‹¬åè®®ï¼ˆæ£€æµ‹å’Œè·¯ç”±ï¼‰æ›´æ–°çš„å‡ æ¬¡è¿­ä»£ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*k29n44uHy_rrfgKO2qLvGQ.png#width=" alt><a href="https://medium.freecodecamp.org/understanding-capsule-networks-ais-alluring-new-architecture-bdb228173ddc" target="_blank" rel="noopener">Capulelå±‚</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">CapsNet</span>ï¼ˆ<span class="title">input_shape</span>ï¼Œ<span class="title">n_class</span>ï¼Œ<span class="title">num_routing</span>ï¼‰ï¼š</span></span><br><span class="line"><span class="function">    â€œâ€â€</span></span><br><span class="line"><span class="function">    èƒ¶å›Šç½‘ç»œçš„<span class="title">MNIST</span>æ•°æ®é›†ã€‚</span></span><br><span class="line"><span class="function">       ï¼šâ€œ<span class="title">input_shape</span>â€å‚æ•°ï¼š<span class="title">vdata</span>å½¢çŠ¶ï¼Œ3<span class="title">d</span>ï¼Œ[<span class="title">w</span>ï¼Œ<span class="title">h</span>ï¼Œ<span class="title">c</span>]</span></span><br><span class="line"><span class="function">       ï¼šâ€œ<span class="title">n_class</span>â€å‚æ•°ï¼šç±»çš„æ•°é‡</span></span><br><span class="line"><span class="function">       ï¼šâ€œ<span class="title">num_routing</span>â€å‚æ•°ï¼šåŠ¨æ€è·¯ç”±è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"><span class="function">       ï¼šåŠŸèƒ½è¾“å‡ºï¼šä¸¤ä¸ª<span class="title">Keras</span>æ¨¡å‹ï¼Œç¬¬ä¸€ä¸ªç”¨äºè®­ç»ƒï¼Œç¬¬äºŒä¸ªç”¨äº<span class="title">evalaution</span>ã€‚</span></span><br><span class="line"><span class="function">            `<span class="title">eval_model</span>`ç”¨äºåŒæ—¶è¿›è¡Œè®­ç»ƒã€‚</span></span><br><span class="line"><span class="function">    â€œâ€â€</span></span><br><span class="line">    X = layers.Inputï¼ˆå½¢çŠ¶= input_shapeï¼‰</span><br><span class="line"></span><br><span class="line">    ï¼ƒ <span class="number">1</span>å±‚ï¼šå·ç§¯å±‚ï¼ˆConv2Dï¼‰</span><br><span class="line">    å™¨CONV1 = layers.Conv2Dï¼ˆè¿‡æ»¤å™¨= <span class="number">256</span>ï¼Œkernel_size = <span class="number">9</span>ï¼Œæ­¥å¹…= <span class="number">1</span>ï¼Œå¡«å……= <span class="string">'æœ‰æ•ˆ'</span>ï¼Œæ´»åŒ–= <span class="string">' RELU '</span>ï¼Œåå­—= <span class="string">' CONV1 '</span>ï¼‰ï¼ˆxï¼‰çš„</span><br><span class="line"></span><br><span class="line">    ï¼ƒ <span class="number">2</span>å±‚ï¼šConv2Då£çƒæ´»åŒ–ï¼Œ[æ— ï¼Œnum_capsuleï¼Œdim_capsule]æ¥å›æ•´å½¢ã€‚</span><br><span class="line">    primarycaps = PrimaryCapï¼ˆCONV1ï¼Œdim_capsule = <span class="number">8</span>ï¼Œn_channels = <span class="number">32</span>ï¼Œkernel_size = <span class="number">9</span>ï¼Œæ­¥å¹…= <span class="number">2</span>ï¼Œå¡«å……= <span class="string">'æœ‰æ•ˆ'</span>ï¼‰</span><br><span class="line"></span><br><span class="line">    ï¼ƒ <span class="number">3</span>å±‚ï¼šèƒ¶å›Šå±‚ã€‚è¿è¡Œï¼šåŠ¨æ€è·¯ç”±ç®—æ³•ã€‚</span><br><span class="line">    digitcaps = CapsuleLayerï¼ˆnum_capsule = n_classï¼Œdim_capsule = <span class="number">16</span>ï¼Œnum_routing = num_routingï¼Œ</span><br><span class="line">                             name = <span class="string">' digitcaps '</span>ï¼‰ï¼ˆprimarycapsï¼‰</span><br><span class="line"></span><br><span class="line">    ï¼ƒ <span class="number">4</span>å±‚ï¼š</span><br><span class="line">    ï¼ƒå¦‚æœä½ ä½¿ç”¨Tensorflowï¼Œä½ å¯ä»¥è·³è¿‡è¿™ä¸ªä¼šè¯:)</span><br><span class="line"></span><br><span class="line">    out_caps =é•¿åº¦ï¼ˆåç§°= <span class="string">' capsnet '</span>ï¼‰ï¼ˆdigitcapsï¼‰</span><br></pre></td></tr></table></figure></p>
<p>åŠ¨æ€è·¯ç”±åœ¨<a href="https://github.com/deeplearningturkiye/kapsul-agi-capsule-network" target="_blank" rel="noopener">capsulelayers.py</a>ç±»<code>CapsuleLayer (layers.Layer)</code>å‡½æ•°ä¸­å®šä¹‰ã€‚ç”±äºè¯¥è®¡ç®—æ­¥éª¤ï¼Œåœ¨å›¾åƒä¸­ä¸å­˜åœ¨å¯¹è±¡çš„åŒºåŸŸä¸­çŸ¢é‡å€¼è¾ƒå°ï¼Œè€Œæ£€æµ‹åŒºåŸŸä¸­çš„çŸ¢é‡å°ºå¯¸æ ¹æ®å±æ€§è€Œå˜åŒ–ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ç±» CapsuleLayerï¼ˆå±‚ã€‚å±‚ï¼‰ï¼š</span><br><span class="line">    â€œâ€â€</span><br><span class="line">    èƒ¶å›Šå±‚ã€‚å®ƒç±»ä¼¼äºå¯†é›†å±‚ã€‚å¯†é›†å±‚æœ‰`in_num`è¾“å…¥ï¼Œæ¯ä¸ªéƒ½æ˜¯æ ‡é‡ï¼Œè¾“å‡º</span><br><span class="line">    æ¥è‡ªå‰ä¸€å±‚çš„ç¥ç»å…ƒï¼Œå®ƒæœ‰<span class="string">'out_num`è¾“å‡ºç¥ç»å…ƒã€‚CapsuleLayeråªæ˜¯æ‰©å±•äº†ç¥ç»å…ƒçš„è¾“å‡º</span></span><br><span class="line"><span class="string">    ä»æ ‡é‡åˆ°çŸ¢é‡ã€‚æ‰€ä»¥å®ƒçš„è¾“å…¥å½¢çŠ¶= [Noneï¼Œinput_num_capsuleï¼Œinput_dim_capsule]å’Œè¾“å‡ºå½¢çŠ¶= \</span></span><br><span class="line"><span class="string">    [Noneï¼Œnum_capsuleï¼Œdim_capsule]ã€‚å¯¹äºå¯†é›†å±‚ï¼Œinput_dim_capsule = dim_capsule = 1ã€‚</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ï¼šparam num_capsuleï¼šæ­¤å›¾å±‚ä¸­çš„èƒ¶å›Šæ•°</span></span><br><span class="line"><span class="string">    ï¼šparam dim_capsuleï¼šæ­¤å±‚ä¸­èƒ¶å›Šçš„è¾“å‡ºå‘é‡çš„ç»´åº¦</span></span><br><span class="line"><span class="string">    ï¼šparam routingsï¼šè·¯ç”±ç®—æ³•çš„è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"><span class="string">    â€œâ€â€</span></span><br><span class="line"><span class="string">    DEF  __init__ï¼ˆè‡ªï¼Œnum_capsuleï¼Œdim_capsuleï¼Œè·¯çº¿= 3ï¼Œ</span></span><br><span class="line"><span class="string">                 kernel_initializer = '</span> glorot_uniform <span class="string">'ï¼Œ</span></span><br><span class="line"><span class="string">                 ** kwargsï¼‰ï¼š</span></span><br><span class="line"><span class="string">        è¶…çº§ï¼ˆCapsuleLayerï¼Œè‡ªæˆ‘ï¼‰ã€‚__init __ï¼ˆ** kwargsï¼‰</span></span><br><span class="line"><span class="string">        self .nuâ€‹â€‹m_capsule = num_capsule</span></span><br><span class="line"><span class="string">        self .dim_capsule = dim_capsule</span></span><br><span class="line"><span class="string">        è‡ªæˆ‘ .routings =è·¯çº¿</span></span><br><span class="line"><span class="string">        self .kernel_initializer = initializers.getï¼ˆkernel_initializerï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def  buildï¼ˆselfï¼Œinput_shapeï¼‰ï¼š</span></span><br><span class="line"><span class="string">        assert  lenï¼ˆinput_shapeï¼‰&gt; =  3ï¼Œâ€œè¾“å…¥Tensoråº”è¯¥æœ‰shape = [Noneï¼Œinput_num_capsuleï¼Œinput_dim_capsule] â€</span></span><br><span class="line"><span class="string">        self .input_num_capsule = input_shape [ 1 ]</span></span><br><span class="line"><span class="string">        self .input_dim_capsule = input_shape [ 2 ]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        ï¼ƒå˜æ¢çŸ©é˜µ</span></span><br><span class="line"><span class="string">        self .W =  self .add_weightï¼ˆshape = [ self .nuâ€‹â€‹m_capsuleï¼Œself .input_num_capsuleï¼Œ</span></span><br><span class="line"><span class="string">                                        self .dim_capsuleï¼Œself .input_dim_capsule]ï¼Œ</span></span><br><span class="line"><span class="string">                                 initializer = self .kernel_initializerï¼Œ</span></span><br><span class="line"><span class="string">                                 name = '</span> W <span class="string">'ï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        self .built =  çœŸçš„</span></span><br></pre></td></tr></table></figure></p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨<a href="https://github.com/deeplearningturkiye/kapsul-agi-capsule-network" target="_blank" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ°æ‰€æœ‰çš„å·¥ä½œã€‚<br><a name="0fa8"></a></p>
<h3 id="æµ‹è¯•æ€§èƒ½ğŸ…"><a href="#æµ‹è¯•æ€§èƒ½ğŸ…" class="headerlink" title="æµ‹è¯•æ€§èƒ½ğŸ…"></a><a href="#0fa8"></a>æµ‹è¯•æ€§èƒ½ğŸ…</h3><p>å½“ä½¿ç”¨10,000å›¾åƒæµ‹è¯•æ•°æ®é›†è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬è·å¾—äº†<a href="http://yann.lecun.com/exdb/mnist/" target="_blank" rel="noopener">MNIST</a>æ•°æ®é›†çš„<strong>99.61ï¼…</strong>å‡†ç¡®åº¦ï¼Œå¹¶ä¸”è·å¾—äº†<a href="https://www.kaggle.com/zalando-research/fashionmnist" target="_blank" rel="noopener">FASHION MNIST</a>æ•°æ®é›†çš„<strong>92.22ï¼…</strong>å‡†ç¡®åº¦ã€‚æ˜¯å•Šï¼ğŸ˜<br>å¯¹äºå…·æœ‰<strong>80ï¼…é‡å </strong>æ‰‹å†™æ•°å­—çš„<strong>MultiMNIST</strong>æ•°æ®é›†ï¼Œå½“æ•°æ®é‡å æ—¶ï¼Œèƒ¶å›Šç½‘ç»œçš„æ€§èƒ½ä¼¼ä¹éå¸¸å¥½ï¼Œç‰¹åˆ«æ˜¯ä¸CNNæ¨¡å‹ç›¸æ¯”æ—¶ã€‚<br><img src="https://cdn-images-1.medium.com/max/1000/1*SHDKu_mb0DRp0OwTbWCPtg.jpeg#width=" alt><a href="https://arxiv.org/pdf/1710.09829.pdf" target="_blank" rel="noopener">MultiMNISTæ•°æ®é›†çš„èƒ¶å›Šç½‘ç»œè¾“å‡º</a></p>
<p><a name="3689"></a></p>
<h3 id="MNISTçš„50çºªå…ƒå·¥ä½œæ—¶é—´â³"><a href="#MNISTçš„50çºªå…ƒå·¥ä½œæ—¶é—´â³" class="headerlink" title="MNISTçš„50çºªå…ƒå·¥ä½œæ—¶é—´â³"></a><a href="#3689"></a>MNISTçš„50çºªå…ƒå·¥ä½œæ—¶é—´â³</h3><p>ä¸CNNç›¸æ¯”ï¼Œç”±äºå…¶è®¡ç®—å¤æ‚æ€§ï¼Œèƒ¶å›Šç½‘ç»œçš„è®­ç»ƒæ—¶é—´è¾ƒæ…¢ã€‚ä»¥ä¸‹æ˜¯å„ç§ç¡¬ä»¶å’Œäº‘æœåŠ¡å™¨ä¸Šçš„50çºªå…ƒåŸ¹è®­æ—¶é—´ï¼š<br><img src="https://cdn-images-1.medium.com/max/1000/1*tL-IKEmfUiKE0cOmJW-c4g.png#width=" alt><br><img src="https://cdn-images-1.medium.com/max/1000/1*3tX5wuhfLPeinWsdEemi3Q.jpeg#width=" alt><a href="https://thescinder.files.wordpress.com/2017/06/goingtoneedagpuimgflip1.jpg" target="_blank" rel="noopener">å½“ç„¶ ï¼šï¼‰</a><br>è¦ä½¿ç”¨Google Colabæ”¯æŒï¼Œæœ€å¸å¼•äººçš„é€‰é¡¹ï¼Œè¯·é˜…è¯»&gt; <a href="https://medium.com/deep-learning-turkey/google-colab-free-gpu-tutorial-e113627b9f5d" target="_blank" rel="noopener">Google Colabå…è´¹GPUæ•™ç¨‹ï¼</a></p>
<p><a name="d950"></a></p>
<h3 id="âœ”ï¸Proså’ŒâŒConsof-Capsule-Networks"><a href="#âœ”ï¸Proså’ŒâŒConsof-Capsule-Networks" class="headerlink" title="âœ”ï¸Proså’ŒâŒConsof Capsule Networks"></a><a href="#d950"></a>âœ”ï¸Proså’ŒâŒConsof Capsule Networks</h3><p>ä¸å…¶ä»–æœ€å…ˆè¿›çš„æŠ€æœ¯ç›¸æ¯”ï¼Œâœ”ï¸Capsuleç½‘ç»œåœ¨MNISTæ•°æ®é›†ä¸­å–å¾—äº†æœ€å¤§çš„æˆåŠŸã€‚</p>
<p>âœ”ï¸ä½¿ç”¨è¾ƒå°çš„æ•°æ®é›†æˆåŠŸã€‚ï¼ˆé€šè¿‡å¼ºåˆ¶æ¨¡å‹å­¦ä¹ èƒ¶å›Šä¸­çš„ç‰¹å¾å˜ä½“ï¼Œå®ƒå¯ä»¥ç”¨æ›´å°‘çš„è®­ç»ƒæ•°æ®æ›´æœ‰æ•ˆåœ°æ¨æ–­å¯èƒ½çš„å˜ä½“ã€‚ï¼‰</p>
<p>âœ”ï¸é€åè®®ç®—æ³•å…è®¸æˆ‘ä»¬åŒºåˆ†é‡å å›¾åƒä¸­çš„å¯¹è±¡ã€‚</p>
<p>âœ”ï¸ä½¿ç”¨æ¿€æ´»çŸ¢é‡æ›´å®¹æ˜“è§£é‡Šå›¾åƒã€‚</p>
<p>âœ”ï¸Capsuleç½‘ç»œç»´æŠ¤å¯¹è±¡çš„ç­‰æ•ˆæ€§ï¼Œè‰²è°ƒï¼Œå§¿åŠ¿ï¼Œåç…§ç‡ï¼Œçº¹ç†ï¼Œå˜å½¢ï¼Œé€Ÿåº¦å’Œä½ç½®ç­‰ä¿¡æ¯ã€‚</p>
<hr>
<p>ä¸ç°æœ‰æŠ€æœ¯æ¨¡å‹ç›¸æ¯”ï¼ŒâŒCIFAR10åœ¨æ•°æ®é›†æ–¹é¢æ²¡æœ‰æˆåŠŸã€‚</p>
<p>âŒå°šæœªåœ¨éå¸¸å¤§çš„æ•°æ®é›†ä¸Šè¿›è¡Œæµ‹è¯•ã€‚</p>
<p>âŒç”±äºåè®®è·¯ç”±ç®—æ³•ï¼Œè®­ç»ƒæ¨¡å‹éœ€è¦æ›´å¤šæ—¶é—´ã€‚</p>
<p>å…·æœ‰ä¸åŒè·¯ç”±ç®—æ³•çš„èƒ¶å›Šç½‘ç»œæ¨¡å‹çš„åº”ç”¨è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªéœ€è¦æ›´å¤šå®éªŒå¹¶ä¸”ä»åœ¨å¼€å‘çš„ä¸»é¢˜ã€‚</p>
<blockquote>
<p><a href="https://www.cs.toronto.edu/~hinton/csc2535/notes/lec6b.pdf" target="_blank" rel="noopener">â€œå·ç§¯ç¥ç»ç½‘ç»œæ³¨å®šå¤±è´¥â€ Geoffrey Hinton</a><br><a name="cd5c"></a></p>
</blockquote>
<h3 id="å¦ä¸€ä¸ªä¾‹å­"><a href="#å¦ä¸€ä¸ªä¾‹å­" class="headerlink" title="å¦ä¸€ä¸ªä¾‹å­"></a><a href="#cd5c"></a>å¦ä¸€ä¸ªä¾‹å­</h3><p><img src="https://cdn-images-1.medium.com/max/750/1*KSQA6cFQK6EiZ0oerCx7BQ.png#width=" alt><br><img src="https://cdn-images-1.medium.com/max/750/1*ifzv7ASKL7TyJU-4GZblbw.png#width=" alt><a href="https://hackernoon.com/capsule-networks-are-shaking-up-ai-heres-how-to-use-them-c233a0971952" target="_blank" rel="noopener">å·ç§¯ç¥ç»ç½‘ç»œçš„é‡è¦å®‰å…¨é—®é¢˜ä¸¾ä¾‹</a></p>
<p><strong>åœ¨ä¸Šé¢ç¤ºå‡ºçš„ç¤ºä¾‹ä¸­ï¼Œå½“ä»…æ”¹å˜Kim Kardashiançš„å›¾åƒçš„æ–¹å‘æ—¶ï¼Œé¢„æµ‹å‡†ç¡®åº¦æ˜¾ç€ä¸‹é™ã€‚</strong>åœ¨å³è¾¹çš„å›¾åƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ¤æ–­å‡ºä¸€åªçœ¼ç›å’Œå¥¹çš„å˜´æ˜¯ä¸æ­£ç¡®æ”¾ç½®çš„ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªäººçš„å‡è®¾ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†0.90çš„é¢„æµ‹åˆ†æ•°ã€‚</p>
<p>å—è¿‡è‰¯å¥½è®­ç»ƒçš„CNNåœ¨è¿™ç§æ–¹æ³•ä¸Šå­˜åœ¨ä¸€äº›éšœç¢ã€‚é™¤äº†å®¹æ˜“è¢«å…·æœ‰ä¸æ­£ç¡®ä½ç½®çš„ç‰¹å¾çš„å›¾åƒæ¬ºéª—ä¹‹å¤–ï¼Œå½“ä»¥ä¸åŒæ–¹å‘è§‚çœ‹å›¾åƒæ—¶CNNä¹Ÿå®¹æ˜“æ··æ·†ã€‚</p>
<p>æ¯«æ— ç–‘é—®ï¼ŒCNNå¯èƒ½å—åˆ°<a href="https://heartbeat.fritz.ai/introduction-to-generative-adversarial-networks-gans-35ef44f21193" target="_blank" rel="noopener">å¯¹æŠ—æ€§æ”»å‡»çš„</a>å½±å“ã€‚è¿™æ˜¯ä¸€ä¸ªå¯èƒ½å¯¼è‡´å®‰å…¨é—®é¢˜çš„é‡è¦çº¦æŸï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬å°†æ½œåœ¨æ¨¡å¼åµŒå…¥åˆ°å¯¹è±¡ä¸­ä»¥ä½¿å…¶çœ‹èµ·æ¥åƒå…¶ä»–ä¸œè¥¿æ—¶ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼Œ<em>æˆ‘ä»¬å¯ä»¥é€šè¿‡Capsule Networksè§£å†³è¿™ä¸ªé—®é¢˜ï¼</em></p>
<p><strong>âœ¨èƒ¶å›Šç½‘ç»œçš„æ¨¡å‹æ˜¯å€¼å¾—å’Œæœ‰å‰é€”çš„ï¼</strong></p>
<hr>
<p>ğŸ“ <strong>æˆ‘ä»¬å…³äºèƒ¶å›Šç½‘ç»œçš„å­¦æœ¯è®ºæ–‡ï¼š</strong><a href="https://ieeexplore.ieee.org/document/8404385/" target="_blank" rel="noopener">ä½¿ç”¨èƒ¶å›Šç½‘ç»œè¯†åˆ«æ‰‹è¯­</a>å¬åŠ›å’Œè¯­è¨€éšœç¢è€…ç»§ç»­é€šè¿‡å”‡è¯»æˆ–æ‰‹å’Œè„¸çš„è¿åŠ¨ï¼ˆå³æ‰‹è¯­ï¼‰è¿›è¡Œäº¤æµã€‚èƒ¶å›Šç½‘ç»œå¯ä»¥å¸®åŠ©ç¡®ä¿æ®‹ç–¾äººä¸ä»…å¯ä»¥å……åˆ†å‚ä¸ç”Ÿæ´»ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸ä»–äººçš„å¥åº·å’Œæœ‰æ•ˆæ²Ÿé€šæ¥æé«˜ç”Ÿæ´»è´¨é‡ã€‚</p>
<p><em>åœ¨è¿™é¡¹å·¥ä½œä¸­; Capsule Networks ä»¥</em><strong><em>94.2ï¼…çš„</em></strong><em>éªŒè¯å‡†ç¡®åº¦è¯†åˆ«æ‰‹è¯­çš„æ•°å­—ã€‚</em></p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*Lzr1bVSB5UXVf6RXQwVbZg.png#width=" alt><a href="https://github.com/ardamavi/Sign-Language-Digits-Dataset" target="_blank" rel="noopener">æ‰‹è¯­æ•°å­—æ•°æ®é›†ï¼ŒArda Mavi ve Zeynep Dikle</a></p>
<hr>
<p><a name="9d62"></a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><a href="#9d62"></a>å‚è€ƒ</h3><p>[1] Sabourï¼ŒS.ï¼ŒFrosstï¼ŒN. ve Hintonï¼ŒGEï¼Œâ€œ <a href="https://arxiv.org/pdf/1710.09829.pdf" target="_blank" rel="noopener">èƒ¶å›Šä¹‹é—´çš„åŠ¨æ€è·¯ç”±</a> â€ï¼ŒarXiv preprint arXivï¼š1710.09829,2017ã€‚<br>[2] Hintonï¼ŒGEï¼ŒKrizhevsky A. ve Wangï¼ŒSDâ€œ <a href="http://www.cs.toronto.edu/~fritz/absps/transauto6.pdf" target="_blank" rel="noopener">è½¬æ¢è‡ªåŠ¨ç¼–ç å™¨</a>ã€‚â€å›½é™…äººå·¥ç¥ç»ç½‘ç»œä¼šè®®ã€‚æ–¯æ™®æ—æ ¼ï¼ŒæŸæ—ï¼Œæµ·å¾·å ¡ï¼Œ2011å¹´ã€‚<br>[3] <a href="https://www.cs.toronto.edu/~hinton/csc2535/notes/lec6b.pdf" target="_blank" rel="noopener">CSC2535ï¼š2013é«˜çº§æœºå™¨å­¦ä¹ è®¤çœŸå¯¹å¾…é€†å‘å›¾å½¢</a>ï¼ŒGeoffrey Hintonå¤šä¼¦å¤šå¤§å­¦è®¡ç®—æœºç§‘å­¦ç³»ï¼Œ2013å¹´ã€‚<br>[4] MNISTæ•°æ®é›†çš„èƒ¶å›Šç½‘ç»œå®ç°ï¼ˆåœŸè€³å…¶è¯­è§£é‡Šï¼Œæ·±åº¦å­¦ä¹ TÃ¼rkiyeï¼Œ<a href="https://github.com/deeplearningturkiye/kapsul-agi-capsule-network" target="_blank" rel="noopener">kapsul-agi-capsule-network</a>ã€‚<br>[5] <a href="https://ieeexplore.ieee.org/document/8404385/" target="_blank" rel="noopener">ä½¿ç”¨èƒ¶å›Šç½‘ç»œè¯†åˆ«æ‰‹è¯­</a>ï¼Œ<a href="https://www.linkedin.com/in/fuatbeser/" target="_blank" rel="noopener">FuatBeÅŸer</a>ï¼Œ<a href="http://www.ayyucekizrak.com/" target="_blank" rel="noopener">MerveAyyÃ¼ceKIZRAK</a>ï¼Œ<a href="http://www.yildiz.edu.tr/~bbolat/" target="_blank" rel="noopener">BÃ¼lentBOLAT</a>ï¼Œ<a href="http://www.yildiz.edu.tr/~tulay/" target="_blank" rel="noopener">TÃ¼layYILDIRIM</a>ï¼Œ<a href="https://github.com/ayyucekizrak/Kapsul-Aglari-ile-Isaret-Dili-Tanima" target="_blank" rel="noopener">httpsï¼š//github.com/ayyucekizrak/Kapsul-Aglari-ile-Isaret-Dili-Tanima</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/yuque/Capsule Networksï¼šä¸€ç§å…¨æ–°ä¸”æå…·å¸å¼•åŠ›çš„AIæ¶æ„/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/F-35æ˜¯1.4ä¸‡äº¿ç¾å…ƒçš„å›½å®¶ç¾éš¾" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/yuque/F-35æ˜¯1.4ä¸‡äº¿ç¾å…ƒçš„å›½å®¶ç¾éš¾/">F-35æ˜¯1.4ä¸‡äº¿ç¾å…ƒçš„å›½å®¶ç¾éš¾</a>
    </h1>
  

        
        <a href="/2018/12/21/yuque/F-35æ˜¯1.4ä¸‡äº¿ç¾å…ƒçš„å›½å®¶ç¾éš¾/" class="archive-article-date">
  	<time datetime="2018-12-21T05:34:55.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://medium.com/war-is-boring/the-f-35-is-a-terrible-fighter-bomber-and-attacker-and-unfit-for-aircraft-carriers-c6e36763574b" target="_blank" rel="noopener">é“¾æ¥</a></p>
<p>JSFæ˜¯ä¸€ä¸ªå¯æ€•çš„æˆ˜æ–—æœºï¼Œè½°ç‚¸æœºå’Œæ”»å‡»è€… - å¹¶ä¸”ä¸é€‚åˆèˆªç©ºæ¯èˆ°ã€‚<br>F-35åœ¨æˆ˜æ–—å‡†å¤‡å°±ç»ªä¹‹å‰è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚ è¿™æ˜¯ç°ä»»é€€ä¼‘è¿è¥æµ‹è¯•ä¸è¯„ä¼°æ€»ç›‘è¿ˆå…‹å°”å‰å°”æ‘©åœ¨ä¸Šä¸€ä»½å¹´åº¦æŠ¥å‘Šä¸­çš„ç¦»èŒä¿¡æ¯ã€‚<br>è”åˆæ”»å‡»æˆ˜æ–—æœºè®¡åˆ’å·²ç»æ¶ˆè€—äº†è¶…è¿‡1000äº¿ç¾å…ƒå’Œè¿‘25å¹´ã€‚ è¦å®ŒæˆåŸºæœ¬å¼€å‘é˜¶æ®µï¼Œè‡³å°‘éœ€è¦10äº¿ç¾å…ƒå’Œä¸¤å¹´å¤šã€‚ å‰å°”è«å°”å‘Šè¯‰å›½ä¼šï¼Œäº”è§’å¤§æ¥¼å’Œå…¬ä¼—ï¼Œå³ä½¿æœ‰å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±æŠ•å…¥ï¼Œâ€œæ‰€æœ‰å˜ç§çš„è¿ä½œé€‚ç”¨æ€§ä»ç„¶ä½äºæœåŠ¡éƒ¨é—¨çš„é¢„æœŸã€‚â€<br>Gilmoreè¯¦ç»†ä»‹ç»äº†è¯¥è®¡åˆ’å­˜åœ¨çš„ä¸€ç³»åˆ—é—ç•™é—®é¢˜ï¼Œæœ‰æ—¶ç”šè‡³æ˜¯æ¶åŒ–é—®é¢˜ï¼ŒåŒ…æ‹¬æ•°ç™¾ä¸ªå…³é”®æ€§èƒ½ç¼ºé™·å’Œç»´æŠ¤é—®é¢˜ã€‚ ä»–è¿˜æå‡ºäº†ä¸€ä¸ªä¸¥è‚ƒçš„é—®é¢˜ï¼Œå³ç©ºå†›çš„F-35Aèƒ½å¦åœ¨ç©ºå¯¹ç©ºæˆ–ç©ºå¯¹åœ°ä»»åŠ¡ä¸­å–å¾—æˆåŠŸï¼Œæµ·å†›é™†æˆ˜é˜Ÿçš„F-35Bæ˜¯å¦å¯ä»¥è¿›è¡ŒåŸºæœ¬çš„è¿‘è·ç¦»ç©ºä¸­æ”¯æ´ï¼Œä»¥åŠæµ·å†›æ˜¯å¦èƒ½å¤Ÿ F-35Cé€‚ç”¨äºèˆªç©ºæ¯èˆ°ã€‚<br>äº‹å®ä¸Šï¼Œä»–å‘ç°â€œå¦‚æœåœ¨æˆ˜æ–—ä¸­ä½¿ç”¨ï¼ŒF-35é£æœºå°†éœ€è¦æ”¯æŒæ¥å®šä½å’Œé¿å¼€ç°ä»£å¨èƒåœ°é¢é›·è¾¾ï¼Œè·å–ç›®æ ‡ï¼Œå¹¶ä¸”ç”±äºæœªè§£å†³çš„æ€§èƒ½ç¼ºé™·å’Œæœ‰é™çš„æ­¦å™¨è¿è¾“å¯ç”¨æ€§è€Œä½¿æ•Œæ–¹æˆ˜æ–—æœºç¼–é˜Ÿâ€œã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545370645879-05f3b68c-3916-4631-a30e-605fbcaa9402.png#align=left&amp;display=inline&amp;height=39&amp;originHeight=39&amp;originWidth=60&amp;status=done&amp;width=60" alt><br>åœ¨ä¸€ä»½å…¬å¼€å£°æ˜ä¸­ï¼ŒF-35è”åˆè®¡åˆ’åŠå…¬å®¤è¯•å›¾é©³å›å‰å°”æ‘©çš„æŠ¥å‘Šï¼Œå£°ç§°â€œæ‰€æœ‰è¿™äº›é—®é¢˜éƒ½æ˜¯æ—¥æœ¬çŸ¥è¯†äº§æƒç»„ç»‡ï¼Œç¾å›½æœåŠ¡æœºæ„ï¼Œæˆ‘ä»¬çš„å›½é™…åˆä½œä¼™ä¼´å’Œæˆ‘ä»¬çš„è¡Œä¸šæ‰€ç†ŸçŸ¥çš„ã€‚â€<br>JPOå¯¹ä¼—å¤šé—®é¢˜çš„æ‰¿è®¤æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ²¡æœ‰è¿¹è±¡è¡¨æ˜è¯¥åŠå…¬å®¤æœ‰ä»»ä½•è®¡åˆ’ - åŒ…æ‹¬æˆæœ¬å’Œè¿›åº¦é‡æ–°ä¼°ç®— - ä»¥è§£å†³ç›®å‰å·²çŸ¥é—®é¢˜è€Œä¸å·å·¥å‡æ–™ã€‚<br>æ˜¾ç„¶ï¼Œä»–ä»¬è¿˜æ²¡æœ‰è®¡åˆ’åº”å¯¹å¹¶ä¸ºå°†æ¥å››å¹´å³å°†è¿›è¡Œçš„æ›´åŠ ä¸¥æ ¼ï¼Œå‘å±•å’Œè¿è¥æµ‹è¯•ä¸­å‘ç°çš„æ— æ•°æœªçŸ¥é—®é¢˜æä¾›è¡¥æ•‘ã€‚è¿™æ ·çš„è®¡åˆ’æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œåº”è¯¥ç”±å®é™…è§£å†³é—®é¢˜çš„é€Ÿåº¦è€Œä¸æ˜¯ä¸åˆ‡å®é™…çš„ç°æœ‰æ—¶é—´è¡¨æ¥æ¨åŠ¨ã€‚<br>å¦‚ä½•è§£å†³Gilmoreå‘ç°çš„ä¼—å¤šé—®é¢˜ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•æ‰èƒ½æœ€å¥½åœ°æ¨è¿›å†å²ä¸Šæœ€æ˜‚è´µçš„æ­¦å™¨è®¡åˆ’ï¼Œè¿™ä¸ªè®¡åˆ’ä¸€ç›´æ— æ³•è¾¾åˆ°è‡ªå·±éå¸¸é€‚åº¦çš„æ‰¿è¯ºï¼Ÿ<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545370694304-542d261f-be35-40fe-8a8e-ba5df980e909.png#align=left&amp;display=inline&amp;height=495&amp;originHeight=829&amp;originWidth=1250&amp;status=done&amp;width=826" alt><br><a name="31d1d5ab"></a></p>
<h4 id="ç”µå­åŒ–ç”¨äºè¯æ˜æˆæœ¬åˆç†-è€Œä¸æ˜¯æä¾›èƒ½åŠ›"><a href="#ç”µå­åŒ–ç”¨äºè¯æ˜æˆæœ¬åˆç†-è€Œä¸æ˜¯æä¾›èƒ½åŠ›" class="headerlink" title="ç”µå­åŒ–ç”¨äºè¯æ˜æˆæœ¬åˆç† - è€Œä¸æ˜¯æä¾›èƒ½åŠ›"></a><a href="#w1qwta"></a>ç”µå­åŒ–ç”¨äºè¯æ˜æˆæœ¬åˆç† - è€Œä¸æ˜¯æä¾›èƒ½åŠ›</h4><p>F-35æ­£åœ¨å‘ç¾å›½äººæ°‘å‡ºå”®ï¼Œå…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†å°±æ˜¯å…¶ä»»åŠ¡ç³»ç»Ÿï¼Œå–·æ°”å¼é£æœºä¸Šçš„å¤§é‡ç²¾å¯†ç”µå­è®¾å¤‡ã€‚ä»”ç»†é˜…è¯»æœ‰å…³F-35çš„ä»»ä½•å…³äºW-35çš„æ­£å¼æ–‡ç« å°†ä¼šå‘ç°å®ƒä»¬å‡ ä¹æ€»æ˜¯æŒ‡å‡ºå®ƒèƒ½å¤Ÿæ”¶é›†å¤§é‡ä¿¡æ¯ã€‚<br>è¿™äº›ä¿¡æ¯åº”è¯¥é€šè¿‡å…¶æ¿è½½ä¼ æ„Ÿå™¨å’Œæ•°æ®é“¾æ¥åˆ°å¤–éƒ¨ç½‘ç»œæºï¼Œç„¶åç”±F-35çš„è®¡ç®—æœºç³»ç»Ÿåˆå¹¶ï¼Œä»¥ä¾¿ä¸ºé£è¡Œå‘˜è¯†åˆ«å’Œæ˜¾ç¤ºç‰¹å®šå¨èƒï¼Œç›®æ ‡å’Œä¼´éšåŠ›å›¾ç‰‡ - å³â€œæƒ…å¢ƒâ€æ„è¯†ã€‚â€<br>è¿™ä¸ªè¿‡ç¨‹æ—¨åœ¨è®©é£è¡Œå‘˜ä¸»å®°æˆ˜åœºã€‚ç„¶è€Œï¼ŒåŸºäºè¿™äº›ç³»ç»Ÿåœ¨å¼€å‘æµ‹è¯•æœŸé—´çš„å®é™…æµ‹è¯•æ€§èƒ½ï¼Œç”µå­è®¾å¤‡å®é™…ä¸Šä¼šå¹²æ‰°é£è¡Œå‘˜çš„ç”Ÿå­˜å’Œæ™®åŠèƒ½åŠ›ã€‚<br>æ€»çš„æ¥è¯´ï¼ŒF-35çš„ä¼ æ„Ÿå™¨ï¼Œè®¡ç®—æœºå’Œè½¯ä»¶çš„é—®é¢˜ï¼ŒåŒ…æ‹¬åˆ¶é€ è™šå‡ç›®æ ‡å’ŒæŠ¥å‘Šä¸å‡†ç¡®çš„ä½ç½®ï¼Œå·²ç»éå¸¸ä¸¥é‡ï¼Œä»¥è‡³äºçˆ±å¾·åå…¹ç©ºå†›åŸºåœ°çš„æµ‹è¯•å›¢é˜Ÿå°†ä»–ä»¬è¯„ä¸ºâ€œçº¢è‰²â€ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ— æ³•è¿›è¡Œæˆ˜æ–—ã€‚ä»–ä»¬æœŸå¾…çš„ä»»åŠ¡ã€‚<br>ä¸€ä¸ªç³»ç»Ÿï¼Œå³å…‰ç”µç›®æ ‡ç³»ç»Ÿï¼ˆEOTSï¼‰ï¼Œè¢«é£è¡Œå‘˜æŒ‘é€‰å‡ºæ¥ï¼Œå…¶åˆ†è¾¨ç‡å’ŒèŒƒå›´éƒ½ä½äºç›®å‰åœ¨ä¼ ç»Ÿé£æœºä¸Šä½¿ç”¨çš„ç³»ç»Ÿã€‚ EOTSæ˜¯æ—¨åœ¨å¸®åŠ©F-35ä»è¶³å¤Ÿè¿œçš„åœ°æ–¹æ¢æµ‹å’Œæ‘§æ¯æ•Œæ–¹æˆ˜æ–—æœºä»¥ä½¿æ–—ç‹—æˆä¸ºè¿‡å»çš„ç³»ç»Ÿä¹‹ä¸€ã€‚å®ƒå®‰è£…åœ¨é è¿‘é£æœºæœºå¤´çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬ä¸€å°ç”µè§†æ‘„åƒæœºï¼Œä¸€ä¸ªçº¢å¤–æœç´¢å’Œè·Ÿè¸ªç³»ç»Ÿï¼Œä»¥åŠä¸€ä¸ªæ¿€å…‰æµ‹è·ä»ªå’ŒæŒ‡ç¤ºå™¨ã€‚<br>è¿™äº›ä¼ æ„Ÿå™¨åœ¨è®¡ç®—æœºæ§åˆ¶ä¸‹æ—‹è½¬ï¼Œä»¥åœ¨å¹¿æ³›çš„è§†é‡èŒƒå›´å†…è·Ÿè¸ªç›®æ ‡ï¼Œå¹¶åœ¨é£è¡Œå‘˜çš„å¤´ç›”é®é˜³æ¿æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºå›¾åƒã€‚<br>ä½†æ˜¯EOTSçš„å±€é™æ€§ï¼ŒåŒ…æ‹¬å›¾åƒéšç€æ¹¿åº¦çš„é™ä½ï¼Œè¿«ä½¿é£è¡Œå‘˜é£è¡Œçš„è·ç¦»æ¯”ä½¿ç”¨æ—©æœŸç³»ç»Ÿæ—¶æ›´æ¥è¿‘ç›®æ ‡åªæ˜¯ä¸ºäº†è·å¾—è¶³å¤Ÿæ¸…æ™°çš„å›¾åƒæ¥å‘å°„å¯¼å¼¹æˆ–å°„å‡»ã€‚<br>è¯¥æŠ¥å‘Šè¯´ï¼Œé—®é¢˜éå¸¸ä¸¥é‡ï¼Œä»¥è‡³äºF-35é£è¡Œå‘˜å¯èƒ½éœ€è¦é£å¾—å¦‚æ­¤æ¥è¿‘æ‰èƒ½è·å¾—ä»–ä»¬å¿…é¡»æœºåŠ¨çš„ç›®æ ‡æ‰èƒ½è·å¾—å¯¼å¼¹å°„å‡»æ‰€éœ€çš„è·ç¦»ã€‚å› æ­¤ï¼Œè¯¥ç³»ç»Ÿçš„å±€é™æ€§å¯ä»¥è¿«ä½¿æ”»å‡»æ€§çš„F-35å¦¥åæ„å¤–ï¼Œè®©æ•ŒäººæœºåŠ¨åˆ°ç¬¬ä¸€æ¬¡æœºä¼šã€‚<br><em>æŠ•é™æƒŠå–œçš„å…ƒç´ å¹¶è®©å¯¹æ‰‹å…ˆå°„å‡»æ˜¯æˆ‘ä»¬æƒ³è¦è¿«ä½¿æ•Œäººåšçš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±ã€‚</em><br><br><br>å¦ä¸€ä¸ªç»å¸¸è¢«å¹æ§çš„åŠŸèƒ½æ˜¯åˆ†å¸ƒå¼å­”å¾„ç³»ç»Ÿï¼ˆDASï¼‰ï¼Œè¯¥åŠŸèƒ½åº”è¯¥èµ‹äºˆF-35å“è¶Šçš„æ€åŠ¿æ„ŸçŸ¥èƒ½åŠ›ã€‚ DASæ˜¯å°†æ˜¾ç¤ºå™¨ä¾›ç»™è‡­åæ˜­ç€çš„600,000ç¾å…ƒå¤´ç›”ç³»ç»Ÿçš„ä¸»è¦ä¼ æ„Ÿå™¨ä¹‹ä¸€ï¼Œå®ƒä¹Ÿæœªèƒ½å®ç°ç‚’ä½œã€‚<br>DASä¼ æ„Ÿå™¨æ˜¯åˆ†å¸ƒåœ¨F-35æœºèº«å‘¨å›´çš„å…­ä¸ªæ‘„åƒæœºæˆ–â€œçœ¼ç›â€ï¼Œå®ƒä»¬å‘å¤´ç›”é®é˜³æ¿æŠ•å°„åˆ°é£è¡Œå‘˜æƒ³è¦è§‚å¯Ÿçš„ä»»ä½•æ–¹å‘çš„å¤–éƒ¨è§†å›¾ï¼ŒåŒ…æ‹¬å‘ä¸‹æˆ–å‘åã€‚åŒæ—¶ï¼Œå¤´ç›”é®é˜³æ¿æ˜¾ç¤ºé£è¡Œä»ªè¡¨ä»¥åŠä»ä¼ æ„Ÿå™¨å’Œä»»åŠ¡ç³»ç»Ÿå¾—å‡ºçš„ç›®æ ‡å’Œå¨èƒç¬¦å·ã€‚<br>ä½†ç”±äºè¿‡å¤šçš„é”™è¯¯ç›®æ ‡ï¼Œä¸ç¨³å®šçš„â€œæŠ–åŠ¨â€å›¾åƒå’Œä¿¡æ¯è¿‡è½½ç­‰é—®é¢˜ï¼Œé£è¡Œå‘˜æ­£åœ¨å…³é—­ä¸€äº›ä¼ æ„Ÿå™¨å’Œè®¡ç®—æœºè¾“å…¥ï¼Œè€Œæ˜¯ä¾é ç®€åŒ–çš„æ˜¾ç¤ºå™¨æˆ–æ›´ä¼ ç»Ÿçš„ä»ªè¡¨æ¿ã€‚<br>åœ¨è¿™é‡Œï¼Œç³»ç»Ÿå†æ¬¡æ¯”å®ƒåº”è¯¥å–ä»£çš„ç³»ç»Ÿå¥½ä¸€ç‚¹ã€‚<br>åœ¨ä¸€äº›é‡è¦çš„æ­¦å™¨äº¤ä»˜å‡†ç¡®æ€§æµ‹è¯•ä¸­ï¼Œè¯•é£å‘˜ä¹Ÿå¯¹å¤´ç›”æœ‰å›°éš¾ã€‚ä¸€äº›é£è¡Œå‘˜å°†å¤´ç›”ä¸­çš„æ˜¾ç¤ºæè¿°ä¸ºâ€œæ“ä½œä¸Šæ— æ³•ä½¿ç”¨ä¸”å¯èƒ½ä¸å®‰å…¨â€ï¼Œå› ä¸ºâ€œç¬¦å·æ‚ä¹±â€ä½¿åœ°é¢ç›®æ ‡æ¨¡ç³Šä¸æ¸…ã€‚<br>åœ¨è¯•å›¾å¯¹ç›®æ ‡å°„å‡»çŸ­ç¨‹AIM-9Xç©ºå¯¹ç©ºå¯¼å¼¹æ—¶ï¼Œé£è¡Œå‘˜æŠ¥å‘Šè¯´ï¼Œä»–ä»¬å¯¹ç›®æ ‡çš„çœ‹æ³•è¢«å¤´ç›”æŠ¤ç›®é•œä¸Šæ˜¾ç¤ºçš„ç¬¦å·æ‰€é˜»æŒ¡ã€‚é£è¡Œå‘˜è¿˜æŠ¥å‘Šè¯´ï¼Œè¿™äº›ç¬¦å·åœ¨è¯•å›¾è¿½è¸ªç›®æ ‡æ—¶ä¸ç¨³å®šã€‚<br>ç„¶åæ˜¯ç”±äºâ€œè™šå‡è½¨é“â€å¯¼è‡´é£è¡Œå‘˜å®é™…ä¸Šçœ‹åˆ°åŒé‡çš„é—®é¢˜ã€‚å°†å„ç§è½¦è½½ä»ªå™¨äº§ç”Ÿçš„æ‰€æœ‰ä¿¡æ¯å¹¶å°†å…¶åˆå¹¶ä¸ºé£è¡Œå‘˜çš„è¿è´¯å›¾åƒå­˜åœ¨é—®é¢˜ï¼Œè¯¥è¿‡ç¨‹ç§°ä¸ºä¼ æ„Ÿå™¨èåˆã€‚<br>é£è¡Œå‘˜æŠ¥å‘Šè¯´ï¼Œä¸åŒçš„ä»ªå™¨ï¼Œå¦‚é£æœºçš„é›·è¾¾å’ŒEOTSï¼Œæ­£åœ¨æ£€æµ‹ç›¸åŒçš„ç›®æ ‡ï¼Œä½†ç¼–åˆ¶ä¿¡æ¯çš„è®¡ç®—æœºæ­£åœ¨å°†å•ä¸ªç›®æ ‡æ˜¾ç¤ºä¸ºä¸¤ä¸ªã€‚<br>é£è¡Œå‘˜è¯•å›¾é€šè¿‡å…³é—­ä¸€äº›ä¼ æ„Ÿå™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿å¤šä½™çš„ç›®æ ‡æ¶ˆå¤±ã€‚ DOTï¼†Eè¡¨ç¤ºï¼Œè¿™æ˜¯â€œä¸å¯æ¥å—çš„æˆ˜æ–—ï¼Œè¿åäº†å°†å¤šä¸ªä¼ æ„Ÿå™¨çš„è´¡çŒ®èåˆåˆ°ä¸€ä¸ªå‡†ç¡®çš„è½¨é“å’Œæ¸…æ™°çš„æ˜¾ç¤ºä¸­ä»¥è·å¾—æ€åŠ¿æ„ŸçŸ¥ä»¥åŠè¯†åˆ«å’Œæ¥è§¦æ•Œæ–¹ç›®æ ‡çš„åŸºæœ¬åŸåˆ™ã€‚â€<br>è™½ç„¶é—®é¢˜å‡ºåœ¨ä¸€ä¸ªå¹³é¢ä¸Šï¼Œä½†æ˜¯å½“å‡ æ¶é£æœºè¯•å›¾é€šè¿‡ç½‘ç»œå…±äº«æ•°æ®æ—¶ï¼Œæƒ…å†µä¼šæ›´ç³Ÿã€‚ F-35å…·æœ‰å¤šåŠŸèƒ½é«˜çº§æ•°æ®é“¾è·¯ï¼ˆMADLï¼‰ï¼Œæ—¨åœ¨ä½¿é£æœºèƒ½å¤Ÿä¸å…¶ä»–F-35å…±äº«ä¿¡æ¯ï¼Œä»¥ä¾¿ä¸ºæ‰€æœ‰é£è¡Œå‘˜æä¾›æˆ˜æ–—ç©ºé—´çš„å…±åŒå›¾åƒã€‚å®ƒé€šè¿‡è·å–æ¯ä¸ªå¹³é¢ç”Ÿæˆçš„æ‰€æœ‰æ•°æ®å¹¶å°†å…¶ç»„åˆåˆ°ä¸€ä¸ªå…±äº«çš„ä¸–ç•Œè§†å›¾ä¸­æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<p><em>ä½†æ˜¯ï¼Œè¿™ä¸ªç³»ç»Ÿä¹Ÿä¼šäº§ç”Ÿé”™è¯¯æˆ–åˆ†è£‚çš„ç›®æ ‡å›¾åƒã€‚ ä½¿é—®é¢˜æ›´åŠ å¤æ‚çš„æ˜¯ï¼Œç³»ç»Ÿæœ‰æ—¶ä¹Ÿä¼šå®Œå…¨ä¸¢å¼ƒç›®æ ‡å›¾åƒï¼Œå¯¼è‡´é©¾é©¶èˆ±å†…éƒ¨å­˜åœ¨æ··æ·†ã€‚</em><br><br><br>æ‰€æœ‰è¿™äº›æ„å‘³ç€ç³»ç»Ÿæ„å‘³ç€è®©é£è¡Œå‘˜æ›´å¥½åœ°äº†è§£å‘¨å›´çš„ä¸–ç•Œå¯ä»¥å®Œå…¨ç›¸åã€‚ æ ¹æ®è¯¥æŠ¥å‘Šï¼Œè¿™äº›ç³»ç»Ÿâ€œç»§ç»­é™ä½æˆ˜æ–—ç©ºé—´æ„è¯†å¹¶å¢åŠ é£è¡Œå‘˜çš„å·¥ä½œé‡ã€‚ è¿™äº›ç¼ºé™·çš„è§£å†³æ–¹æ³•å¯¹äºé£è¡Œå‘˜æ¥è¯´æ˜¯è€—æ—¶çš„ï¼Œå¹¶ä¸”ä¼šå‡å°‘é«˜æ•ˆå’Œæœ‰æ•ˆçš„ä»»åŠ¡æ‰§è¡Œã€‚â€œ<br>F-35åŠ©æ¨å™¨è¡¨ç¤ºè¿™æ˜¯é‡è¦çš„ç½‘ç»œ - å®é™…ä¸Šé‡è¦çš„æ˜¯ç½‘ç»œæ— æ³•æ­£å¸¸å·¥ä½œã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545370927968-ab261e3d-8341-4999-a9c1-d24ef08dfa74.png#align=left&amp;display=inline&amp;height=497&amp;originHeight=1200&amp;originWidth=1800&amp;status=done&amp;width=826" alt><br><a name="80d6dbbc"></a></p>
<h4 id="ä½œä¸ºæˆ˜å£«æ— æ•ˆ"><a href="#ä½œä¸ºæˆ˜å£«æ— æ•ˆ" class="headerlink" title="ä½œä¸ºæˆ˜å£«æ— æ•ˆ"></a><a href="#xp62pu"></a>ä½œä¸ºæˆ˜å£«æ— æ•ˆ</h4><p>F-35ä»ä¸€å¼€å§‹å°±æ‰“ç®—æˆä¸ºä¸€æ¶å¤šç”¨é€”é£æœºã€‚è¿™ä»½æœ€æ–°çš„æŠ¥å‘Šæ¸…æ¥šåœ°æè¿°äº†è¿„ä»Šä¸ºæ­¢å®ƒåœ¨å„ç§è§’è‰²ä¸­å¦‚ä½•å åŠ ï¼ŒåŒ…æ‹¬ä¸å®ƒåº”è¯¥å–ä»£çš„æ¯æ¶é£æœºç›¸æ¯”ã€‚è¿™ä¸ªæ¶ˆæ¯å¹¶ä¸ä»¤äººé¼“èˆã€‚<br>F-35ä½œä¸ºç©ºå¯¹ç©ºæˆ˜æ–—æœºçš„ç¼ºç‚¹å·²ç»æœ‰äº†å¾ˆå¥½çš„è®°å½•ã€‚<br>å®ƒåœ¨è§†è§‰èŒƒå›´ï¼ˆWVRï¼‰ä¸­çš„æ¨¡æ‹Ÿç©ºæˆ˜ä¸­å¤±å»äº†åç§°ï¼Œå®ƒçš„é›·è¾¾éšèº«æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿ï¼Œåœ¨2015å¹´åˆçš„F-16ä¸­ï¼Œå…¶ä¸­ä¸€æ¶F-35åº”è¯¥å–ä»£ä½œä¸ºç©ºä¸­æˆ˜æ–—æœºã€‚ F-35åœ¨ç©ºå¯¹ç©ºæœºåŠ¨ä¸­åå¤ä¸¢å¤±ï¼Œå°½ç®¡è¯¥æµ‹è¯•è¢«æ“çºµï¼Œå› ä¸ºæ‰€ä½¿ç”¨çš„F-16æ˜¯è¾ƒé‡çš„åŒåº§ç‰ˆæœ¬å¹¶ä¸”è¿›ä¸€æ­¥è£…è½½äº†é‡å‹æ‹–æ›³å¤–éƒ¨ç‡ƒæ–™å¦å…‹é˜»ç¢å…¶æœºåŠ¨æ€§ã€‚<br>F-35åŠ©æ¨å™¨è®¤ä¸ºé£æœºçš„ä½é›·è¾¾æ ‡å¿—å°†ä½¿å…¶è¿œç¦»WVRæƒ…å†µï¼Œä½†ç©ºæˆ˜çš„å†å²æ˜¯æ— æ³•å®Œå…¨é¿å…WVRçš„æ”»å‡»ã€‚å¯¼å¼¹æ•…éšœï¼Œé›·è¾¾å¹²æ‰°çš„å½±å“ä»¥åŠå…¶ä»–éš¾ä»¥é¢„æµ‹çš„å› ç´ å¾€å¾€ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°è¿«ä½¿WVRå‚ä¸ã€‚<br>è¿™ä»½æœ€æ–°æŠ¥å‘Šè¯å®F-35å¹¶ä¸åƒä¼ ç»Ÿæˆ˜æ–—æœºé‚£æ ·æœºåŠ¨ã€‚<br><em>æ‰€æœ‰ä¸‰ç§å˜å‹â€œåœ¨è·¨éŸ³é€Ÿä¸‹éƒ½è¡¨ç°å‡ºä»¤äººåæ„Ÿæˆ–ä¸å¯æ¥å—çš„é£è¡Œè´¨é‡ï¼Œå…¶ä¸­é£æœºä¸Šçš„ç©ºæ°”åŠ¨åŠ›æ­£åœ¨è¿…é€Ÿå˜åŒ–ã€‚â€</em><br><br><br>ä¸€ä¸ªè¿™æ ·çš„é—®é¢˜è¢«ç§°ä¸ºæœºç¿¼ä¸‹é™ï¼Œå…¶ä¸­å–·æ°”æœºçš„ç¿¼å°–åœ¨æ€¥è½¬å¼¯æ—¶çªç„¶ä¸‹é™ï¼Œè¿™å¯èƒ½å¯¼è‡´é£æœºæ—‹è½¬å¹¶å¯èƒ½å‘ç”Ÿç¢°æ’ã€‚<br>åœ¨å£°å±éšœæ­£ä¸‹æ–¹çš„è·¨éŸ³é€Ÿæ˜¯æˆ˜æ–—æœºé£è¡ŒåŒ…çº¿çš„æœ€å…³é”®ç‚¹ã€‚è¿™äº›æ˜¯å†å²ä¸Šå¤§å¤šæ•°ç©ºæˆ˜å‘ç”Ÿçš„é€Ÿåº¦ã€‚æ­£æ˜¯åœ¨è¿™äº›é€Ÿåº¦ä¸‹ï¼ŒF-35éœ€è¦æœ€çµæ´»æ‰èƒ½æˆä¸ºæœ‰æ•ˆçš„æˆ˜æ–—æœºã€‚</p>
<p>è¯¥è®¡åˆ’è¯•å›¾é€šè¿‡æ”¹å˜F-35çš„é£è¡Œè½¯ä»¶è€Œä¸æ˜¯é€šè¿‡é‡æ–°è®¾è®¡å¯¼è‡´é—®é¢˜çš„å®é™…é£è¡Œè¡¨é¢æ¥è§£å†³æœºåŠ¨æ€§èƒ½é—®é¢˜ã€‚<br>è¯¥è½¯ä»¶ç§°ä¸ºæ§åˆ¶æ³•åˆ™ï¼Œå°†é£è¡Œå‘˜çš„æ“çºµæ†å‘½ä»¤è½¬æ¢ä¸ºé£æœºçš„è¡Œä¸ºã€‚äººä»¬å¯ä»¥é¢„æœŸé£è¡Œå‘˜å¯¹é£æœºçš„æŸäº›åŠ›é‡ä¼šå¯¼è‡´é£æœºçš„ç­‰æ•ˆå“åº”ã€‚ç”±äºè½¯ä»¶çš„å˜åŒ–ï¼Œæœ‰æ—¶å¹¶éå¦‚æ­¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœé£è¡Œå‘˜ä½¿ç”¨å°–é”çš„æ†ç§»åŠ¨ä»¥è½¬åŠ¨é£æœºï¼Œæ§åˆ¶æ³•è½¯ä»¶ç°åœ¨å¯ä»¥æ›´æ¸©å’Œåœ°è½¬å‘ä»¥é˜²æ­¢è¯¸å¦‚ - åŒ…æ‹¬ - æŒ–æ˜ç­‰é—®é¢˜ã€‚ F-35è¾©æŠ¤äººè¯•å›¾é€šè¿‡å£°ç§°F-35ä»æœªæ‰“ç®—ç”¨äºè¿‘è·ç¦»ç©ºä¸­æ–—ç‹—æ¥è§£é›‡è¿™äº›é—®é¢˜ï¼Œç©ºå†›å¼ºçƒˆè¦æ±‚é£æœºé…å¤‡çŸ­è·ç¦»ç©ºå¯¹ç©ºç‚®ã€‚</p>
<p>ä½œä¸ºç©ºå¯¹ç©ºæˆ˜æ–—æœºï¼ŒF-35çš„ä½œæˆ˜èƒ½åŠ›éå¸¸æœ‰é™ï¼Œå› ä¸ºç›®å‰è½¯ä»¶ç‰ˆæœ¬åªèƒ½ä½¿ç”¨ä¸¤æšå¯¼å¼¹ï¼Œè€Œä¸”å®ƒä»¬å¿…é¡»æ˜¯é›·è¾¾å¼•å¯¼çš„å…ˆè¿›ä¸­ç¨‹ç©ºä¸­é£è¡Œå™¨ã€‚ç©ºä¸­å¯¼å¼¹ï¼ˆAMRAAMsï¼‰;å¦‚æœå®ƒæƒ³è¦ä¿æŒå…¶éšå½¢ç‰¹å¾ï¼Œå®ƒå°†æ¥ä¸ä¼šè¶…è¿‡å››ä¸ªã€‚</p>
<p>F-35ä½œä¸ºç©ºå¯¹ç©ºæˆ˜æ–—æœºçš„èƒ½åŠ›ç›®å‰è¿›ä¸€æ­¥å—åˆ°é™åˆ¶ï¼Œå› ä¸ºAMRAAMå¹¶æœªé’ˆå¯¹è¿‘è·ç¦»è§†è·ä½œæˆ˜è¿›è¡Œä¼˜åŒ–ã€‚æœ€ç»ˆï¼Œå‡çº§çš„è½¯ä»¶ç‰ˆæœ¬å°†å…è®¸é£æœºæºå¸¦é™¤AMRAAMä¹‹å¤–çš„å¯¼å¼¹ï¼Œä½†ä¸ä¼šå¾ˆå¿«ã€‚è¿™æ„å‘³ç€F-35è¿›å…¥çš„ä»»ä½•æˆ˜æ–—æœ€å¥½éƒ½æ˜¯çŸ­æš‚çš„ï¼Œå› ä¸ºå®ƒå¾ˆå¿«å°±ä¼šè€—å°½å¼¹è¯ã€‚<br>å®ƒçš„æªä¹Ÿå¯ç”¨äºè¿‘è·ç¦»æˆ˜æ–—ï¼Œä½†å®ƒç›®å‰è¿˜æ²¡æœ‰å·¥ä½œï¼Œå› ä¸ºåœ¨æˆ˜æ–—ä¸­æœ‰æ•ˆä½¿ç”¨å®ƒçš„è½¯ä»¶è¿˜æ²¡æœ‰å®Œæˆã€‚</p>
<p>F-35Aä¸­çš„å¤§ç‚®ä½äºé£æœºä¾§é¢çš„ä¸€æ‰‡å°é—¨åé¢ï¼Œåœ¨å¤§ç‚®å‘å°„å‰ç¬é—´å¿«é€Ÿæ‰“å¼€ - è¿™ä¸€ç‰¹æ€§æ—¨åœ¨ä½¿é£æœºä¿æŒéšèº«çŠ¶æ€ã€‚æµ‹è¯•é£è¡Œè¡¨æ˜ï¼Œè¿™æ‰‡é—¨èƒ½å¤Ÿæ•æ‰åˆ°é£è¿‡é£æœºè¡¨é¢çš„ç©ºæ°”ï¼Œå°†F-35çš„æœºå¤´ä»ç„å‡†ç‚¹æ‹‰å¼€ï¼Œå¯¼è‡´â€œè¶…å‡ºç²¾åº¦è§„æ ¼â€çš„è¯¯å·®ã€‚</p>
<p>å·¥ç¨‹å¸ˆä»¬æ­£åœ¨å¯¹F-35çš„æ§åˆ¶æ³•è¿›è¡Œæ›´å¤šä¿®æ”¹ï¼Œä»¥çº æ­£é—¨å¼•èµ·çš„è¯¯å·®ã€‚è¿›è¡Œè¿™äº›æ›´æ”¹å¹¶æ‰§è¡Œéšåçš„â€œå›å½’â€é‡æ–°æµ‹è¯•ä»¥ç¡®è®¤æ›´æ”¹çš„æœ‰æ•ˆæ€§ä¼šå»¶è¿Ÿå®é™…çš„æªæ”¯å‡†ç¡®åº¦æµ‹è¯•ã€‚åœ¨è¿™äº›æµ‹è¯•å‘ç”Ÿä¹‹å‰ï¼Œæ²¡æœ‰äººèƒ½å¤ŸçŸ¥é“F-35Açš„å¤§ç‚®æ˜¯å¦èƒ½å¤ŸçœŸæ­£å‡»ä¸­ç›®æ ‡ã€‚</p>
<p>F-35Bå’ŒF-35Céƒ½å°†ä½¿ç”¨å¤–ç½®å¼æªæ¶ï¼Œè€Œä¸æ˜¯åƒç©ºå†›å‹å·é‚£æ ·çš„å†…éƒ¨ç‰ˆæœ¬ã€‚ç”±äºä¸¤ç§å‹å·æœºèº«å½¢çŠ¶çš„å·®å¼‚ï¼Œæµ·å†›é™†æˆ˜é˜Ÿå’Œæµ·å†›å°†ä½¿ç”¨ä¸åŒå‹å·çš„æªèšã€‚ä¸¤è€…éƒ½åœ¨åœ°é¢ä¸Šè¿›è¡Œäº†è¯•éªŒï¼Œä½†é£è¡Œæµ‹è¯•çœ‹çœ‹åŠèˆ±å¯¹å–·æ°”å¼é£æœºç©ºæ°”åŠ¨åŠ›å­¦çš„å½±å“æ‰åˆšåˆšå¼€å§‹ã€‚</p>
<p>DOTï¼†Eè­¦å‘Šè¯´ï¼Œå°±åƒF-35Aä¸Šçš„æªé—¨ä¸€æ ·ï¼Œå¯èƒ½ä¼šå‘ç°æ„å¤–çš„é£è¡Œæ§åˆ¶é—®é¢˜ã€‚å¿…é¡»è®¾è®¡å¯¹è¿™äº›çš„ä¿®å¤ï¼Œç„¶åè¿›è¡Œæµ‹è¯•ã€‚åªæœ‰è¿™æ ·ï¼Œç¨‹åºæ‰èƒ½å¼€å§‹æ›´å…¨é¢çš„é£è¡Œä¸­ç²¾åº¦æµ‹è¯•ï¼Œè¿™å¯¹äºç¡®å®šæªèšæ˜¯å¦å‡†ç¡®æ˜¯å¿…è¦çš„ã€‚</p>
<p>å¼€å‘æµ‹è¯•å»¶è¿Ÿä»¥åŠè§£å†³æµ‹è¯•å¯èƒ½å‘ç°çš„é—®é¢˜çš„è¿‡ç¨‹éå¸¸ä¸¥é‡ï¼Œä»¥è‡³äºè¯¥è®¡åˆ’å¯èƒ½æ²¡æœ‰æœ‰æ•ˆçš„åˆå§‹æ“ä½œæµ‹è¯•å’Œè¯„ä¼°æªæ”¯ã€‚è¿™ä¸ä»…å¯ä»¥è¿›ä¸€æ­¥å»¶è¿Ÿé¢„å®šçš„æµ‹è¯•ï¼Œè€Œä¸”æ›´é‡è¦çš„æ˜¯ï¼Œå¯ä»¥é˜²æ­¢é£æœºå¾ˆå¿«åˆ°è¾¾æˆ˜å£«ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371080991-45289738-757c-42c0-b9aa-d61c7a02c077.png#align=left&amp;display=inline&amp;height=521&amp;originHeight=1256&amp;originWidth=1800&amp;status=done&amp;width=826" alt></p>
<p><a name="a825e04e"></a></p>
<h4 id="ä½œä¸ºæ‹¦æˆªè½°ç‚¸æœºæ— æ•ˆ"><a href="#ä½œä¸ºæ‹¦æˆªè½°ç‚¸æœºæ— æ•ˆ" class="headerlink" title="ä½œä¸ºæ‹¦æˆªè½°ç‚¸æœºæ— æ•ˆ"></a><a href="#55vqcv"></a>ä½œä¸ºæ‹¦æˆªè½°ç‚¸æœºæ— æ•ˆ</h4><p>F-35å°†å…·æœ‰æå…¶æœ‰é™çš„æ‹¦æˆªæœ‰ç”¨æ€§çš„å‡ ä¸ªä¸»è¦åŸå›  - ç©ºå†›å’Œæµ·å†›é™†æˆ˜é˜Ÿçš„â€œåˆå§‹ä½œæˆ˜èƒ½åŠ›â€å£°æ˜å°½ç®¡å¦‚æ­¤ã€‚<br>ä¾‹å¦‚ï¼Œæ¬§æ´²ï¼Œä¿„ç½—æ–¯ï¼Œä¸­å›½ç”šè‡³ä¼Šæœ—çš„å›½é˜²å…¬å¸å¤šå¹´æ¥ä¸€ç›´åœ¨åŠªåŠ›å¼€å‘å’Œç”Ÿäº§æ‰“è´¥éšå½¢é£æœºçš„ç³»ç»Ÿã€‚ä»–ä»¬å–å¾—äº†ä¸€äº›æˆåŠŸã€‚<br>æˆ‘ä»¬åœ¨1999å¹´æ¸…æ¥šåœ°çœ‹åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå½“æ—¶ä¸€æ”¯å¡å°”ç»´äºšå¯¼å¼¹éƒ¨é˜Ÿå‡»è½äº†ä¸€æ¶F-117éšå½¢æˆ˜æ–—æœºï¼Œè¯¥æˆ˜æ–—æœºé…å¤‡äº†è¿‡æ—¶çš„è‹è”æ—¶ä»£SA-3åœ°å¯¹ç©ºå¯¼å¼¹ï¼Œè¿™æ˜¯1961å¹´é¦–æ¬¡éƒ¨ç½²çš„ç³»ç»Ÿã€‚å¡å°”ç»´äºšé˜²ç©ºäººå‘˜å‘ç°ä»–ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¯¼å¼¹ç”µæ± çš„é•¿æ³¢æœç´¢é›·è¾¾æ¢æµ‹éšå½¢é£æœºã€‚<br>ç„¶åï¼Œåˆ©ç”¨è§‚å¯Ÿå‘˜å’Œå¯¼å¼¹è‡ªå·±çš„åˆ¶å¯¼é›·è¾¾ï¼Œå¡å°”ç»´äºšéƒ¨é˜Ÿèƒ½å¤Ÿè¿½è¸ªï¼Œç„å‡†å¹¶æ€æ­»ä¸€æ¶éšèº«çš„F-117ã€‚<br>ä¸ºäº†è¡¨æ˜è¿™ä¸æ˜¯ä¾¥å¹¸ï¼Œå¡å°”ç»´äºšåœ°ç©ºå¯¼å¼¹å‡»ä¸­å¹¶æŸåäº†å¦ä¸€æ¶F-117ï¼Œä»¥è‡³äºå®ƒå†ä¹Ÿæ²¡æœ‰åœ¨ç§‘ç´¢æ²ƒç©ºæˆ˜ä¸­é£è¡Œè¿‡ã€‚<br>è¿™äº›æœç´¢é›·è¾¾ä¸å—ç°ä»£éšå½¢é£æœºçš„ç‰¹æ®Šå½¢çŠ¶å’Œæ¶‚å±‚çš„å½±å“ï¼Œå¯ä»¥è½»æ¾æ£€æµ‹åˆ°ä»Šå¤©çš„éšå½¢é£æœºï¼ŒåŒ…æ‹¬F-35ã€‚è‡ªç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ä»¥æ¥ï¼Œä¿„ç½—æ–¯äººä»æœªåœæ­¢è¿‡åˆ¶é€ è¿™ç§é›·è¾¾ï¼Œå¹¶ä¸”ç°åœ¨åœ¨å…¬å¼€å¸‚åœºä¸Šä»¥ä½è‡³1000ä¸‡ç¾å…ƒçš„ä»·æ ¼é”€å”®ç°ä»£åŒ–ï¼Œé«˜åº¦ç§»åŠ¨çš„å¡è½¦å¼æ•°å­—é•¿æ³¢é›·è¾¾ã€‚ä¸­å›½å’Œä¼Šæœ—äººä¹Ÿå¼€å§‹é‡‡ç”¨ç±»ä¼¼çš„é›·è¾¾ç³»ç»Ÿã€‚<br>æ¯”é•¿æ³¢æ¢æµ‹é›·è¾¾æ›´éš¾å¯¹ä»˜çš„æ›´ç®€å•çš„ç³»ç»Ÿæ˜¯æ— æºæ¢æµ‹ç³»ç»Ÿï¼ˆPDSï¼‰ï¼Œç”¨äºæ¢æµ‹å’Œè·Ÿè¸ªé£æœºå‘å°„çš„å°„é¢‘ï¼ˆRFï¼‰ä¿¡å· - é›·è¾¾ä¿¡å·ï¼ŒUHFå’ŒVHFæ— çº¿ç”µä¿¡å·ï¼Œè¯†åˆ«-friend-or-foeï¼ˆIFFï¼‰ä¿¡å·ï¼ŒLink-16ç­‰æ•°æ®é“¾è·¯ä¿¡å·å’ŒTACANç­‰å¯¼èˆªè½¬å‘å™¨ä¿¡å·ã€‚<br>ç°ä»£PDSçš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯VERA-NGï¼Œè¿™æ˜¯ä¸€ç§æ·å…‹ç³»ç»Ÿï¼Œåœ¨å›½é™…ä¸Šé”€å”®ï¼Œä½¿ç”¨ä¸‰ä¸ªæˆ–æ›´å¤šçš„é—´éš”è‰¯å¥½çš„æ¥æ”¶å¤©çº¿æ¥æ£€æµ‹å’Œè·Ÿè¸ªå’Œè¯†åˆ«æˆ˜æ–—æœºå’Œè½°ç‚¸æœºå‘å‡ºçš„å°„é¢‘ä¿¡å·ã€‚ç³»ç»Ÿçš„ä¸­å¤®åˆ†ææ¨¡å—è®¡ç®—åˆ°è¾¾æ¥æ”¶å™¨çš„ä¿¡å·çš„æ—¶é—´å·®ï¼Œä»¥è¯†åˆ«ï¼Œå®šä½å’Œè·Ÿè¸ªå¤šè¾¾200æ¶é£æœºå‘å°„é›·è¾¾ä¿¡å·ã€‚<br>VERA-NGåªæ˜¯ä¸–ç•Œä¸Šä½¿ç”¨çš„ä¼—å¤šPDSä¸­çš„ä¸€ç§ - ä¿„ç½—æ–¯äººï¼Œä¸­å›½äººå’Œå…¶ä»–äººä¹Ÿç”Ÿäº§PDSï¼Œè¿™äº›PDSå·²ç»å¹¿æ³›ä½¿ç”¨äº†å¥½å‡ å¹´ã€‚<br>ä»å¯¹æ‰‹é‡‡ç”¨PDSçš„è§’åº¦æ¥çœ‹ï¼ŒPDSçš„ä¼˜ç‚¹åœ¨äºé›·è¾¾éšèº«ä¸å…¶æ¢æµ‹å’Œè·Ÿè¸ªé£æœºçš„èƒ½åŠ›æ— å…³ã€‚å¦‚æœé£æœºå¿…é¡»ä½¿ç”¨å…¶é›·è¾¾ï¼Œæ— çº¿ç”µï¼Œæ•°æ®é“¾è·¯æˆ–å¯¼èˆªç³»ç»Ÿæ¥å®Œæˆå…¶ä»»åŠ¡ï¼ŒPDSå¾ˆæœ‰å¯èƒ½é€šè¿‡è¿™äº›å‘å°„æ¥æ£€æµ‹ï¼Œè·Ÿè¸ªå’Œè¯†åˆ«å®ƒã€‚<br>ä¸–ç•Œä¸Šæ¯æ¶é£æœºéƒ½å®¹æ˜“å—åˆ°PDSï¼Œéšèº«å’Œééšèº«çš„å½±å“ï¼Œè€ŒF-35ä¹Ÿä¸ä¾‹å¤–ã€‚<br>F-35çš„ä¸»è¦ç©ºå¯¹ç©ºæ­¦å™¨AIM-120æ˜¯è¶…è§†è·é›·è¾¾å¯¼å¼¹ - å› æ­¤ï¼ŒF-35å¿…é¡»ä½¿ç”¨å¤§å‹é›·è¾¾å‘å°„é«˜åŠŸç‡ä¿¡å·æ‰èƒ½æ¢æµ‹åˆ°ç©ºä¸­ç›®æ ‡ç„¶åå¼•å¯¼å¯¼å¼¹åˆ°ä»–ä»¬èº«è¾¹ã€‚åŒæ ·ï¼Œé£æœºå¿…é¡»é‡‡ç”¨é«˜åŠŸç‡åœ°é¢æµ‹ç»˜é›·è¾¾ä¿¡å·æ¥è¿œè·ç¦»å¯»æ‰¾åœ°é¢ç›®æ ‡ã€‚<br>æ­¤å¤–ï¼Œå¦‚æœé£æœºçš„ç³»ç»Ÿå¿…é¡»ä¸åœ°å±‚ä¸­çš„å…¶ä»–é£æœºé€šä¿¡æˆ–ä¸AWACSç­‰éæœºè½½æ”¯æŒé£æœºé€šä¿¡ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å…¶æ— çº¿ç”µå’Œæ•°æ®é“¾è·¯ã€‚å› æ­¤ï¼ŒF-35å¯èƒ½æ˜“å—è¢«åŠ¨è·Ÿè¸ªç³»ç»Ÿçš„æ£€æµ‹ã€‚è¿™äº›æ— æºæ¢æµ‹ç³»ç»Ÿä¸­çš„ä¸€äº›æ¯”æœç´¢é›·è¾¾ä¾¿å®œå¾—å¤š - è€Œä¸”å®ƒä»¬åœ¨ç”µå­æ–¹é¢å‡ ä¹æ£€æµ‹ä¸åˆ°ã€‚<br>DOTï¼†EæŠ¥å‘Šè¿˜åˆ—å‡ºäº†é™åˆ¶æ‹¦æˆªæœ‰ç”¨æ€§çš„å‡ ä¸ªä¸»è¦åŸå› ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371153712-4fb2550d-f06c-468e-ac83-a79ccc95ec77.png#align=left&amp;display=inline&amp;height=39&amp;originHeight=39&amp;originWidth=60&amp;status=done&amp;width=60" alt><br>å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯F-35çš„Block 2Bï¼ˆUSMCï¼‰å’ŒBlock 3iï¼ˆUSAFï¼‰è½¯ä»¶é˜»æ­¢å®ƒæ£€æµ‹åˆ°è®¸å¤šå¨èƒå’Œç›®æ ‡ï¼ŒåŒæ—¶ä¸¥é‡é™åˆ¶å®ƒå¯æºå¸¦çš„æ­¦å™¨ç§ç±»ã€‚<br>ä¾‹å¦‚ï¼ŒF-35ç›®å‰åªèƒ½æºå¸¦å‡ ç§å‹å·çš„å¤§å‹åˆ¶å¯¼ç›´æ¥æ”»å‡»ç‚¸å¼¹ã€‚è¿™äº›éƒ½ä¸èƒ½åƒç”µåŠ›å¯¼å¼¹é‚£æ ·ä»è¿œå¤„å‘å°„ã€‚ç›¸åï¼Œå®ƒä»¬è½åœ¨ä»é£æœºåˆ°ç›®æ ‡çš„å¼¹é“è½¨é“ä¸Šï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªèƒ½åœ¨ç›®æ ‡è§†é‡ä¸­ä»¥ç›¸å¯¹è¾ƒçŸ­çš„è·ç¦»é‡Šæ”¾ã€‚<br>ç›®å‰ï¼ŒF-35é£è¡Œå‘˜â€œå°†è¢«è¿«é£å¾—æ›´è¿‘ï¼Œä»¥æ¥è¿‘åœ°é¢ç›®æ ‡ï¼Œå¹¶ä¸”æ ¹æ®æ•Œæ–¹é˜²ç©ºç³»ç»Ÿçš„å¨èƒç¨‹åº¦å’Œå¯æ¥å—çš„ä»»åŠ¡é£é™©ï¼Œå®ƒå¯èƒ½ä»…é™äºæ¥è§¦ä»…ç”±çŸ­ç¨‹é˜²å¾¡çš„åœ°é¢ç›®æ ‡é˜²ç©ºï¼Œæˆ–æ ¹æœ¬æ²¡æœ‰é˜²ç©ºã€‚â€œ<br>F-35å¯æºå¸¦çš„å°‘é‡æ­¦å™¨ç±»å‹ä¹Ÿé™åˆ¶äº†å…¶åœ¨æˆ˜æ–—ä¸­çš„çµæ´»æ€§ã€‚ç›®å‰çš„è½¯ä»¶ä¸€æ¬¡åªèƒ½æ”¯æŒä¸€ç§ç‚¸å¼¹ï¼ŒDOTï¼†Eè¡¨ç¤ºåªæœ‰åœ¨æ”»å‡»ä¸€ä¸ªæˆ–ä¸¤ä¸ªç±»ä¼¼ç›®æ ‡æ—¶æ‰æœ‰ç”¨ã€‚å› æ­¤ï¼Œä¾‹å¦‚ï¼Œå½“ä¸€æ¶F-35é£æœºè£…è½½çš„ç‚¸å¼¹è£…è½½ç”¨äºæ‘§æ¯åœ°é¢ç›®æ ‡çš„ç‚¸å¼¹æ—¶ï¼Œå®ƒä»¬å°†æ— æ³•æ‘§æ¯ä»»ä½•ç¡¬åŒ–æˆ–æ²™å‘ç›®æ ‡ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šéœ€è¦æ›´é‡çš„ç‚¸å¼¹ã€‚<br>é¢„è®¡F-35å°†æºå¸¦æ›´å¤šç§ç±»çš„æ­¦å™¨ï¼Œå› ä¸ºæ›´å¤šçš„è½¯ä»¶ï¼Œç‚¸å¼¹æ¶å’Œæµ‹è¯•éªŒè¯è¿™äº›æ­¦å™¨å·²ç»å¼€å‘å‡ºæ¥ - ä½†æˆ‘ä»¬ç›´åˆ°2021å¹´æ‰çŸ¥é“å“ªäº›æ­¦å™¨å®é™…ä¸Šæ˜¯é€‚åˆä½œæˆ˜çš„ã€‚æ­¤å¤–ï¼Œä¸ºäº†æºå¸¦é™¤ä¸¤ä¸ªå¤§å‹åˆ¶å¯¼ç‚¸å¼¹ä¹‹å¤–çš„ä¸œè¥¿ï¼Œå®ƒå°†ä¸å¾—ä¸ä½¿ç”¨å¤–éƒ¨æ­¦å™¨å’Œæœºæ¶ï¼Œå¤§å¤§é™ä½äº†é£æœºæœ¬å·²ä»¤äººå¤±æœ›çš„å°„ç¨‹å’ŒæœºåŠ¨æ€§ - å½“ç„¶ï¼Œæˆ–å¤šæˆ–å°‘åœ°æ¶ˆé™¤äº†éšèº«ã€‚<br>èƒ½å¤Ÿç©¿é€ä¸¥å¯†é˜²å¾¡çš„ç©ºåŸŸä»¥æ‘§æ¯æ•Œæ–¹é¢†åœŸæ·±å¤„çš„å›ºå®šç›®æ ‡ï¼Œè¿™æ˜¯F-35ç»å¸¸è¢«å¼•ç”¨çš„ç†ç”±ã€‚å½“ç„¶ï¼ŒF-35çš„æœ‰é™å°„ç¨‹ - ä½äºä¼ ç»Ÿçš„F-16æˆ˜æ–—æœº - æ„å‘³ç€å®ƒä¸å¯èƒ½åœ¨ä¿„ç½—æ–¯å’Œä¸­å›½ç­‰å¤§å›½çš„å®¶ä¹¡å†…å®Œæˆç©ºå†›æ‰€è°“çš„â€œæ·±åº¦æ‰“å‡»â€ã€‚<br>2016å¹´çš„DOTï¼†EæŠ¥å‘Šæè¿°äº†ä¸€äº›å®˜æ–¹çš„æ‹–å»¶è¡ŒåŠ¨ï¼Œæ¨è¿Ÿäº†F-35çš„ç©¿é€åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œè¯¥è®¡åˆ’ç°åœ¨æ‰å¼€å§‹æ¥æ”¶æ¨¡æ‹Ÿæ•Œæ–¹é›·è¾¾ç³»ç»Ÿçš„å…³é”®åœ°é¢é›·è¾¾æ¨¡æ‹Ÿå™¨è®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡æ˜¯åœ¨é«˜åº¦ç«äº‰çš„è¿‘é‚»æƒ…æ™¯ä¸­å¯¹F-35çš„æœ‰æ•ˆæ€§è¿›è¡Œæœ‰åŠ›æµ‹è¯•æ‰€éœ€çš„ã€‚<br>å®ƒåªæ¥æ”¶è¯¥è®¾å¤‡ï¼Œå› ä¸ºå®ƒæ˜¯ç”±DOTï¼†Eå¯»æ±‚å’Œé‡‡è´­çš„ï¼Œå½“æ—¶å¾ˆæ˜æ˜¾æœåŠ¡å’ŒJSFè®¡åˆ’åŠå…¬å®¤ä¸ä¼šå¯»æ±‚è¶³ä»¥å¤åˆ¶F-35é¢„è®¡èƒ½å¤Ÿå¤åˆ¶è¿‘ç«¯å¨èƒçš„æµ‹è¯•åŸºç¡€è®¾æ–½åå‡»ã€‚è¿™ç§è®¾å¤‡çš„äº¤ä»˜å·¥ä½œå·²ç»å¼€å§‹ï¼Œä½†è¦åˆ°2018å¹´åˆæ‰èƒ½å®Œæˆã€‚åˆçº§ä¸“ä¸šäººå‘˜æ²¡æœ‰è®¡åˆ’æˆ–é¢„ç®—è¿›è¡Œå‘å±•æ€§é£è¡Œè¯•éªŒã€‚<br>å†›æ–¹åœ¨å†…åè¾¾å·å†…åˆ©æ–¯ç©ºå†›åŸºåœ°çš„è¥¿éƒ¨æµ‹è¯•åŒºè¿›è¡Œéšå½¢é£æœºçš„å¼€å‘å’Œæ“ä½œæµ‹è¯•ã€‚æµ‹è¯•æ˜¯é’ˆå¯¹åœ°é¢é›·è¾¾æ¨¡æ‹Ÿå™¨è®¾å¤‡å’Œåœ°å¯¹ç©ºå¯¼å¼¹å‘å°„å™¨è¿›è¡Œçš„ã€‚æ­£åœ¨æµ‹è¯•çš„é£æœºé£è¿‡è¿™äº›é˜µåˆ—ä»¥æŸ¥çœ‹é£æœºçš„æœºè½½ä¼ æ„Ÿå™¨ - ç‰¹åˆ«æ˜¯å…¶ç”µå­æˆ˜ç³»ç»Ÿå’Œåœ°é¢æµ‹ç»˜é›·è¾¾ - ä¸é€šè¿‡æ•°æ®é“¾è·¯æä¾›çš„æœºå¤–æƒ…æŠ¥ç›¸ç»“åˆï¼Œå¯ä»¥æ£€æµ‹åˆ°å¨èƒå¹¶åšå‡ºé€‚å½“çš„å“åº”ï¼Œä¾‹å¦‚é€šè¿‡è­¦å‘Šé£è¡Œå‘˜ï¼Œå¹²æ‰°ä¿¡å·æˆ–å‘å°„é˜²å¾¡æŠ‘åˆ¶å¯¼å¼¹ã€‚<br>é—®é¢˜æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ï¼Œå› ä¸ºé›·è¾¾ä¿¡å·æ˜¾ç¤ºSAMçš„å­˜åœ¨ï¼Œä¾‹å¦‚ï¼Œä»è€Œå…è®¸é£æœºç„å‡†SAMæˆ–é¿å…å®ƒï¼Œä¸ä¸€å®šæ˜¯ç‹¬ç‰¹çš„ï¼Œå¹¶ä¸”é€šå¸¸éå¸¸ç±»ä¼¼é›·è¾¾çš„ä¿¡å·ï¼Œä¸ç«‹å³å¯¹é£æœºçš„å¨èƒã€‚<br>F-35æ— æ³•æºå¸¦è¶³å¤Ÿçš„æ­¦å™¨è½°ç‚¸ä¸€åˆ‡ã€‚å®ƒçš„ä¼ æ„Ÿå™¨å’Œä¼ æ„Ÿå™¨èåˆç³»ç»Ÿå¿…é¡»èƒ½å¤ŸåŒºåˆ†æ„æˆçœŸæ­£å¨èƒçš„æ•Œæ–¹SAMé›·è¾¾ä¸å¯èƒ½åœ¨æ¢æµ‹èŒƒå›´å†…çš„è®¸å¤šæ— å®³é›·è¾¾ä¹‹é—´çš„åŒºåˆ« - é€šç”¨ç©ºä¸­ç›‘è§†é›·è¾¾ï¼ŒçŸ­ç¨‹ï¼Œä½ç©ºé˜²ç©ºé’ˆå¯¹æ­¦å™¨è€Œéé£æœºçš„é›·è¾¾ï¼Œç”šè‡³æ˜¯é™„è¿‘çš„æ°‘ç”¨ç©ºä¸­äº¤é€šç®¡åˆ¶å’Œæ°”è±¡é›·è¾¾ç³»ç»Ÿã€‚<br>åŒæ ·ç˜«ç—ªï¼Œç›´åˆ°åœ°é¢é›·è¾¾æ¨¡æ‹Ÿå™¨è®¾å¤‡åˆ°ä½ï¼ŒF-35ç¨‹åºå°†æ— æ³•æ­£ç¡®å¼€å‘ï¼ŒéªŒè¯å’Œæ›´æ–°F-35çš„ä»»åŠ¡å…³é”®å‹æœºè½½è½¯ä»¶æ–‡ä»¶ï¼Œç§°ä¸ºä»»åŠ¡æ•°æ®è´Ÿè½½ï¼ˆMDLï¼‰ã€‚ MDLæ˜¯æŒ‡å®šæ‰€æœ‰ç›®æ ‡å’Œå¨èƒä½ç½®çš„å·¨å¤§æ–‡ä»¶ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„ç”µå­å’Œ/æˆ–çº¢å¤–ç­¾åä»¥åŠæ‰€æœ‰ç›¸å…³çš„æ˜ å°„æ•°æ®ã€‚</p>
<p><em>å¦‚æœæ²¡æœ‰å‡†ç¡®ï¼Œæœ€æ–°çš„MDLï¼ŒF-35å°±æ— æ³•æ‰¾åˆ°ç›®æ ‡æˆ–é€ƒé¿å’ŒæŠµå¾¡å¨èƒ - å®ƒä¹Ÿæ— æ³•å®ç°æ®ç§°æ˜¯å…¶ä¸»è¦ä¼˜åŠ¿çš„ç½‘ç»œå’Œä¼ æ„Ÿå™¨èåˆåŠŸèƒ½ã€‚</em><br><br><br>å¦‚æœæ²¡æœ‰MDLï¼ŒF-35å°±æ— æ³•å¼€æˆ˜ã€‚ MDLè¿˜éœ€è¦ä¸æ–­æ›´æ–°æœ‰å…³æ¯ä¸ªF-35ä»»åŠ¡æ”¶é›†çš„å¨èƒï¼Œç›®æ ‡å’Œä¿¡å·ç­‰ä¿¡æ¯ã€‚ F-35é£è¡Œå‘˜åªæœ‰åœ¨é…å¤‡å¿…è¦çš„åœ°é¢é›·è¾¾æ¨¡æ‹Ÿå™¨è®¾å¤‡çš„æµ‹è¯•èŒƒå›´å†…è¿›è¡Œæµ‹è¯•åï¼Œæ‰èƒ½ç¡®ä¿ä»–ä»¬æ‰€éœ€çš„MDLèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚<br>å¿…é¡»é€šè¿‡ä¸­å¤®é‡ç¼–ç¨‹å®éªŒå®¤ä½¿ç”¨ç›¸å…³ä½œæˆ˜å‘½ä»¤çš„æµ·é‡æ•°æ®è¾“å…¥ä¸ºæ¯ä¸ªæˆ˜åŒºæˆ–å†²çªåŒºåˆ›å»ºæ–°çš„å’Œå®Œæ•´çš„MDLã€‚ä¾‹å¦‚ï¼Œåœ¨è‹±æ ¼å…°å¢ƒå¤–è¿è¥çš„F-35å°†æ‹¥æœ‰ä¸æ—¥æœ¬F-35ä¸åŒçš„æ¡£æ¡ˆã€‚ä»Šå¤©åªå­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„é‡ç¼–ç¨‹å®éªŒå®¤ï¼Œå¹¶ä¸”ç”±äºJPOç®¡ç†ä¸å–„ï¼Œå®ƒæœ€è¿‘æ‰è¢«å®‰æ’æ¥å—å¿…è¦çš„å‡çº§ä»¥äº§ç”Ÿç»è¿‡éªŒè¯çš„MDLã€‚<br>å®éªŒå®¤éœ€è¦15ä¸ªæœˆæ‰èƒ½ç”Ÿæˆå®Œæ•´çš„MDLã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–°çš„ï¼Œæœªæ›¾é¢„æ–™åˆ°çš„æˆ˜åŒºä¸­çªç„¶éœ€è¦F-35æˆ˜æ–—æœºï¼Œé‚£äº›F-35å°†æ— æ³•è‡³å°‘æ‰§è¡Œ15ä¸ªæœˆçš„æˆ˜æ–—ä»»åŠ¡ã€‚<br>ç”±äºé‡ç¼–ç¨‹å®éªŒå®¤å°šæœªå»ºç«‹å…¨å¥—å¿…è¦çš„åœ°é¢é›·è¾¾æ¨¡æ‹Ÿå™¨è®¾å¤‡ï¼ŒDOTï¼†Eè¡¨ç¤ºï¼Œæœ€æ—©çš„é‡ç¼–ç¨‹å®éªŒå®¤å°†èƒ½å¤Ÿä¸ºIOTå’ŒEç”Ÿäº§ç»è¿‡éªŒè¯çš„MDLï¼Œå°†äº2018å¹´6æœˆå®Œæˆã€‚<br>è¿™æ˜¯åœ¨2017å¹´8æœˆè®¡åˆ’çš„IOTï¼†Eå¼€å§‹åè¿‘ä¸€å¹´ - ä¹Ÿå°±æ˜¯æµ·å†›é™†æˆ˜é˜Ÿå®£å¸ƒF-35Bæœ€åˆå…·å¤‡è¿è¥èƒ½åŠ›ä¸¤å¹´åã€‚ DOTï¼†Eè¿›ä¸€æ­¥è¡¨ç¤ºï¼ŒF-35 MDLé€‚åˆæˆ˜æ–—â€œå°†ä¸ä¼šè¿›è¡Œæµ‹è¯•å’Œä¼˜åŒ–ï¼Œä»¥ç¡®ä¿F-35èƒ½å¤Ÿåœ¨2020å¹´å‰æ£€æµ‹ï¼Œå®šä½å’Œè¯†åˆ«ç°ä»£éƒ¨ç½²çš„å¨èƒã€‚â€<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371288913-2328d482-bb99-4e2b-97f9-48d44b5c6a9f.png#align=left&amp;display=inline&amp;height=497&amp;originHeight=1200&amp;originWidth=1800&amp;status=done&amp;width=826" alt><br><a name="514d2da6"></a></p>
<h4 id="ä½œä¸ºè¿‘è·ç¦»ç©ºä¸­æ”¯æ´å¹³å°æ— æ•ˆ"><a href="#ä½œä¸ºè¿‘è·ç¦»ç©ºä¸­æ”¯æ´å¹³å°æ— æ•ˆ" class="headerlink" title="ä½œä¸ºè¿‘è·ç¦»ç©ºä¸­æ”¯æ´å¹³å°æ— æ•ˆ"></a><a href="#ekgawy"></a>ä½œä¸ºè¿‘è·ç¦»ç©ºä¸­æ”¯æ´å¹³å°æ— æ•ˆ</h4><p>F-35æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œåœ¨è¿œç¦»æˆ˜åœºçš„æƒ…å†µä¸‹æ‰§è¡Œç©ºå¯¹åœ°æ‹¦æˆªä»»åŠ¡ï¼Œä½†åœ¨å…¶ä»–é¢„å®šçš„ç©ºå¯¹åœ°ä½œç”¨ä¸­æ›´ä¸ºä¸¥é‡ï¼Œç›´æ¥æ”¯æŒéƒ¨é˜Ÿï¼Œè¿‘è·ç¦»ç©ºä¸­æ”¯æ´ï¼ˆCASï¼‰ã€‚</p>
<p>DOTï¼†Eå¾—å‡ºç»“è®ºè®¤ä¸ºï¼ŒF-35ç›®å‰çš„é…ç½®â€œè¿˜æ²¡æœ‰è¯æ˜CASèƒ½åŠ›ä¸ç¬¬å››ä»£é£æœºçš„èƒ½åŠ›ç›¸å½“ã€‚â€é‰´äºç©ºå†›éƒ¨é•¿æœ€è¿‘çš„å£°æ˜ï¼Œè¯¥æœåŠ¡æ‰“ç®—é‡æ–°åŠªåŠ›ï¼Œè¿™ä¸€è¯´æ³•ç‰¹åˆ«ä»¤äººä¸å®‰ã€‚åœ¨2021å¹´å–æ¶ˆCASæˆ˜æ–—è¯æ˜çš„A-10ã€‚</p>
<p>CASæ˜¯å¦ä¸€é¡¹ä¸»è¦ä»»åŠ¡ï¼Œç¼ºä¹æœ‰æ•ˆçš„å¤§ç‚®å°†æå¤§åœ°é™åˆ¶F-35çš„æˆ˜æ–—å®ç”¨æ€§ã€‚<br>å¯¹äºè®¸å¤šCASä»»åŠ¡æ¥è¯´ï¼Œæœ‰æ•ˆçš„å¤§ç‚®æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œåœ¨è¿™äº›ä»»åŠ¡ä¸­ï¼Œä»»ä½•å¤§å°çš„ç‚¸å¼¹ï¼Œæ— è®ºæ˜¯å¯¼å¼¹è¿˜æ˜¯éåˆ¶å¯¼ç‚¸å¼¹éƒ½ä¼šå¯¹åœ°é¢ä¸Šçš„å‹å†›é€ æˆå±é™©ï¼Œæˆ–è€…æ‹…å¿ƒé™„å¸¦æŸå®³ï¼Œä¾‹å¦‚åœ¨åŸå¸‚ç¯å¢ƒä¸­ã€‚</p>
<p>å½“æˆ‘ä»¬çš„éƒ¨é˜Ÿè¢«è·ç¦»åªæœ‰å‡ ç±³è¿œçš„æ•Œäººä¼å‡»æˆ–è¶…æ”¯æ—¶ï¼Œå¤§ç‚®æ›´åŠ é‡è¦ï¼Œåœ¨â€œå±é™©å…³é—­â€çš„æƒ…å†µä¸‹ï¼Œåªæœ‰æœ€å‡†ç¡®çš„ç«åŠ›æ‰èƒ½å¸®åŠ©æˆ‘ä»¬çš„æ–¹é¢æ€æ­»æˆ–é©±æ•£æ•Œäººã€‚</p>
<p>åœ¨æœ€è¿‘çš„å…°å¾·ç ”ç©¶ä¸­æ¥å—é‡‡è®¿çš„åœ°é¢æŒ‡æŒ¥å®˜è¡¨ç¤ºï¼Œä»–ä»¬æ›´å€¾å‘äºä½¿ç”¨A-10çš„ç‚®ç«ç”šè‡³æ˜¯å¯¼å¼¹å¼¹è¯ï¼Œå› ä¸º80ï¼…çš„ç‚®å¼¹åœ¨ç„å‡†ç‚¹çš„20è‹±å°ºåŠå¾„èŒƒå›´å†…å‘å°„ï¼Œæä¾›äº†ç²¾ç¡®çš„ç²¾ç¡®åº¦ã€‚å±é™©å…³é—­æƒ…å†µç»å¯¹éœ€è¦ã€‚å¤§ç‚®å¯¹äºå‡»ä¸­ç§»åŠ¨ç›®æ ‡ä¹Ÿæ˜¯æœ€æœ‰ç”¨çš„ï¼Œå› ä¸ºå¤§ç‚®çˆ†å‘å¯ä»¥åœ¨é¢„æœŸç§»åŠ¨æ—¶å¼•å¯¼ç›®æ ‡ã€‚</p>
<p><em>ç›®å‰èˆ°é˜Ÿä¸­çš„ä¸‰æ¶F-35å‹å·éƒ½ä¸èƒ½åœ¨æˆ˜æ–—ä¸­ä½¿ç”¨å¤§ç‚®ã€‚ äº‹å®ä¸Šï¼Œä»–ä»¬éƒ½æ²¡æœ‰æ¥è¿‘å®Œæˆä»–ä»¬çš„å‘å±•é£è¡Œæµ‹è¯• - æ›´ä¸ç”¨è¯´ä»–ä»¬çš„æ“ä½œé€‚ç”¨æ€§æµ‹è¯• - å¯¹äºæœºèº«å®‰å…¨æ€§ï¼Œå‡†ç¡®æ€§å’Œç›®æ ‡æ€ä¼¤åŠ›ã€‚</em><br><br><br>æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæ ¹æ®åˆæ­¥çš„æµ‹è¯•ç»éªŒï¼Œä¼¼ä¹æ‰€æœ‰ä¸‰ç§F-35ç‰ˆæœ¬çš„å¤´ç›”å¼ç„å‡†å…·çš„ä¸¥é‡ä¸å‡†ç¡®æ€§ä½¿å¾—å¤§ç‚®åœ¨ç©ºå¯¹ç©ºä½œæˆ˜ä¸­æ— æ•ˆ - è¿™ä¹Ÿä¼šä½¿CASæ— æ•ˆ - è€Œä¸”å¤´ç›”çš„å‡†ç¡®æ€§é—®é¢˜å¯èƒ½åœ¨æŠ€æœ¯ä¸Šæ˜¯å›ºæœ‰çš„ï¼Œä¹Ÿæ˜¯æ— æ³•æ²»æ„ˆçš„ã€‚</p>
<p>è¯·æ³¨æ„ï¼ŒCASçš„ç‚®å¼¹ç²¾åº¦è¦æ±‚æ¯”ç©ºæˆ˜è¦ä¸¥æ ¼å¾—å¤šï¼šåœ¨å‹å†›éƒ¨é˜Ÿé™„è¿‘å°„å‡»æ—¶ï¼Œå³ä½¿æ˜¯è½»å¾®çš„ç²¾ç¡®åº¦é—®é¢˜ä¹Ÿä¼šäº§ç”Ÿæ‚²å‰§æ€§åæœã€‚å¦‚å‰æ‰€è¿°ï¼Œæµ·å†›é™†æˆ˜é˜Ÿçš„F-35Bå’Œæµ·å†›çš„F-35Cçš„ç‚®èˆ±å¯èƒ½ä¼šå¢åŠ å¦ä¸€ä¸ªä¸å‡†ç¡®çš„æ¥æº - ä¹Ÿå¯èƒ½æ˜¯æ— æ³•æ²»æ„ˆçš„ - å¹¶ä¸”ä»æœªç»CASæµ‹è¯•ã€‚</p>
<p>F-35å¤§ç‚®å¯¹CASçš„æˆ˜æ–—é€‚ç”¨æ€§ç›´åˆ°3FåŒºå—IOTï¼†Eç»“æŸæ—¶æ‰ä¼šçŸ¥é“ï¼Œè¿™åœ¨2021å¹´ä¹‹å‰æ˜¯ä¸å¯èƒ½çš„ã€‚æœªèƒ½å®Œå…¨å®ç°è¿™äº›CASæµ‹è¯• - ç”±äºJPOç®¡ç†ä¸å–„å’Œæµ‹è¯•èµ„æºå»¶è¿Ÿï¼Œè¿™ç§å¯èƒ½æ€§å¾ˆå¤§ - è‚¯å®šä¼šå±å®³ç¾å†›çš„ç”Ÿå‘½ã€‚</p>
<p>é™¤äº†å…³é”®çš„å¤§ç‚®ä¸å‡†ç¡®æ€§é—®é¢˜ä¹‹å¤–ï¼Œé£è¡Œå‘˜å¤´ç›”æ˜¾ç¤ºå™¨ä¸­ç¬¦å·æ‚ä¹±çš„å¼•èµ·è¯¯å·®çš„æ··ä¹±åœ¨CASè§’è‰²ä¸­å°¤å…¶å±é™©ã€‚ DOTï¼†Eè¡¨ç¤ºï¼Œç”±äºç¬¦å·æ‚ä¹±æ¨¡ç³Šç›®æ ‡ï¼Œéš¾ä»¥è¯»å–å…³é”®ä¿¡æ¯å’Œpipper [aimpoint]ç¨³å®šæ€§ï¼Œç›®å‰çš„ç³»ç»Ÿâ€œåœ¨æ“ä½œä¸Šæ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”å¯èƒ½æ— æ³•å®Œæˆè®¡åˆ’çš„æµ‹è¯•ã€‚â€</p>
<p>å³ä½¿å¤´ç›”æ˜¾ç¤ºçš„ç¬¦å·æ²¡æœ‰é®æŒ¡é£è¡Œå‘˜çœ‹åˆ°ç›®æ ‡çš„èƒ½åŠ›ï¼ŒF-35çš„é¡¶ç¯·ä¹Ÿå¯èƒ½ã€‚å–·æ°”å¼é£æœºçš„é¡¶ç¯·æ˜¯ä¸€ç§åšçš„ä¸™çƒ¯é…¸ææ–™ï¼Œå…·æœ‰ä½å¯è§‚å¯Ÿçš„æ¶‚å±‚ï¼Œä»¥ä¿æŠ¤éšå½¢ã€‚è¿™ä½¿å¾—é¡¶ç¯·ä¸å¤ªé€æ˜ï¼Œå¹¶ä¸”æ ¹æ®DOTï¼†Eä¼¼ä¹æ‰­æ›²äº†é£è¡Œå‘˜çš„è§†é‡ã€‚</p>
<p>åœ¨F-35çš„æ¯ä¸ªç‰ˆæœ¬ä¸­è¿›ä¸€æ­¥é™åˆ¶åŠ å†œç‚®çš„æœ‰æ•ˆæ€§æ˜¯å®ƒæºå¸¦çš„25æ¯«ç±³ç‚®å¼¹çš„æ•°é‡â€“F-35Aä¸º182ï¼ŒBå’ŒCä¸º220.è¿™å¯¹äºCASæ¥è¯´æ˜¯éå¸¸ä¸è¶³çš„ï¼Œç‰¹åˆ«æ˜¯ä¸ç”±A-10è¿è½½çš„è¶…è¿‡1,100ä¸ª30æ¯«ç±³ç‚®å¼¹ã€‚è™½ç„¶A-10æœ‰è¶³å¤Ÿçš„ç‚®å¼¹ç”¨äº10åˆ°20æ¬¡æ”»å‡»ï¼Œä½†F-35çš„ä»»ä½•å˜ç§åªæœ‰ä¸¤æ¬¡ï¼Œä¹Ÿè®¸å››æ¬¡ä¼ çƒã€‚</p>
<p>æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ä»»ä½•CASæ­¦å™¨ï¼Œå¤§ç‚®æˆ–å…¶ä»–è£…ç½®ï¼Œæ›´æœ‰é™åˆ¶çš„æ˜¯ï¼ŒF-35æ— æ³•é£å¾—ä½è€Œä¸”é€Ÿåº¦æ…¢ï¼Œæ— æ³•æ‰¾åˆ°å…¸å‹çš„éš¾ä»¥çœ‹è§çš„CASç›®æ ‡å¹¶å®‰å…¨åœ°å°†å…¶è¯†åˆ«ä¸ºæ•Œäººæˆ–å‹å†›ï¼Œå³ä½¿æ˜¯åœ¨æç¤º ç”±åœ°é¢æˆ–ç©ºä¸­è§‚å¯Ÿå‘˜ã€‚</p>
<p>ç”±äºå…¶å°è€Œé‡è½½çš„æœºç¿¼ï¼ŒF-35æ— æ³•åœ¨å¯»æ‰¾éšè—å’Œä¼ªè£…ç›®æ ‡æ‰€éœ€çš„ä½é€Ÿä¸‹å……åˆ†æ“çºµ - å¹¶ä¸”å®Œå…¨æ²¡æœ‰è£…ç”²å’Œé«˜åº¦æ˜“ç‡ƒï¼Œå®ƒå°†é­å—æ¥è‡ªå°å‹æ­¥æªå’Œè½»å‹æœºæªçš„ç¾éš¾æ€§æŸå¤±åœ¨ä½æµ·æ‹”å’Œæ‰€éœ€çš„ä½é€Ÿåº¦ä¸‹ä¸å¯é¿å…åœ°å‘½ä¸­ã€‚ä¸æ­¤å½¢æˆé²œæ˜å¯¹æ¯”çš„æ˜¯ï¼ŒA-10ä¸“é—¨è®¾è®¡ç”¨äºå‡ºè‰²çš„ä½é€Ÿå’Œä½é€ŸæœºåŠ¨æ€§ï¼Œå¹¶ä¸”åœ¨è®¾è®¡ä¸Šå…·æœ‰å‰æ‰€æœªæœ‰çš„ç”Ÿå­˜èƒ½åŠ›ï¼Œå¯ä»¥æŠµå¾¡é‚£äº›æªæ”¯ï¼Œç”šè‡³å¯ä»¥æŠµæŠ—è‚©å°„å¼å¯¼å¼¹ã€‚</p>
<p>ç©ºå†›å®˜å‘˜ç»å¸¸è®¤ä¸ºï¼Œç¼ºä¹æœ‰æ•ˆçš„æªæ”¯æˆ–æ— æ³•æ“çºµä½é€Ÿå’Œæ…¢é€Ÿåœ¨æœªæ¥çš„æˆ˜äº‰ä¸­æ— å…³ç´§è¦ï¼Œå› ä¸ºç©ºå†›æ‰“ç®—ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡ŒCASï¼Œå³åœ¨é«˜æµ·æ‹”åœ°åŒºä½¿ç”¨è¾ƒå°çš„ç²¾ç¡®å¼¹è¯ã€‚ä½†F-35å°†ä¸ä¼šè¢«æ¸…é™¤è‡³å°‘æºå¸¦è¿™äº›æ­¦å™¨äº”å¹´ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒF-35ç°åœ¨åªèƒ½æºå¸¦ä¸¤æšåˆ¶å¯¼ç‚¸å¼¹ï¼Œè€Œè¿™äº›ç‚¸å¼¹åˆ™ä¸º500ç£…æˆ–æ›´å¤§ã€‚è¿™äº›æ¨¡å‹éƒ½ä¸é€‚ç”¨äºå‹å†›éƒ¨é˜Ÿé™„è¿‘ã€‚æ ¹æ®å†›æ–¹çš„é£é™©ä¼°ç®—è¡¨ï¼Œåœ¨250ç±³ï¼ˆ820è‹±å°ºï¼‰å¤„ï¼Œ500ç£…é‡çš„ç‚¸å¼¹æœ‰10ï¼…çš„å‡ ç‡ä½¿å‹å†›å¤±å»èƒ½åŠ›ã€‚è¿™æ„å‘³ç€åœ¨é‚£ä¸ªæ³¡æ²«ä¸­ï¼Œæ•Œäººå¯ä»¥åœ¨æ²¡æœ‰è¿‘è·ç¦»ç©ºä¸­æ”¯æ´çš„æƒ…å†µä¸‹è¿›è¡ŒæœºåŠ¨ã€‚<br>250ç£…é‡çš„å°ç›´å¾„ç‚¸å¼¹IIç°åœ¨å¤„äºä½é€Ÿç”Ÿäº§çŠ¶æ€ï¼Œå¹¶åœ¨F-15Eä¸Šä½¿ç”¨;ç„¶è€Œï¼Œå³ä¾¿å¦‚æ­¤ï¼Œåœ¨â€œå±é™©å…³é—­â€çš„äº¤ç«ä¸­ï¼Œåœ¨å‹å†›éƒ¨é˜Ÿé™„è¿‘ä½¿ç”¨å®ƒå¤ªå¤§äº†ï¼Œåœ¨F-35ä¸Šä½¿ç”¨å®ƒæ‰€éœ€çš„è½¯ä»¶å’Œç‚¸å¼¹æœºæ¶å°†æ— æ³•åœ¨2021å¹´ä¹‹å‰å®Œæˆæˆ˜æ–—ã€‚<br>è¿‘è·ç¦»ç©ºä¸­æ”¯æ´ä¸ä»…ä»…æ˜¯å¯¹ç›®æ ‡æŠ•æ·ç‚¸å¼¹çš„é£æœºã€‚ä¸ºäº†çœŸæ­£æœ‰æ•ˆï¼ŒCASä»»åŠ¡éœ€è¦é£è¡Œå‘˜å’Œåœ¨åœ°é¢ä½œæˆ˜çš„éƒ¨é˜Ÿä¹‹é—´è¿›è¡Œè¯¦ç»†çš„æˆ˜æœ¯åè°ƒã€‚å‡ åå¹´æ¥ï¼Œè¿™å·²ç»é€šè¿‡æ— çº¿ç”µé€šä¿¡æœ‰æ•ˆåœ°å®Œæˆï¼Œå¹¶ä¸”è¿‘å¹´æ¥ï¼Œè¿è¥ä¸­çš„é£æœºå·²ç»é€šè¿‡ç§°ä¸ºå¯å˜æ¶ˆæ¯æ ¼å¼å’Œé“¾è·¯-16çš„ç½‘ç»œç³»ç»Ÿä¸Šçš„è¯­éŸ³å’Œæ•°æ®çš„æ•°å­—é€šä¿¡é“¾è·¯è¿›è¡Œäº†å‡çº§ã€‚<br>åœ¨é£è¡Œæµ‹è¯•ä¸­ï¼ŒF-35çš„æ•°å­—æ•°æ®é“¾è·¯é‡åˆ°äº†å¾ˆå¤§çš„å›°éš¾ï¼ŒåŒ…æ‹¬ä¸¢å¤±çš„ä¿¡æ¯æˆ–ä»¥é”™è¯¯æ ¼å¼ä¼ è¾“çš„ä¿¡æ¯ã€‚è¿™è¿«ä½¿é£è¡Œå‘˜å’Œåœ°é¢æ§åˆ¶å™¨é€šè¿‡æ— çº¿ç”µé€šè¿‡è¯­éŸ³é‡å¤ä¿¡æ¯æ¥åœ¨ç³»ç»Ÿå‘¨å›´å·¥ä½œã€‚åœ¨è¿‘è·ç¦»çš„äº¤ç«ä¸­ï¼Œå½“ç§’æ•°è®¡ç®—æ—¶ï¼Œè¿™æ˜¯éƒ¨é˜Ÿæ— æ³•æ‰¿å—çš„å±é™©å»¶è¯¯ã€‚<br>F-35é˜²å®ˆé˜Ÿå‘˜æ€»æ˜¯è¿…é€ŸæŒ‡å‡ºè¿‘ä¹å¯¹ç­‰çš„å¯¹æ‰‹é˜²ç©ºç³»ç»Ÿæ‰€è°“çš„è‡´å‘½èƒ½åŠ›ï¼Œä½œä¸ºåœ¨CASä¸­ä½¿ç”¨F-35ä»¥åŠç¦æ­¢è½°ç‚¸çš„å¿…è¦æ€§çš„ç†ç”±ã€‚ç©ºå†›ä¸Šæ ¡Mike Pietruchaä»‹ç»äº†ä¸€ä¸ªæ›´å¥å…¨çš„æˆ˜æœ¯å’Œå†å²è§‚ç‚¹ï¼ŒæŒ‡å‡ºåœ¨ä¸€ä¸ªé‡é˜²ç©ºå¨èƒé¢†åŸŸé£è¡ŒCASä»»åŠ¡çš„æƒ…æ™¯å……å…¶é‡ä¸å¤ªå¯èƒ½ã€‚<br>ç¹çï¼Œç¼“æ…¢ï¼Œç‰©æµå¯†é›†çš„â€œé«˜å¨èƒâ€å¯¼å¼¹ç³»ç»Ÿä¸å¤ªå¯èƒ½è¢«è¿‘é‚»æ•Œäººè¿›è¡Œç°ä»£æœºåŠ¨æˆ˜äº‰æ‹–ç´¯ã€‚æ­£å¦‚ä»–ä»¬åœ¨ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜æœŸé—´é¢å¯¹çš„é‚£æ ·ï¼ŒéŸ©å›½ï¼Œè¶Šå—ï¼Œæ²™æ¼ é£æš´ï¼Œæˆ‘ä»¬çš„è¿‘è·ç¦»æ”¯æŒé£è¡Œå‘˜æ›´æœ‰å¯èƒ½é¢å¯¹è¾ƒè½»çš„è½»å‹å’Œç§»åŠ¨é˜²ç©ºï¼ˆæœºæªï¼Œè½»å‹é«˜å°„ç‚®å’Œäººç±»æºå¸¦çš„å¯»çƒ­å¯¼å¼¹ï¼‰ä»¥åŠè¿‡å»15å¤šå¹´çš„æˆ˜äº‰ã€‚<br>åœ¨å®£å¸ƒF-35 IOCæ—¶ï¼Œæµ·å†›é™†æˆ˜é˜Ÿå‘˜ - æ›¾ç»å°†CASä½œä¸ºç‹¬ç‰¹æµ·å†›é—äº§çš„ä¸€éƒ¨åˆ†è€Œè·å¥– - è€Œç©ºå†›æ˜¾ç„¶è®¤ä¸ºè¿™äº›F-35 CASé™åˆ¶æ˜¯å¯ä»¥æ¥å—çš„ã€‚<br>ä½†æ˜¯ï¼Œçœ‹åˆ°è¿‘è·ç¦»ç©ºä¸­æ”¯æ´ä½œä¸ºF-35è®¡åˆ’çš„äº‹åè¡¥æ•‘è¢«è§†ä¸ºå¯è€»æ˜¯å¯è€»çš„ã€‚ä¸ºäº†æä¾›è¶³å¤Ÿçš„CASï¼Œçº³ç¨äººçš„èµ„é‡‘å°†æ›´å¥½åœ°ç”¨äºç»´æŒç»è¿‡æˆ˜æ–—éªŒè¯çš„A-10ï¼Œç›´åˆ°æµ‹è¯•å’Œéƒ¨ç½²æ›´åŠ æœ‰æ•ˆä¸”æ›´å®æƒ çš„åç»­å·¥ä½œã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371489499-d230ab6a-88c6-49b8-9ed0-fa5750183844.png#align=left&amp;display=inline&amp;height=496&amp;originHeight=1197&amp;originWidth=1800&amp;status=done&amp;width=826" alt><br><a name="26f381ec"></a></p>
<h4 id="æµ·å†›çš„F-35ä¸é€‚åˆèˆªæ¯ä½œæˆ˜"><a href="#æµ·å†›çš„F-35ä¸é€‚åˆèˆªæ¯ä½œæˆ˜" class="headerlink" title="æµ·å†›çš„F-35ä¸é€‚åˆèˆªæ¯ä½œæˆ˜"></a><a href="#hnuaxl"></a>æµ·å†›çš„F-35ä¸é€‚åˆèˆªæ¯ä½œæˆ˜</h4><p>æµ·å†›F-35å˜å‹å¿…é¡»å…·å¤‡çš„æœ€é‡è¦ç‰¹å¾ä¹‹ä¸€æ˜¯å®ƒå¿…é¡»èƒ½å¤Ÿä»èˆªç©ºæ¯èˆ°ä¸Šè¿è¡Œã€‚å¦åˆ™ï¼Œè®¾è®¡é£æœºçš„ä¸“ä¸šæµ·å†›ç‰ˆæœ¬æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿä½†æµ·å†›è‡ªå·±çš„é£è¡Œå‘˜è¯´F-35Cå¹¶ä¸é€‚ç”¨äºè¿™äº›èˆ¹åªã€‚<br>å‘å±•æµ‹è¯•æ˜¾ç¤ºï¼Œå¼¹å°„å™¨å‘å°„æœŸé—´å‘ç”Ÿäº†å¤§é‡çš„æŠ½æ - ç§°ä¸ºâ€œè¿‡åº¦å‚ç›´æŒ¯è¡â€ - â€œä½¿F-35Cåœ¨æ“ä½œä¸Šä¸é€‚åˆèˆªæ¯ä½œæˆ˜ï¼Œâ€åœ¨æœ€æ–°ä¸€å¥—èˆ¹èˆ¶è¯•éªŒæœŸé—´åœ¨ç¾å›½ä¹”æ²»åç››é¡¿å·èˆªç©ºæ¯èˆ°ä¸Šè¿›è¡Œè®­ç»ƒçš„èˆ°é˜Ÿé£è¡Œå‘˜è¡¨ç¤ºâ€œã€‚<br>ä»æ‰¿è½½çš„ç”²æ¿ä¸Šèµ·é£çš„é£æœºéœ€è¦å¤§åŠ›æå‡ä»¥è¾¾åˆ°æå‡å’Œèµ·é£æ‰€éœ€çš„é€Ÿåº¦ï¼Œè¿™æ˜¯é€šè¿‡å®‰è£…åœ¨é©¾é©¶èˆ±å†…çš„å¼¹å°„å™¨å®ç°çš„ã€‚<br>åœ¨å–·æ°”å¼é£æœºå‘å°„ä¹‹å‰ï¼Œé£è¡Œå‘˜å¢åŠ å‘åŠ¨æœºæ¨åŠ›ã€‚ä¸ºäº†é˜²æ­¢å–·æ°”å¼é£æœºåœ¨å‘å°„å‰ä»èˆ¹çš„å‰éƒ¨æ»šè½ï¼Œå®ƒä»¬ä¼šè¢«æŒ¡ä½æ†æŒ¡ä½ã€‚å½“æ¨åŠ›è¢«å‹ä¸‹æ—¶ï¼Œæ¨åŠ›ä¼šå‹ç¼©é½¿è½®çš„æ”¯æŸ±ã€‚æ ¹æ®2017å¹´1æœˆæ³„éœ²ç»™å†…éƒ¨é˜²å¾¡çš„æµ·å†›æŠ¥å‘Šï¼Œå½“é‡Šæ”¾åé€€æ†å¹¶ä¸”å‘å°„å–·å°„æ—¶ï¼ŒF-35Cçš„æ”¯æŸ±è¢«å¸ä¸‹ï¼Œå¯¼è‡´æœºå¤´ä¸Šä¸‹å¼¹è·³ï¼Œéœ‡åŠ¨é£è¡Œå‘˜ã€‚<br>è¿™é‡Œçš„ä¸¥é‡ç¨‹åº¦å¯ä»¥åœ¨è¿™é‡Œæ¸…æ¥šåœ°çœ‹åˆ°ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371535128-4beffe90-8534-40a6-aaad-ca44e7de7567.png#align=left&amp;display=inline&amp;height=330&amp;originHeight=330&amp;originWidth=660&amp;status=done&amp;width=660" alt><br>è¿™ä¸ªé—®é¢˜å¯¹é£è¡Œå‘˜æ¥è¯´å¾ˆå±é™©ã€‚å¤´ç›”å¼æ˜¾ç¤ºå™¨éå¸¸é‡ï¼Œç›®å‰é‡é‡ä¸º5.1ç£…ï¼Œå½“å®ƒä¸å¼¹å°„å™¨å‘å°„æ—¶äº§ç”Ÿçš„åŠ›ç›¸ç»“åˆæ—¶ï¼Œé¢å¤–çš„é‡é‡ä¼šä½¿é£è¡Œå‘˜çš„å¤´éƒ¨å‰åæ™ƒåŠ¨ã€‚åœ¨70ï¼…çš„F-35å¼¹å°„å™¨å‘å°„ä¸­ï¼Œé£è¡Œå‘˜æŠ¥å‘Šå¤´éƒ¨å’Œé¢ˆéƒ¨å‡ºç°ä¸­åº¦è‡³é‡åº¦ç–¼ç—›ã€‚<br>å‘å°„ä¹Ÿä¼šå½±å“å¤´ç›”çš„å¯¹é½ã€‚é£è¡Œå‘˜æŠ¥å‘Šè¯´éš¾ä»¥è¯»å–å¤´ç›”å†…çš„é‡è¦ä¿¡æ¯ï¼Œä»–ä»¬å¿…é¡»åœ¨è¿›å…¥ç©ºä¸­åé‡æ–°è°ƒæ•´å®ƒã€‚é£è¡Œå‘˜è¯´ï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒå‘ç”Ÿåœ¨ä»»ä½•é£è¡Œçš„æœ€å…³é”®é˜¶æ®µä¹‹ä¸€ã€‚é£è¡Œå‘˜è¯•å›¾é€šè¿‡æ”¶ç´§èº«ä½“å®‰å…¨å¸¦æ¥æŠµæŠ—æŒ¯è¡ï¼Œä½†è¿™ä¼šåœ¨ç´§æ€¥æƒ…å†µä¸‹éš¾ä»¥è§¦åŠç´§æ€¥å¼€å…³å’Œå¼¹å°„æ‰‹æŸ„ï¼Œä»è€Œäº§ç”Ÿæ–°çš„é—®é¢˜ã€‚</p>
<p>F-35çš„é¡¹ç›®ç»ç†å…‹é‡Œæ–¯æ‰˜å¼—Â·æ³¢æ ¼ä¸¹ä¸­å°†è¡¨ç¤ºï¼Œä»–å°†å°è¯•å¯¹F-35Cçš„å‰èµ·è½æ¶æ”¯æŸ±è¿›è¡ŒçŸ­æœŸè°ƒæ•´ä»¥è§£å†³é—®é¢˜ï¼Œä½†å®é™…ä¸Šå¯èƒ½éœ€è¦é•¿æœŸä¿®å¤ï¼Œä¾‹å¦‚é‡æ–°è®¾è®¡æ•´ä¸ªå‰èµ·è½æ¶ç»„ä»¶ã€‚è¿™ç§æƒ…å†µä¸å¤ªå¯èƒ½åœ¨2019å¹´ä¹‹å‰å¼€å§‹ - åŒå¹´æµ·å†›å·²è¡¨ç¤ºæœ‰æ„å®£å¸ƒF-35Cå‡†å¤‡æˆ˜æ–—ã€‚</p>
<p>åˆ°é‚£æ—¶ï¼Œæµ·å†›å¾ˆå¯èƒ½åœ¨èˆ°é˜Ÿä¸­æ‹¥æœ‰36æ¶F-35Cï¼Œå…¶ä¸­æ¯æ¶éƒ½éœ€è¦æ›´æ¢å‰èµ·è½æ¶ï¼Œä½†éœ€è¦ç¡®å®šæˆæœ¬ã€‚</p>
<p>F-35Cçš„é—®é¢˜ä¸ä»…é™äºé£è¡Œçš„å¼€å§‹ã€‚å°±åƒå–·æ°”å¼é£æœºéœ€è¦ä»èˆªç©ºæ¯èˆ°èµ·é£ä¸€æ ·ï¼Œå®ƒä¹Ÿéœ€è¦åœ¨ç€é™†æœŸé—´åœæ­¢å¸®åŠ©ã€‚è¿™æ˜¯é€šè¿‡æ¨ªè·¨ç”²æ¿çš„ç”µç¼†å®ç°çš„ã€‚å½“ä¸€æ¶å–·æ°”å¼é£æœºé™è½æ—¶ï¼Œé£æœºä¸Šçš„ä¸€ä¸ªæŒ‚é’©æŠ“ä½å…¶ä¸­ä¸€æ ¹ç”µç¼†ï¼Œè¯¥ç”µç¼†ä½¿ç”¨èˆ¹å†…çš„æ¶²å‹å‘åŠ¨æœºå¸æ”¶èƒ½é‡å¹¶ä½¿å–·æ°”æœºåœæ­¢è¿è½¬ã€‚</p>
<p><em>ä»–çš„æµ‹è¯•å›¢é˜Ÿå‘ç°F-35Cçš„åˆ¶åŠ¨è£…ç½®ä¸Šçš„é’©ç‚¹ç£¨æŸé€Ÿåº¦æ¯”é¢„æœŸå¿«ä¸‰å€ã€‚ è™½ç„¶å®ƒåº”è¯¥è‡³å°‘æŒç»­15æ¬¡ç€é™†ï¼Œä½†åœ¨æµ‹è¯•ä¸­æŒç»­æ—¶é—´æœ€é•¿çš„ä¸€ä¸ªé’©ç‚¹æ˜¯5ã€‚ æ®æŠ¥é“ï¼Œè¯¥è®¡åˆ’æ­£åœ¨è€ƒè™‘é‡æ–°è®¾è®¡åˆ¶åŠ¨è£…ç½®ä»¥ä½¿å…¶æ›´åŠ åšå›ºã€‚</em><br><br><br>F-35Cè¿˜æœ‰å¾…è§£å†³çš„å¦ä¸€ä¸ªç»“æ„æ€§é—®é¢˜æ¶‰åŠæœºç¿¼ã€‚åœ¨è¯•é£æœŸé—´ï¼Œå·¥ç¨‹å¸ˆå‘ç°æœºç¿¼æœ«ç«¯çš„å¼ºåº¦ä¸è¶³ä»¥æ”¯æ’‘AIM-9XçŸ­ç¨‹ç©ºå¯¹ç©ºå¯¼å¼¹çš„é‡é‡ã€‚ F-35Cçš„æœºç¿¼ä¸¤ç«¯æŠ˜å ï¼Œä»¥ä¾¿åœ¨é£æœºè½½ä½“çš„ç”²æ¿å’Œæœºåº“çš„æ‹¥æŒ¤èŒƒå›´å†…èŠ‚çœç©ºé—´ã€‚å½“å¯¼å¼¹ç»è¿‡æœºç¿¼æŠ˜å æ—¶ï¼Œå½“é£æœºéš¾ä»¥æ“çºµå’Œç€é™†æ—¶ï¼Œé‡é‡è¶…è¿‡ç»“æ„é™åˆ¶ã€‚<br>æ ¹æ®DOTï¼†Eçš„è¯´æ³•ï¼Œåœ¨é—®é¢˜å¾—åˆ°è§£å†³ä¹‹å‰ï¼Œâ€œF-35Cå¯¹äºå¯¼å¼¹è¿è¾“å’Œå°±ä¸šå°†å…·æœ‰æœ‰é™çš„é£è¡ŒèŒƒå›´ï¼Œè¿™å°†å¯¹æœºåŠ¨ï¼Œ[å’Œ]è¿‘è·ç¦»æ¥åˆäº§ç”Ÿä¸åˆ©å½±å“ã€‚â€è¿™ç”šè‡³æ¯”F-35çš„å…¶ä»–å›ºæœ‰æœºåŠ¨é™åˆ¶ã€‚é—®é¢˜éå¸¸ä¸¥é‡ï¼Œæ³¢æ ¼ä¸¹å°†å†›æ‰¿è®¤F-35Cå°†éœ€è¦ä¸€ä¸ªå®Œå…¨é‡æ–°è®¾è®¡çš„å¤–ç¿¼ã€‚<br>å‘å°„å’Œæ¢å¤é£æœºåªæ˜¯æµ·å†›èˆªç©ºæŒ‘æˆ˜çš„ä¸€éƒ¨åˆ†ã€‚ç»´æŠ¤äººå‘˜è¿˜å¿…é¡»èƒ½å¤Ÿåœ¨æµ·ä¸Šä¿æŒå–·æ°”å¼é£æœºçš„é£è¡Œæ€§ã€‚æœºç»„å¿…é¡»èƒ½å¤Ÿæ‰§è¡Œçš„å…³é”®ç»´æŠ¤åŠŸèƒ½ä¹‹ä¸€æ˜¯å‘åŠ¨æœºæ‹†å¸å’Œå®‰è£…ï¼ˆRï¼†Iï¼‰ã€‚ 2016å¹´8æœˆï¼ŒCrewsåœ¨ä¹”æ²»åç››é¡¿å·èˆªç©ºæ¯èˆ°ä¸Šè¿›è¡Œäº†ç¬¬ä¸€æ¬¡Rï¼†Iæ¦‚å¿µéªŒè¯æ¼”ç¤ºã€‚<br>æœºç»„äººå‘˜éœ€è¦55ä¸ªå°æ—¶æ¥å®Œæˆå‘åŠ¨æœºäº¤æ¢ï¼Œè¿™æ¯”åœ¨ä¼ ç»Ÿé£æœºä¸Šæ‰§è¡Œç›¸åŒæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´è¦é•¿å¾—å¤šã€‚ä¾‹å¦‚ï¼ŒF / A-18ä¸Šçš„å‘åŠ¨æœºå¯ä»¥åœ¨å…­åˆ°å…«ä¸ªå°æ—¶å†…æ›´æ¢ã€‚ DOTï¼†EæŒ‡å‡ºï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæœºç»„äººå‘˜èŠ±æ—¶é—´æ‰§è¡Œæ‰€æœ‰å¿…è¦æ­¥éª¤ï¼Œå¹¶æŒ‡å‡ºéšç€æœºç»„äººå‘˜è·å¾—æ›´å¤šç»éªŒï¼Œæœªæ¥çš„è¿­ä»£å¯èƒ½ä¼šæ›´å¿«ä¸€äº›ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæœºç»„äººå‘˜å……åˆ†åˆ©ç”¨äº†æ•´ä¸ªæœºåº“æµ·æ¹¾ç©ºé—´ï¼Œè¿™æ˜¯ä»–ä»¬ä¹˜åé£æœºæœºç¿¼æ—¶ä¸ä¼šæœ‰çš„ä¸œè¥¿ã€‚è¿™å¯èƒ½åŠ å¿«äº†æ¼”ç¤ºæœŸé—´çš„è¿‡ç¨‹ã€‚</p>
<p>æ›´æ¢F-35ä¸­çš„å‘åŠ¨æœºæ¯”F / A-18æ›´å¤æ‚ã€‚å·¥ä½œäººå‘˜å¿…é¡»æ‹†é™¤å‡ ä¸ªçš®è‚¤é¢æ¿å’Œä¸€ä¸ªç§°ä¸ºå°¾é’©æ”¯æ¶çš„å¤§å‹ç»“æ„ä»¶ï¼Œä»¥ä¾¿æ‹†å¸å‘åŠ¨æœºï¼Œä»è€Œåœ¨ç»´æŠ¤æœºåº“ä¸­éœ€è¦æ›´å¤šç©ºé—´ã€‚è¿™äº›éƒ¨ä»¶ä»¥åŠä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç®¡å­å’Œç”µçº¿å¿…é¡»å¦¥å–„å‚¨å­˜ï¼Œä»¥é˜²æ­¢æŸåï¼ŒåŒæ—¶è¿˜è¦å ç”¨é¢å¤–çš„ç©ºé—´ã€‚</p>
<p>ç»´æŠ¤äººå‘˜å¿…é¡»åœ¨å­˜åœ¨å…¨ç©ºæ°”ç¿¼çš„æƒ…å†µä¸‹æ‰§è¡Œæ­¤è¿‡ç¨‹ï¼Œä»¥ä¾¿äº†è§£ç³»ç»Ÿæ˜¯å¦åœ¨æ“ä½œä¸Šåˆé€‚ã€‚å¹¶ä¸”è¯¥è¿‡ç¨‹å¿…é¡»å˜å¾—éå¸¸æœ‰æ•ˆï¼Œä»¥äº§ç”Ÿæˆ˜æ–—æ‰€éœ€çš„å‡ºå‡»ç‡ã€‚</p>
<p>åœ¨ä¹”æ²»åç››é¡¿è¯•éªŒæœŸé—´å‘ç°çš„å¦ä¸€ä¸ªé—®é¢˜æ¶‰åŠF-35Cè®¡ç®—æœºç”Ÿæˆçš„å¤§é‡æ•°æ®æ–‡ä»¶çš„ä¼ è¾“ã€‚</p>
<p>F-35è®¡åˆ’ä¾èµ–äºè‡ªåŠ¨åå‹¤ä¿¡æ¯ç³»ç»Ÿï¼ˆALISï¼‰ï¼Œè¿™æ˜¯åºå¤§è€Œå¤æ‚çš„è®¡ç®—æœºç³»ç»Ÿï¼Œæ‰€æœ‰F-35éƒ½ç”¨äºä»»åŠ¡è§„åˆ’ï¼Œç»´æŠ¤è¯Šæ–­ï¼Œç»´æŠ¤è®¡åˆ’ï¼Œé›¶ä»¶è®¢è´­ç­‰ã€‚ä¸ºäº†æ­£å¸¸å·¥ä½œï¼Œç³»ç»Ÿå¿…é¡»åœ¨èˆ¹ä¸Šå’Œèˆ¹å¤–é€šè¿‡ç½‘ç»œç§»åŠ¨å¤§é‡æ•°æ®ã€‚</p>
<p>åœ¨åç››é¡¿è¯•éªŒæœŸé—´ï¼Œæœºç»„äººå‘˜å¿…é¡»é€šè¿‡èˆ¹èˆ¶çš„å«æ˜Ÿç½‘ç»œä¼ è¾“ä¸­ç­‰å¤§å°çš„200 MB ALISæ–‡ä»¶ã€‚èŠ±äº†ä¸¤å¤©æ—¶é—´ã€‚å¸¦å®½é™åˆ¶å’Œä¸ç¨³å®šçš„è¿æ¥æå¤§åœ°é˜»ç¢äº†æ•°æ®çš„ä¼ è¾“ã€‚è®¸å¤šè¿™æ ·çš„å˜é€Ÿå™¨ - ç”šè‡³æ›´å¤§çš„å˜é€Ÿå™¨ - å°†éœ€è¦æ”¯æŒæ•´ä¸ªæœºç¿¼ã€‚<br>æ­¤å¤–ï¼Œèˆ°é˜Ÿç»å¸¸åœ¨â€œæ’æ”¾æ§åˆ¶â€æˆ–æ— çº¿ç”µé™éŸ³æœŸé—´è¿è¡Œï¼Œä»¥é¿å…å°†å…¶ä½ç½®æ³„éœ²ç»™æ•Œäººï¼Œè¿›ä¸€æ­¥é˜»ç¢äº†ä¿æŒF-35é£è¡Œæ‰€éœ€çš„æ•°æ®ä¼ è¾“ã€‚</p>
<p>ä¹”æ²»åç››é¡¿çš„å®¡åˆ¤äº§ç”Ÿäº†å¤§é‡ä»¤äººè®¨åŒçš„æ–°é—»æŠ¥é“ã€‚è‡³å°‘åœ¨å…¬å¼€åœºåˆï¼Œæµ·å†›å£°ç§°æˆåŠŸäº†ã€‚ç„¶è€Œï¼Œæœ‰è¯æ®è¡¨æ˜æµ·å†›å¯¹è¯¥è®¡åˆ’ä¸å¤ªå…´å¥‹ï¼Œå› ä¸ºä¸Šé¢è®¨è®ºè¿‡è¿™ç±»é—®é¢˜ï¼Œå½“ç„¶è¿˜æœ‰æˆæœ¬ - æœåŠ¡è´­ä¹°F-35Cçš„é€Ÿåº¦å¾ˆæ…¢ã€‚</p>
<p>è™½ç„¶ç©ºå†›å‡†å¤‡åœ¨2017å¹´è´­ä¹°44æ¶æ–°çš„F-35ï¼Œä½†æµ·å†›åªä¼šä¹°ä¸¤æ¶ã€‚æµ·å†›è¿˜åœ¨å…¶2017å¹´æ— èµ„é‡‘ä¼˜å…ˆé¡ºåºï¼ˆâ€œæ„¿æœ›â€ï¼‰åå•ä¸­è¦æ±‚å¦å¤–å¢åŠ 14æ¶F / A-18ï¼Œå¹¶å†å¢åŠ ä¸¤æ¶F-35Cã€‚æ­¤å¤–ï¼Œè¿™æ˜¯æœåŠ¡æ²¡æœ‰æ€¥äºè¿‡æ—©å®£å¸ƒæˆ˜æ–—å‡†å¤‡çš„å”¯ä¸€å˜ç§ã€‚<br>äº”è§’å¤§æ¥¼çš„ä¸€äº›é¢†å¯¼äººè¡¨ç¤ºï¼Œæµ·å†›çš„å˜ç§æ˜¯å”¯ä¸€ä¸€ä¸ªå—ç‰¹æœ—æ™®æ”¿åºœä¸‹ä»¤å®¡æŸ¥çš„å¨èƒï¼Œè€Œå›½é˜²éƒ¨é•¿è©¹å§†æ–¯é©¬è’‚æ–¯ç›®å‰æ­£åœ¨è¿›è¡Œå®¡æŸ¥ã€‚è¿™å¯èƒ½è¯æ˜æ˜¯è¯¥è®¡åˆ’çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­å¯»æ±‚F-35çš„å¯è¡Œæ›¿ä»£æ–¹æ¡ˆã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371695072-55a96b06-342b-48ae-9d76-cf8961517f70.png#align=left&amp;display=inline&amp;height=497&amp;originHeight=1200&amp;originWidth=1800&amp;status=done&amp;width=826" alt><br><a name="e5652373"></a></p>
<h3 id="å…³äºF-35å”¯ä¸€éšå½¢çš„ä¸œè¥¿-ä»·æ ¼æ ‡ç­¾"><a href="#å…³äºF-35å”¯ä¸€éšå½¢çš„ä¸œè¥¿-ä»·æ ¼æ ‡ç­¾" class="headerlink" title="å…³äºF-35å”¯ä¸€éšå½¢çš„ä¸œè¥¿ - ä»·æ ¼æ ‡ç­¾"></a><a href="#w1shub"></a>å…³äºF-35å”¯ä¸€éšå½¢çš„ä¸œè¥¿ - ä»·æ ¼æ ‡ç­¾</h3><p>è‡ªå¤§é€‰ä»¥æ¥ï¼Œäººä»¬å¯¹F-35çš„è¿›ä¸€æ­¥é‡‡è´­å’Œå¯è´Ÿæ‹…æ€§è¡¨ç¤ºäº†å¾ˆå¤šçœ‹æ³•ã€‚å”çº³å¾·Â·ç‰¹æœ—æ™®æ€»ç»Ÿåœ¨å°±èŒå…¸ç¤¼å‰å¯¹ä¸€ç³»åˆ—æ¨æ–‡ä¸­çš„ä»·å€¼æå‡ºäº†è´¨ç–‘ï¼Œä½†å½“ä»–å®£å¸ƒæ´›å…‹å¸Œå¾·Â·é©¬ä¸ä»æœ€æ–°ä¸€æ‰¹F-35çš„ä»·æ ¼ä¸­å‰Šå‡6äº¿ç¾å…ƒæ—¶ï¼Œä»–å¸Œæœ›è¯¥è®¡åˆ’èƒ½å¤Ÿå¤§å¹…æ”¹å˜ã€‚ ã€‚<br>æ´›å…‹å¸Œå¾·Â·é©¬ä¸å…¬å¸åŠå…¶åœ¨æ—¥æœ¬ç‰¹è®¸å…å†…çš„åˆä½œä¼™ä¼´å·²è¡¨ç¤ºä»·æ ¼ä¼šé™ä½ï¼Œè¿™ä¸»è¦æ˜¯ç”±äºåˆ¶é€ ä¸šçš„æ•ˆç‡æé«˜ã€‚<br>ä»è¡¨é¢ä¸Šçœ‹ï¼Œè¿™å¯¹ç¾å›½çº³ç¨äººæ¥è¯´ä¼¼ä¹æ˜¯ä¸€ä¸ªå·¨å¤§çš„å‘å±•ï¼Œä½†ç°åœ¨ä»»ä½•â€œèŠ‚çœä¸‹æ¥â€çš„é’±æœ€ç»ˆéƒ½ä¼šèŠ±è´¹æ›´å¤šï¼Œå› ä¸ºæˆ‘ä»¬è´­ä¹°äº†ä¸€å †æœªç»æµ‹è¯•çš„åŸå‹ï¼Œåæ¥éœ€è¦è¿›è¡Œå¤§é‡æ˜‚è´µçš„æ”¹é€ ã€‚å¦‚æœæ´›å…‹å¸Œå¾·Â·é©¬ä¸å…¬å¸å’Œè”åˆè®¡åˆ’åŠå…¬å®¤èƒ½å¤Ÿåœ¨è®¡åˆ’å®Œæˆæµ‹è¯•å’Œè¯„ä¼°è¿‡ç¨‹ä¹‹å‰æ‰¹å‡†å¯¹400æ¶F-35è¿›è¡Œä¸ºæœŸä¸‰å¹´çš„â€œå¤§é‡è´­ä¹°â€ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±æ›´åŠ å¤æ‚äº†ã€‚<br>æŠ¥åˆŠä¸ŠæŠ¥çš„ä»·æ ¼é€šå¸¸åŸºäºç©ºå†›å¸¸è§„èµ·é£å˜å‹F-35Açš„æˆæœ¬ - è¿™ä¸‰ç§å˜å‹ä¸­æˆæœ¬æœ€ä½ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªæˆæœ¬æ•°å­—åªæ˜¯å¯¹æœªæ¥æˆæœ¬çš„ä¼°è®¡ï¼Œå‡è®¾ä»ç°åœ¨å¼€å§‹ï¼ŒF-35çš„ä¸€åˆ‡éƒ½å°†å®Œç¾è¿è¡Œ - è¿™ä¸å¤ªå¯èƒ½ï¼Œå› ä¸ºè¯¥è®¡åˆ’è¿›å…¥å…¶æŠ€æœ¯æœ€å…·æŒ‘æˆ˜æ€§çš„æµ‹è¯•é˜¶æ®µã€‚<br>æ­£å¦‚æœ€æ–°çš„DOTï¼†EæŠ¥å‘Šæ˜¾ç¤ºï¼Œåœ¨F-35å‡†å¤‡æˆ˜æ–—ä¹‹å‰ï¼Œè¯¥è®¡åˆ’è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚<br>è”åˆè®¡åˆ’åŠå…¬å®¤æœ€è¿‘å£°ç§°F-35Açš„ä»·æ ¼åœ¨2016è´¢å¹´åˆåŒä¸­æ¯ä¸ªéƒ½ä½äº1äº¿ç¾å…ƒã€‚ç„¶è€Œï¼Œåœ¨2016è´¢å¹´çš„ç«‹æ³•ä¸­ï¼Œå›½ä¼šä¸ºæ¯æ¶F-35Aæ‹¨æ¬¾1.196äº¿ç¾å…ƒã€‚<br>å³ä½¿è¿™ä¸ªæ•°å­—ä¹Ÿä¸èƒ½è¯´æ˜æ•´ä¸ªæ•…äº‹ - å®ƒåªåŒ…æ‹¬é‡‡è´­æˆæœ¬ï¼Œè€Œä¸æ˜¯å°†F-35Aå¸¦åˆ°æœ€æ–°æ‰¹å‡†çš„é…ç½®æ‰€éœ€çš„æˆæœ¬ï¼Œä»¥åŠç”¨äºå®¹çº³å’Œæ“ä½œF-35Açš„é¢å¤–å†›äº‹å»ºç­‘æˆæœ¬ã€‚<br>å½“ç„¶ï¼Œ1.196äº¿ç¾å…ƒçš„ä»·æ ¼æ ‡ç­¾ä¸åŒ…æ‹¬å¼€å‘å’Œæµ‹è¯•F-35Açš„ä»»ä½•ç ”å‘è´¹ç”¨ã€‚æµ·å†›é™†æˆ˜é˜ŸF-35Bå’Œæµ·å†›F-35Cçš„2016å¹´ä»…ç”Ÿäº§æˆæœ¬åˆ†åˆ«ä¸º1.664äº¿ç¾å…ƒå’Œ1.852äº¿ç¾å…ƒã€‚<br>é¦–å…ˆï¼Œå®ƒä»¬ä¸åŒ…æ‹¬ä¿®å¤æœ€è¿‘ï¼Œå½“å‰å’Œæœªæ¥æµ‹è¯•ä¸­å‘ç°çš„è®¾è®¡ç¼ºé™·æ‰€éœ€çš„æˆæœ¬ - è¿™ä¸æ˜¯ä¸€ç¬”ä¸å¤§çš„é‡‘é’±ã€‚å®ƒä»¬ä¹Ÿä¸åŒ…æ‹¬è®¡åˆ’çš„ç°ä»£åŒ–åŠªåŠ›çš„æˆæœ¬ï¼Œä¾‹å¦‚é£æœºçš„ç¬¬4åº§ï¼Œå°†æ¥å°†è¢«çº³å…¥æ‰€æœ‰F-35Aã€‚æ”¿åºœé—®è´£åŠå…¬å®¤ä¼°è®¡ï¼Œè¯¥è®¡åˆ’å°†åœ¨æœªæ¥å…­å¹´å†…è‡³å°‘èŠ±è´¹30äº¿ç¾å…ƒç”¨äºç°ä»£åŒ–å·¥ä½œã€‚<br>æ®GAOç§°ï¼Œä¾‹å¦‚ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æ‰€è§£å†³çš„ä¸€äº›é—®é¢˜çš„ä¿®æ”¹è´¹ç”¨ä¸º4.267äº¿ç¾å…ƒã€‚è¿™äº›é£æœºä¸­çš„æ¯ä¸€æ¶éƒ½å·²ç»è¿‡ä¿®æ”¹ï¼Œå°†æ¥éœ€è¦æ›´å¤šã€‚ç©ºå†›å·²ç»æ‰¿è®¤å¿…é¡»æ”¹è£…äº¤ä»˜ç»™å®ƒå’Œè¿è¥èˆ°é˜Ÿçš„æ‰€æœ‰108æ¶F-35Aã€‚éšç€å·²çŸ¥é—®é¢˜å¾—åˆ°ä¿®å¤å¹¶ä¸”å‘ç°æ–°é—®é¢˜ï¼Œè¿™äº›æˆæœ¬å°†ç»§ç»­å¢é•¿ï¼Œå¹¶ä¸”å®ƒä»¬æ˜¯æ¯æ¶é£æœºæˆæœ¬çš„ç»„æˆéƒ¨åˆ†ã€‚<br>éšç€ç¨‹åºä»æµ‹è¯•çš„ç®€å•éƒ¨åˆ† - å¼€å‘æˆ–å®éªŒå®¤æµ‹è¯• - è½¬ç§»åˆ°æœªæ¥å‡ å¹´çš„å…³é”®ä½œæˆ˜ï¼ˆè¿è¡Œï¼‰æµ‹è¯•æœŸï¼Œå°†ä¼šå‘ç°æ›´å¤šé—®é¢˜ã€‚<br>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å‘ç”Ÿåœ¨2016å¹´åº•ï¼Œå½“æ—¶å·¥ç¨‹å¸ˆåœ¨F-35çš„æ²¹ç®±å†…å‘ç°äº†ç¢ç‰‡ã€‚ç»è¿‡ä»”ç»†æ£€æŸ¥ï¼Œä»–ä»¬å‘ç°åŒ…è£¹åœ¨å†·å´å‰‚ç®¡çº¿å‘¨å›´çš„ç»ç¼˜ææ–™å·²ç»è§£ä½“ï¼Œå› ä¸ºåˆ†åŒ…å•†æœªèƒ½ä½¿ç”¨é€‚å½“çš„å¯†å°å‰‚ã€‚å¹¶ä¸”ï¼Œå½“GAOä¼°è®¡å°†èŠ±è´¹4.267äº¿ç¾å…ƒæ¥ä¿®å¤å·²ç»åœ¨ä»“åº“ä¸­çš„F-35Aä¸­çš„ä¸€äº›å·²çŸ¥é—®é¢˜æ—¶ï¼Œå°šæœªå‘ç°å†·å´å‰‚ç®¡çº¿ç»ç¼˜é—®é¢˜ã€‚<br>å¿…é¡»åœ¨å·²ç»ç”Ÿäº§å’Œè´­ä¹°çš„é£æœºæœºé˜Ÿä¸­è®¾è®¡ï¼Œæµ‹è¯•å’Œå®æ–½å¯¹æ­¤é—®é¢˜å’Œå…¶ä»–é—®é¢˜çš„ä¿®å¤ã€‚<br>å…¶æ¬¡ï¼ŒJPOï¼Œæ´›å…‹å¸Œå¾·é©¬ä¸å…¬å¸å’Œäº”è§’å¤§æ¥¼æ‰€ä½¿ç”¨çš„ä¸å®Œæ•´çš„å•ä½æˆæœ¬ä¼°ç®— - ä»–ä»¬æ‰€è°“çš„â€œé£è¡Œâ€å•ä½æˆæœ¬ - ä¸åŒ…æ‹¬è´­ä¹°æ”¯æŒè®¾å¤‡ï¼ˆå·¥å…·ï¼ŒALISè®¡ç®—æœºï¼ŒåŸ¹è®­æ¨¡æ‹Ÿå™¨ï¼Œåˆå§‹å¤‡ä»¶ï¼‰éœ€è¦ä½¿F-35Aæœºé˜Ÿèƒ½å¤Ÿè¿è¡Œã€‚ä»å­—é¢ä¸Šçœ‹ï¼Œå›½é˜²éƒ¨çš„â€œé£è¡Œâ€æˆæœ¬å¹¶æ²¡æœ‰è´­ä¹°èƒ½å¤Ÿè¿›è¡Œé£è¡Œæ“ä½œçš„ç³»ç»Ÿã€‚<br>äº”è§’å¤§æ¥¼å·²ç»æ‰¿è¯ºè´­ä¹°346æ¶F-35ï¼Œå› ä¸ºè¯¥è®¡åˆ’å·²è¿›å…¥ç¾å›½å›½é˜²éƒ¨å§”å©‰åœ°ç§°ä¹‹ä¸ºâ€œä½é€Ÿåˆå§‹ç”Ÿäº§â€ã€‚<br>798å–·æ°”å¼é£æœºæœåŠ¡å°†åœ¨2018å¹´è‡³2021å¹´æœŸé—´å¤§çº¦450æ¶æ¬¡è´­ä¹°çš„798æ¶å–·æ°”å¼é£æœºå°†å æ€»é‡‡è´­é‡çš„è¿‘33ï¼…â€¦â€¦æ‰€æœ‰è¿™äº›éƒ½åœ¨è¯¥è®¡åˆ’å®Œæˆåˆæ­¥è¿è¡Œæµ‹è¯•ä¹‹å‰ï¼Œå¹¶ä¸”å‘ç°äº†ä»€ä¹ˆæŒ‰é¢„å®šå·¥ä½œï¼Œä»€ä¹ˆæ²¡æœ‰å¨ã€‚<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒçœŸæ­£çš„é—®é¢˜å‘ç°è¿‡ç¨‹åªä¼šåœ¨2019å¹´æŒ‰è®¡åˆ’å¼€å§‹è¿è¡Œæµ‹è¯•æ—¶å¼€å§‹ï¼Œæˆ–è€…æ›´æœ‰å¯èƒ½åœ¨2020å¹´æˆ–2021å¹´å¼€å§‹ï¼Œå½“æ—¶è¿è¥ä»£è¡¨æ€§é£æœºå®é™…ä¸Šå·²å‡†å¤‡å¥½è¿›è¡Œæµ‹è¯•ã€‚ç©ºå†›å·²ç»å¼€å§‹ä¿®æ”¹çš„108æ¶é£æœºåªæ˜¯å†°å±±ä¸€è§’ï¼Œè¿™ä¸ªæ•°å­—ä¸åŒ…æ‹¬æ•°ç™¾æ¶æµ·å†›é™†æˆ˜é˜Ÿå’Œæµ·å†›é£æœºçš„ç±»ä¼¼ä¿®æ”¹ã€‚<br>æ‹Ÿè®®çš„â€œå¤§å®—è´­ä¹°â€æå‡ºäº†è®¸å¤šå…¶ä»–é—®é¢˜ã€‚ä¹Ÿè®¸Gilmoreæ‰€æå‡ºçš„æœ€ç›¸å…³çš„é—®é¢˜æ˜¯ï¼š<br>Block Buyæ˜¯å¦ä¸æ”¿åºœä¸»å¼ çš„â€œè´­ä¹°å‰é£è¡Œâ€æ–¹æ³•ä¸€è‡´ï¼Œä»¥åŠâ€œç¾å›½æ³•å…¸â€ç¬¬10ç¯‡ä¸­è§„å®šçš„è¿è¥æµ‹è¯•è¦æ±‚çš„ç†ç”±ï¼Œè¿˜æ˜¯è¢«è§†ä¸ºâ€œå…¨é¢â€ â€œIOTï¼†Eä¹‹å‰çš„å†³å®šæ˜¯å¦å·²ç»å®Œæˆå¹¶å‘å›½ä¼šæŠ¥å‘Šï¼Œä¸ç¬¦åˆæ³•å¾‹è§„å®šï¼Ÿ<br>åªè¦ç¬¦åˆæŸäº›æ ‡å‡†ï¼Œè”é‚¦æ³•å¾‹å…è®¸å¤šå¹´åˆåŒè´­ä¹°æ”¿åºœè´¢äº§ã€‚å›½ä¼šé€šå¸¸æ¯å¹´æ‰¹å‡†å¤§å¤šæ•°æ­¦å™¨è´­ä¹°è®¡åˆ’ï¼Œä»¥ç¡®ä¿å¯¹è®¡åˆ’è¿›è¡Œé€‚å½“çš„ç›‘ç£ï¼Œå¹¶ä¿æŒå¯¹æ‰¿åŒ…å•†è¡¨ç°ä»¤äººæ»¡æ„çš„æ¿€åŠ±ã€‚<br>æ ¹æ®Title 10 U.S.C.ï¼ŒSection 2306bï¼Œå¯¹äºæœ‰èµ„æ ¼è¿›è¡Œå¤šå¹´é‡‡è´­çš„è®¡åˆ’ï¼ŒåˆåŒå¿…é¡»ä¿ƒè¿›å›½å®¶å®‰å…¨ï¼Œåº”è¯¥èŠ‚çœå¤§é‡èµ„é‡‘ï¼Œå‡å°‘å‡ ç‡ï¼Œå¹¶ä¸”è®¾è®¡ç¨³å®šã€‚ F-35ä¼¼ä¹åœ¨å‰ä¸‰ä¸ªæ ‡å‡†ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªå¤±è´¥ï¼Œå¹¶ä¸”è‚¯å®šæ˜¯ç¬¬å››ä¸ªå¤±è´¥äº†ã€‚<br>å…³äºF-35æˆæœ¬é—®é¢˜çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†æ˜¯è´­ä¹°å¤§å‹é£æœºæ˜¯å¦åˆç†ï¼Œå¹¶æ‹…å¿ƒä»¥åä¿®å¤å°šæœªå‘ç°çš„é—®é¢˜çš„æˆæœ¬ã€‚è¿™è‚¯å®šæ˜¯å¢åŠ æˆæœ¬çš„å¥½æ–¹æ³•ï¼Œä½†åœ¨ä¸´æ—¶ä¸­éšè—å®ƒã€‚</p>
<p><em>å®é™…æ“ä½œF-35æœºé˜Ÿçš„æˆæœ¬ä»ç„¶å­˜åœ¨ã€‚ ç¾å›½å›½é˜²éƒ¨ä¼°è®¡ï¼Œè¯¥è®¡åˆ’50å¹´çš„æ‰€æœ‰åŸ¹è®­å’Œè¿è¥è¿è¥ - å‡è®¾æ¯æ¶é£æœºçš„å¯¿å‘½ä¸º30å¹´ - å°†ä¸º1ä¸‡äº¿ç¾å…ƒï¼Œä½¿è´­ä¹°å’Œè¿è¥F-35çš„æˆæœ¬è‡³å°‘è¾¾åˆ°1.4ä¸‡äº¿ç¾å…ƒã€‚</em><br><br><br>æ“ä½œF-35çš„æˆæœ¬éå¸¸é«˜ï¼Œå› ä¸ºé£æœºä¸å…¶ä»–é£æœºç›¸æ¯”éå¸¸å¤æ‚ã€‚æ ¹æ®ç©ºå†›è‡ªå·±çš„æ•°æ®ï¼Œ2016è´¢å¹´ï¼Œæ¯æ¶F-35é£æœºå¹³å‡é£è¡Œ163å°æ—¶ï¼Œæ¯å°æ—¶é£è¡Œ4426ç¾å…ƒã€‚<br>ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨åŒä¸€å¹´ï¼Œæœºé˜Ÿä¸­çš„æ¯æ¶F-16é£æœºå¹³å‡é£è¡Œ258å°æ—¶ï¼Œæ¯é£è¡Œå°æ—¶20,398ç¾å…ƒã€‚ A-10å¹³å‡æ¯å°æ—¶é£è¡Œ358å°æ—¶ï¼Œæ¯å°æ—¶17,227ç¾å…ƒã€‚è™½ç„¶è¿™äº›æ—¶é—´ä»æœªç»è¿‡ç‹¬ç«‹å®¡æ ¸ï¼Œè€Œä¸”æ— æ³•ç¡®å®šå®ƒä»¬æ˜¯å¦å®Œæ•´ï¼Œä½†ç°æœ‰æ•°æ®è¡¨æ˜F-35çš„é£è¡Œæˆæœ¬æ˜¯é£æœºçš„ä¸¤å€ä»¥ä¸Šã€‚<br>äº”è§’å¤§æ¥¼éšè—F-35çœŸæ­£æˆæœ¬çš„ä¸€ä¸ªæ›´é‡è¦çš„æ–¹å¼æ˜¯å®ƒæ¨è¿Ÿåˆ°ç¬¬4åŒºå—å¼€å‘å’Œäº¤ä»˜åº”è¯¥åœ¨ç¬¬3åŒºæä¾›çš„è®¸å¤šå…³é”®èƒ½åŠ›ã€‚ç›®å‰å·²è®¡åˆ’ä½†æœªåŒ…æ‹¬æ ¹æ®æ”¿åºœé—®è´£å±€çš„æ•°æ®ï¼Œåœ¨F-35çš„å®˜æ–¹æˆæœ¬ä¼°ç®—ä¸­ - æˆ–è€…ç”šè‡³ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„å•ç‹¬æ”¶è´­è®¡åˆ’ - æ˜¯ä¸€ä¸ªç”±å››éƒ¨åˆ†ç»„æˆçš„Block 4å‡çº§ï¼Œè‡³å°‘è€—èµ„30äº¿ç¾å…ƒã€‚<br>æ­¤å¤–ï¼ŒDOTï¼†EæŠ¥å‘Šç§°â€œæœ‰17ä¸ªè®°å½•çš„å¤±è´¥ï¼Œæ— æ³•æ»¡è¶³è§„èŒƒè¦æ±‚ï¼Œç¨‹åºæ‰¿è®¤å¹¶æ‰“ç®—å¯»æ±‚åˆåŒè§„èŒƒå˜æ›´ï¼Œä»¥ä¾¿ç»“æŸSDD [ç³»ç»Ÿå¼€å‘å’Œæ¼”ç¤º]ã€‚â€<br>è¿™æ„å‘³ç€F-35è®¡åˆ’æ— æ³•æä¾›17ç§å…³é”®ä½œæˆ˜èƒ½åŠ›ï¼Œè€Œä¸”è®¡åˆ’åŠå…¬å®¤æ­£è¯•å›¾ç»™æ´›å…‹å¸Œå¾·Â·é©¬ä¸å…¬å¸æä¾›äº¤ä»˜é€šè¡Œè¯ï¼Œç›´åˆ°åæœŸçš„é«˜çº§å¼€å‘è¿‡ç¨‹ã€‚<br>è™½ç„¶æ²¡æœ‰äººå…¬å¼€å£°æ˜ç°åœ¨ä¸ä¼šåŒ…æ‹¬å“ª17ç§æˆ˜æ–—èƒ½åŠ›ï¼Œä½†å®ƒä»¬éƒ½æ˜¯F-35åº”è¯¥æ‹¥æœ‰çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”ç¾å›½äººæ°‘æ­£åœ¨ä¸ºæ­¤ä»˜å‡ºå…¨ä»·ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†æ¥ä¼šæ”¯ä»˜æ›´å¤šçš„é’±æ¥å‡çº§ç°åœ¨è´­ä¹°çš„F-35ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿæ‰§è¡Œæˆ‘ä»¬å·²ç»æ”¯ä»˜çš„åŠŸèƒ½ã€‚<br>2016å¹´F-35Açš„1.196äº¿ç¾å…ƒå•ä½æˆæœ¬ä¸¥é‡ä½ä¼°ï¼Œå¤šå¹´æ¥ä¸ä¼šå……åˆ†äº†è§£é¢å¤–æˆæœ¬ã€‚é‚£äº›å‡è£…2016å¹´æˆæœ¬ä½äº1äº¿ç¾å…ƒçš„äººåªæ˜¯åœ¨æ¬ºéª—å…¬ä¼—ã€‚</p>
<p><a name="67732f9d"></a></p>
<h3 id="æˆ˜æ–—åŠ›æœ‰æ•ˆ"><a href="#æˆ˜æ–—åŠ›æœ‰æ•ˆ" class="headerlink" title="æˆ˜æ–—åŠ›æœ‰æ•ˆ"></a><a href="#q9x6ix"></a>æˆ˜æ–—åŠ›æœ‰æ•ˆ</h3><p>åœ¨æ¯ä¸€æµçš„ç©ºå†›ä¸­ï¼Œå‡ºæˆ˜ä¼˜ç§€çš„æˆ˜æ–—æœºé£è¡Œå‘˜è¦æ±‚ä»–ä»¬æ¯æœˆè‡³å°‘é£è¡Œ30ä¸ªå°æ—¶æ¥ç£¨ç»ƒå’Œæé«˜ä»–ä»¬çš„æˆ˜æ–—æŠ€èƒ½ã€‚è¿™å°±æ˜¯F-35ç¼ºä¹æˆ˜æ–—åŠ›çš„æœ€å¤§åŸå› ï¼šç”±äºé£æœºå‰æ‰€æœªæœ‰çš„å¤æ‚æ€§å’Œç›¸åº”çš„å¯é æ€§å’Œç»´æŠ¤è´Ÿæ‹…ï¼Œé£è¡Œå‘˜æ ¹æœ¬æ— æ³•ç»å¸¸é£è¡Œä»¥è·å¾—è¶³å¤Ÿçš„å®é™…é£è¡Œæ—¶é—´æ¥å‘å±•ä»–ä»¬éœ€è¦çš„æˆ˜æ–—æŠ€èƒ½ã€‚<br>å¦‚æœé£è¡Œå‘˜æ— æ³•è·å¾—è¶³å¤Ÿçš„é£è¡Œæ—¶é—´ï¼Œé£è¡Œå‘˜æŠ€èƒ½å°±ä¼šèç¼©ã€‚å³ä½¿æ‹¥æœ‰å“è¶Šçš„æŠ€æœ¯ï¼Œè®­ç»ƒæœ‰ç´ çš„é£è¡Œå‘˜ä¹Ÿä¸ä¼šå—åˆ°è®­ç»ƒæœ‰ç´ çš„é£è¡Œå‘˜åœ¨é£è¡Œä¸å¤ªå¤æ‚çš„é£æœºä¸Šçš„å½±å“ã€‚<br>é£è¡Œæ—¶é—´ä¸è¶³ä¹Ÿä¼šé€ æˆå±é™©çš„å®‰å…¨çŠ¶å†µï¼Œå¨èƒåˆ°é£è¡Œå‘˜çš„è®­ç»ƒç”Ÿå‘½ã€‚æµ·å†›é™†æˆ˜é˜Ÿåœ¨è¿‡å»ä¸€å¹´ä¸­é­é‡äº†ä¹æ¬¡ä¸¥é‡çš„é£æœºå æ¯äº‹æ•…ï¼Œé€ æˆ14äººæ­»äº¡ã€‚è¯¥å†›å›¢çš„é¡¶çº§é£è¡Œå‘˜æœ€è¿‘è¡¨ç¤ºï¼Œæ’è½¦äº‹æ•…çš„é£™å‡ä¸»è¦æ˜¯ç”±äºé£è¡Œå‘˜æ²¡æœ‰è¶³å¤Ÿçš„é£è¡Œæ—¶é—´ã€‚<br>è¿™ç§è¶‹åŠ¿å°†éšç€F-35è€Œæ¶åŒ–ã€‚é‰´äºå…¶å›ºæœ‰çš„å¤æ‚æ€§å’Œç›¸å…³çš„æˆæœ¬ï¼ŒF-35æä¸å¯èƒ½ç»å¸¸é£è¡Œä»¥è·å¾—æˆåŠŸçš„é£è¡Œå‘˜ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545371909219-5c3e7d63-0c79-41a3-a751-dc3afbf49136.png#align=left&amp;display=inline&amp;height=497&amp;originHeight=1200&amp;originWidth=1800&amp;status=done&amp;width=826" alt><br><a name="1a41eab4"></a></p>
<h3 id="F-35å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åˆ°è¾¾å—ï¼Ÿ"><a href="#F-35å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åˆ°è¾¾å—ï¼Ÿ" class="headerlink" title="F-35å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åˆ°è¾¾å—ï¼Ÿ"></a><a href="#ebawca"></a>F-35å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åˆ°è¾¾å—ï¼Ÿ</h3><p>å³ä½¿è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸­é¢‘ï¼ŒF-35ä¹Ÿå¯ä»¥åƒæ´›å…‹å¸Œå¾·Â·é©¬ä¸æ‰€è¯´çš„é‚£æ ·åœ¨æˆ˜æ–—ä¸­è¡¨ç°å‡ºæ¥ - æ›´ä¸ç”¨è¯´F-16ï¼ŒA-10å’ŒF-18çš„æ›¿ä»£å“åº”è¯¥å¦‚ä½•è¡¨ç° - å¦‚æœå–·æ°”å¼é£æœºä¸èƒ½æ»¡è¶³ä»–ä»¬éœ€è¦çš„åœ°æ–¹ï¼Œé‚£ä¹ˆè¯¥è®¡åˆ’ä»ç„¶æ¯«æ— ä»·å€¼ã€‚<br>æœ‰å‡ ä¸ªå› ç´ å¯¼è‡´éš¾ä»¥åŠæ—¶éƒ¨ç½²F-35ä¸­é˜Ÿã€‚ä¸€ä¸ªæ˜¯F-35çš„ä»»åŠ¡è§„åˆ’ç³»ç»Ÿï¼Œå®ƒæ˜¯ALISç½‘ç»œçš„ä¸€éƒ¨åˆ†ã€‚åœ¨å®Œæˆæˆ˜æ–—ä»»åŠ¡çš„ç»†èŠ‚ - ä¾‹å¦‚ç›®æ ‡ï¼Œé¢„æµ‹çš„æ•Œæ–¹é›·è¾¾ä½ç½®ï¼Œè¦é£è¡Œçš„è·¯çº¿å’Œæ­¦å™¨è£…è½½ - ä¹‹åï¼Œéœ€è¦å°†æ•°æ®ç¼–ç¨‹åˆ°é£æœºä¸­ã€‚å°†è¯¥ä¿¡æ¯åŠ è½½åˆ°å¢¨ç›’ä¸Šï¼Œç„¶åå°†å¢¨ç›’æ’å…¥å–·å˜´ä¸­ã€‚<br>F-35é£è¡Œå‘˜åœ¨Offboard Mission Supportï¼ˆOMSï¼‰ç³»ç»Ÿä¸Šå¯¹è¿™äº›å¼¹è¯ç­’è¿›è¡Œç¼–ç¨‹ã€‚<br>DOTï¼†Eå‘ç°çš„é—®é¢˜æ˜¯ï¼Œé£è¡Œå‘˜ä¸€ç›´è®¤ä¸ºç”¨äºæ”¯æŒä»»åŠ¡è§„åˆ’çš„ç³»ç»Ÿâ€œç¹çï¼Œæ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸é€‚åˆæ“ä½œä½¿ç”¨ã€‚â€ä»–ä»¬æŠ¥å‘Šè¯´ï¼Œæ„å»ºä»»åŠ¡è®¡åˆ’æ–‡ä»¶æ‰€éœ€çš„æ—¶é—´å¤ªé•¿ï¼Œä»¥è‡³äºæ‰°ä¹±äº†è¶…è¿‡ä¸€æ¶é£æœºçš„ä»»åŠ¡è®¡åˆ’å‘¨æœŸã€‚</p>
<p><em>è¿™æ„å‘³ç€å½“å‡ æ¶F-35æ¥æ”¶ä»»åŠ¡æ—¶ï¼Œå¦‚æœåˆ†é…äº†å¤§é‡çš„è®¡åˆ’æ—¶é—´ï¼Œä»–ä»¬å°±æ— æ³•è¶³å¤Ÿå¿«åœ°å®Œæˆæ‰€æœ‰é£è¡Œå‰è¿‡ç¨‹ä»¥æŒ‰æ—¶å¯åŠ¨ã€‚</em><br><br><br>2016å¹´2æœˆå’Œ3æœˆï¼Œç©ºå†›åœ¨åŠ åˆ©ç¦å°¼äºšçš„çˆ±å¾·åå…¹ç©ºå†›åŸºåœ°å‘çˆ±è¾¾è·å·çš„å±±åœ°ç©ºå†›åŸºåœ°è¿›è¡Œäº†éƒ¨ç½²æ¼”ç¤ºï¼Œå¯¹F-35è®¡åˆ’è¿›è¡Œäº†é‡å¤§æµ‹è¯•ã€‚è¿™æ˜¯è¯¥æœåŠ¡é¦–æ¬¡å°è¯•ä½¿ç”¨æ›´æ–°ALISçš„ç‰ˆæœ¬ - åŸºäºåœ°é¢çš„è®¡ç®—æœºç³»ç»Ÿï¼Œç”¨äºè¯Šæ–­æœºæ¢°é—®é¢˜ï¼Œè®¢è´­å’Œè·Ÿè¸ªæ›´æ¢é›¶ä»¶ï¼Œå¹¶æŒ‡å¯¼ç»´ä¿®äººå‘˜è¿›è¡Œç»´ä¿®ã€‚<br>æ— è®ºä½•æ—¶ä¸­é˜Ÿéƒ¨ç½²ï¼Œéƒ½å¿…é¡»åœ¨éƒ¨ç½²F-35çš„ä»»ä½•åœ°æ–¹å»ºç«‹ä¸€ä¸ªALISæ¢çº½ã€‚ Crewså»ºç«‹äº†ä¸€ä¸ªALISæ ‡å‡†æ“ä½œå•å…ƒï¼ˆSOUï¼‰ï¼Œå®ƒç”±å‡ ä¸ªè®¡ç®—æœºè®¾å¤‡ç»„æˆã€‚æŠ€æœ¯äººå‘˜å°†ä½¿ç”¨è¿™äº›è®¾ç½®ä¸€ä¸ªå°å‹ä¸»æœºï¼Œç„¶åå¿…é¡»å°†å…¶æ’å…¥å…¨çƒèŒƒå›´çš„ALISç½‘ç»œã€‚<br>å·¥ä½œäººå‘˜èŠ±äº†å‡ å¤©æ—¶é—´è®©ALISåœ¨æœ¬åœ°åŸºç¡€ç½‘ç»œä¸Šå·¥ä½œã€‚ç»è¿‡å¤§é‡çš„æ•…éšœæ’é™¤åï¼ŒITäººå‘˜å‘ç°ä»–ä»¬å¿…é¡»åœ¨Internet Explorerä¸Šæ›´æ”¹å¤šä¸ªè®¾ç½®ï¼Œä»¥ä¾¿ALISç”¨æˆ·å¯ä»¥ç™»å½•ç³»ç»Ÿã€‚è¿™åŒ…æ‹¬é™ä½å®‰å…¨è®¾ç½®ï¼ŒDOTï¼†Eä»¥å€¼å¾—ç§°é“çš„è½»ææ·¡å†™çš„æ–¹å¼æŒ‡å‡ºè¿™æ˜¯â€œå¯èƒ½ä¸æ‰€éœ€çš„ç½‘ç»œå®‰å…¨å’Œç½‘ç»œä¿æŠ¤æ ‡å‡†ä¸å…¼å®¹çš„è¡Œä¸ºâ€ã€‚<br>ALISæ•°æ®å¿…é¡»åœ¨ä¸­é˜Ÿæ‰€åœ¨çš„ä»»ä½•åœ°æ–¹ã€‚åœ¨é£æœºè¢«å…è®¸æ‰§è¡Œé£è¡Œä»»åŠ¡ä¹‹å‰ï¼Œæœºç»„äººå‘˜å¿…é¡»å°†æ•°æ®ä»æœ¬å’ç«™çš„ä¸­é˜Ÿä¸»ALISè®¡ç®—æœºä¼ è¾“åˆ°éƒ¨ç½²çš„ALIS SOUã€‚åœ¨Mountain Homeéƒ¨ç½²æœŸé—´ï¼Œæ­¤è¿‡ç¨‹èŠ±äº†ä¸‰å¤©æ—¶é—´ã€‚è¿™æ¯”ä¹‹å‰çš„æ¼”ç¤ºè¦å¿«ï¼Œä½†æ´›å…‹å¸Œå¾·Â·é©¬ä¸ä¸ºæ¼”ä¹ æä¾›äº†8ä½é¢å¤–çš„ALISç®¡ç†å‘˜ã€‚<br>ç›®å‰è¿˜ä¸æ¸…æ¥šæ‰¿åŒ…å•†æˆ–ç©ºå†›æ˜¯å¦ä¼šåœ¨æœªæ¥çš„éƒ¨ç½²ä¸­åŒ…å«è¿™ç§çº§åˆ«çš„æ”¯æŒã€‚å½“æ¼”ä¹ ç»“æŸæ—¶ä¸­é˜Ÿé‡æ–°éƒ¨ç½²å›çˆ±å¾·åå…¹æ—¶ï¼Œç®¡ç†å‘˜èŠ±äº†å››å¤©æ—¶é—´å°†æ‰€æœ‰æ•°æ®ä¼ å›ä¸»ALISè®¡ç®—æœºã€‚è¿™ç§å»¶è¿Ÿå°†é™åˆ¶F-35åœ¨å±æœºæ—¶åˆ»å¿«é€Ÿéƒ¨ç½²çš„èƒ½åŠ›ã€‚</p>
<p><em>å³ä½¿å–·æ°”æœºèƒ½å¤Ÿå®šä½è¶³å¤Ÿçš„æ—¶é—´æ¥åº”å¯¹å±æœºï¼Œé•¿æ—¶é—´ä¸Šä¼ æ—¶é—´ç­‰é—®é¢˜ä¹Ÿå¯èƒ½ä½¿å®ƒä»¬åœ¨ç©ºä¸­éœ€è¦æ—¶ä¿æŒåœ¨åœ°é¢ä¸Šã€‚å›ºå®šåœ¨åœ°é¢ä¸Šçš„é£æœºæ˜¯ç›®æ ‡ï¼Œè€Œä¸æ˜¯èµ„äº§ã€‚</em></p>
<p>å¦ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹æ¶‰åŠå‘æ¯ä¸ªALISæ ‡å‡†æ“ä½œå•å…ƒæ·»åŠ æ–°é£æœºã€‚æ¯æ¬¡å°†F-35ä»ä¸€ä¸ªåŸºåº§ç§»åŠ¨åˆ°ALISå·²ç»å¯åŠ¨çš„å¦ä¸€ä¸ªåŸºåº§æ—¶ï¼Œå¿…é¡»å°†å…¶å¯¼å…¥è¯¥ç³»ç»Ÿã€‚è¿™éœ€è¦24å°æ—¶ã€‚å› æ­¤ï¼Œå½“F-35éƒ¨ç½²åˆ°æ–°åŸºåœ°æ—¶ï¼Œæ•´ä¸ªä¸€å¤©ä¼šåœ¨å¤„ç†æ•°æ®æ—¶ä¸¢å¤±ã€‚å¹¶ä¸”ä¸€æ¬¡åªèƒ½ä¸Šä¼ ä¸€æ¶é£æœºã€‚<br>å¦‚æœæ•´ä¸ªä¸­é˜Ÿï¼ˆé€šå¸¸æ˜¯12æ¶é£æœºï¼‰éœ€è¦è¢«å¼•å¯¼ï¼Œæ•´ä¸ªè¿‡ç¨‹å°†éœ€è¦å°†è¿‘ä¸¤å‘¨æ—¶é—´ï¼Œè¿«ä½¿æŒ‡æŒ¥å®˜æ…¢æ…¢å°†ä»–çš„F-35é£æœºæŠ•å…¥æˆ˜æ–—ã€‚<br>è¯¥è®¡åˆ’çš„å…³é”®ä»»åŠ¡è½¯ä»¶ä¹Ÿå‡ºç°å»¶è¯¯ã€‚å¦‚å‰æ‰€è¿°ï¼ŒF-35éœ€è¦å¹¿æ³›çš„ä»»åŠ¡æ•°æ®è´Ÿè½½ï¼ˆMDLï¼‰ï¼Œä»¥ä¾¿é£æœºçš„ä¼ æ„Ÿå™¨å’Œä»»åŠ¡ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚ MDLåœ¨æŸç§ç¨‹åº¦ä¸ŠåŒ…æ‹¬æœ‰å…³æ•Œäººå’Œå‹å¥½é›·è¾¾ç³»ç»Ÿçš„ä¿¡æ¯ã€‚ä»–ä»¬å‘é€å–·æ°”å¼ä¼ æ„Ÿå™¨çš„æœç´¢å‚æ•°ï¼Œä»¥ä¾¿ä»–ä»¬æ­£ç¡®è¯†åˆ«å¨èƒã€‚è¿™äº›éœ€è¦æ›´æ–°ä»¥åŒ…å«æœ€æ–°ä¿¡æ¯ã€‚å®ƒä»¬ä¹Ÿé€‚ç”¨äºæ¯ä¸ªä¸»è¦åœ°ç†åŒºåŸŸã€‚<br>MDLéƒ½åœ¨ä½›ç½—é‡Œè¾¾å·åŸƒæ ¼æ—ç©ºå†›åŸºåœ°çš„ç¾å›½é‡ç¼–ç¨‹å®éªŒå®¤è¿›è¡Œç¼–ç¨‹ï¼Œç„¶åå‘é€ç»™æ‰€æœ‰ç›¸å…³çš„ä¸­é˜Ÿã€‚è¯¥å®éªŒå®¤æ˜¯æ•´ä¸ªF-35è®¡åˆ’ä¸­æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ã€‚æ®DOTï¼†Eç§°ï¼Œè¯¥å®éªŒå®¤å¿…é¡»èƒ½å¤Ÿâ€œå¿«é€Ÿåˆ›å»ºï¼Œæµ‹è¯•å’Œä¼˜åŒ–MDLï¼Œå¹¶åœ¨ä»£è¡¨ç°å®æƒ…æ™¯çš„å‹åŠ›æ¡ä»¶ä¸‹éªŒè¯å…¶åŠŸèƒ½ï¼Œä»¥ç¡®ä¿F-35ä»»åŠ¡ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå’Œé£æœºçš„è¿è¡Œæ•ˆç‡ã€‚æˆ˜æ–—ä»¥åŠF-35ä¸Block 3Fçš„IOTï¼†Eã€‚â€œ<br>å®˜å‘˜ä»¬åœ¨2012å¹´ç¡®å®šäº†è¯¥å®éªŒå®¤ç®¡ç†å±‚çš„ä¸¥é‡ç¼ºé™·ã€‚çº³ç¨äººåœ¨2013å¹´è‡³2016å¹´æœŸé—´èŠ±è´¹äº†4500ä¸‡ç¾å…ƒæ¥è§£å†³è¿™äº›é—®é¢˜ã€‚å°½ç®¡æœ‰è­¦å‘Šå’Œé¢å¤–èµ„é‡‘ï¼Œä½†å®éªŒå®¤çš„å¼€å‘ä»ç„¶å—åˆ°ç®¡ç†ä¸å–„çš„å›°æ‰°ï¼Œè¿™ç§ç®¡ç†ä¸èƒ½é˜»æ­¢åœ¨å½“å‰çš„åŸºæœ¬ä½œæˆ˜é…ç½®ä¸­â€œæœ‰æ•ˆåœ°åˆ›å»ºï¼Œæµ‹è¯•å’Œä¼˜åŒ–è¿è¥é£æœºçš„MDLâ€ã€‚<br>éœ€è¦å‡çº§å®éªŒå®¤ä»¥æ”¯æŒF-35ä¸Šä½¿ç”¨çš„æ¯ä¸ªè½¯ä»¶ç‰ˆæœ¬ã€‚è¯¥å®éªŒå®¤ç›®å‰é…ç½®ä¸ºæ”¯æŒå—2Bå’Œ3iè½¯ä»¶ç‰ˆæœ¬ã€‚ F-35çš„ç¬¬ä¸€ä¸ªå®Œå…¨æˆ˜æ–—ç‰ˆè½¯ä»¶å°†æ˜¯Block 3Fã€‚è¯¥å®éªŒå®¤éœ€è¦è¿›è¡Œé‡å¤§æ›´æ”¹ä»¥æ”¯æŒæ­¤ç‰ˆæœ¬ï¼Œè¿™å¯¹äºæˆ˜æ–—æµ‹è¯•æ˜¯å¿…è¦çš„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®Œå…¨æˆ˜æ–—å‡†å¤‡å°±ç»ªã€‚<br>å®éªŒå®¤è¿œè¿œè½åäºä¸€äº›å¿…è¦çš„è®¾å¤‡ç”šè‡³å°šæœªè´­ä¹°ã€‚ä¾‹å¦‚ï¼Œè¯¥è®¾æ–½è¿˜ä¾èµ–äºå‰é¢æåˆ°çš„ä¸“ç”¨å°„é¢‘å‘ç”Ÿå™¨æ¥é‡æ–°åˆ›é€ æ½œåœ¨å¯¹æ‰‹å¯èƒ½å¯¹F-35ä½¿ç”¨çš„é‚£ç§ä¿¡å·ã€‚å®éªŒå®¤å°†ä½¿ç”¨å®ƒä»¬æ¥æµ‹è¯•MDLï¼Œç„¶åå°†å®ƒä»¬å‘é€åˆ°æœºé˜Ÿé£æœºä¸Šï¼Œä»¥ç¡®ä¿å–·æ°”å¼é£æœºçš„ä¼ æ„Ÿå™¨èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å®ƒä»¬ã€‚<br>åœ¨æ€¥äºå‡è£…åˆå§‹ä½œæˆ˜èƒ½åŠ›çš„æƒ…å†µä¸‹ï¼Œç©ºå†›å’Œæµ·å†›é™†æˆ˜é˜Ÿå®é™…ä¸Šå·²ç»åˆ¶é€ å‡ºä¸€æ¶å®Œå…¨æœªå‡†å¤‡å¥½é¢å¯¹æ•Œäººçš„é£æœºã€‚<br><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545372059027-ed5f34d0-f86c-471f-bcce-9c165524ebe0.png#align=left&amp;display=inline&amp;height=431&amp;originHeight=1040&amp;originWidth=1800&amp;status=done&amp;width=826" alt></p>
<p><a name="1845d1d2"></a></p>
<h4 id="F-35å¯é æ€§é—®é¢˜"><a href="#F-35å¯é æ€§é—®é¢˜" class="headerlink" title="F-35å¯é æ€§é—®é¢˜"></a><a href="#shztbe"></a>F-35å¯é æ€§é—®é¢˜</h4><p>å³ä½¿ä¸€æ¶F-35ä¸­é˜Ÿèƒ½å¤Ÿåˆ°è¾¾éœ€è¦çš„åœ°æ–¹ï¼Œåœ¨éœ€è¦å®ƒçš„æ—¶å€™ï¼Œå¦‚æœå®ƒä¸èƒ½é£è¡Œä»»åŠ¡ä¼šæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿè¿™æ˜¯F-35è®¡åˆ’ä¸­æœ€æŒä¹…çš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<p>è¯¥è½¦é˜Ÿçš„å¯é æ€§è®°å½•éå¸¸ç³Ÿç³• - å®ƒæœªèƒ½å®ç°è®¸å¤šä¸´æ—¶å¯é æ€§ç›®æ ‡ï¼Œå¹¶ä¸”åœ¨2016å¹´ä¹‹å‰ä»ç„¶å¦‚æ­¤ã€‚éšç€è¯¥è®¡åˆ’è¿›å…¥æœ€é‡è¦çš„è¿è¡Œæµ‹è¯•é˜¶æ®µï¼ŒçœŸæ­£æ‹…å¿ƒé£æœºä¼šä¸èƒ½ç»å¸¸é£è¡Œä»¥æ»¡è¶³æµ‹è¯•æ—¶é—´è¡¨ã€‚è¿˜æœ‰äººæ‹…å¿ƒå–·æ°”å¼é£æœºåœ¨å¬å”¤æˆ˜æ–—æœåŠ¡æ—¶èƒ½å¤Ÿå¤šä¹…é£è¡Œä¸€æ¬¡ã€‚<br>â€œå¯ç”¨æ€§â€è¡¡é‡é£æœºåœ¨ç°åœºæ‰§è¡Œè‡³å°‘ä¸€æ¬¡æŒ‡å®šä»»åŠ¡çš„é¢‘ç‡ã€‚ç”±äºå¤§å¤šæ•°é£æœºåœ¨1991å¹´åœ¨æ³¢æ–¯æ¹¾çš„æ²™æ¼ é£æš´è¡ŒåŠ¨ä¸­å–å¾—äº†æˆåŠŸï¼Œè¿™äº›æœåŠ¡åŠªåŠ›ç»´æŒå…¶é£æœºå¯æŒç»­ä½œæˆ˜è¡ŒåŠ¨çš„80ï¼…å¯ç”¨ç‡ã€‚è¿™ä¸æµ‹è¯•æœºé˜Ÿä¸ºæ»¡è¶³è¿™ä¸€éœ€æ±‚æ‰€éœ€çš„é€Ÿåº¦ç›¸åŒã€‚ IOTï¼†Eæ—¶é—´è¡¨ã€‚<br>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒF-35è®¡åˆ’ç”šè‡³æ— æ³•å®ç°å…¶60ï¼…å¯ç”¨æ€§çš„ä¸´æ—¶ç›®æ ‡ã€‚</p>
<p>2016å¹´åº¦è½¦é˜Ÿå¹³å‡å¯ç”¨ç‡ä¸º52ï¼…ã€‚è¿™æ˜¯è¿‘å‡ å¹´æ¥çš„ä¸€æ¬¡æ”¹å–„ï¼Œä½†DOTï¼†Eè­¦å‘Šç§°â€œå¢é•¿æ—¢ä¸ç¨³å®šä¹Ÿä¸è¿ç»­ã€‚â€è€Œä¸”å¢é•¿æ›²çº¿è½åäºè¿›åº¦ã€‚å°†ç”¨äºè¿è¡Œæµ‹è¯•çš„é£æœºéœ€è¦é…å¤‡ä¸“é—¨çš„ä»ªå™¨æ¥æµ‹é‡æ€§èƒ½ã€‚ç›®å‰æœ‰17æ¶å–·æ°”å¼é£æœºé©»æ‰åœ¨åŠ å·çˆ±å¾·åå…¹ç©ºå†›åŸºåœ°ã€‚ 2016å¹´å‰9ä¸ªæœˆï¼Œè¯¥æµ‹è¯•è½¦é˜Ÿçš„å¹³å‡å¯ç”¨ç‡ä¸º48ï¼…ã€‚</p>
<p>æœ‰å‡ ä¸ªå› ç´ æ‹–ç´¯äº†F-35æœºé˜Ÿçš„å¯ç”¨ç‡ã€‚è®¸å¤šé£æœºä¸å¾—ä¸è¢«é€å›ä»“åº“è¿›è¡Œå¤§ä¿®ï¼Œè¿™æ˜¯è¯¥ç¨‹åºé«˜å¹¶å‘æ°´å¹³çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œ15 F-35Aéœ€è¦è¢«é€å›ä»¥çº æ­£åˆ¶é€ ç¼ºé™·ï¼Œå…¶ä¸­å–·å°„ç‡ƒæ–™ç®±å†…çš„æ³¡æ²«ç»ç¼˜ææ–™ä½¿é“¸é€ ç¢å±‘åŠ£åŒ–æˆç‡ƒæ–™ã€‚<br>å…¶ä»–å¤§ä¿®æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå­˜åœ¨åŸºæœ¬çš„è®¾è®¡ç¼ºé™·ï¼ŒåŒ…æ‹¬ä¸æ»¡è¶³å¯¿å‘½è¦æ±‚çš„ä¸»è¦ç»“æ„éƒ¨ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯ç”±äºé£æœºé¦–æ¬¡å»ºé€ æ—¶å·²çŸ¥ç¼ºä¹çš„æˆ˜æ–—èƒ½åŠ›è®¾è®¡çš„æŒç»­æ”¹è¿›æ‰€é©±åŠ¨ã€‚ â€</p>
<p>å³ä½¿é£æœºæ²¡æœ‰è¿›è¡Œå¤§ä¿®ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šé£å¾—å¤ªå¤šã€‚åœ¨å¯ç”¨çš„é£æœºä¸­ï¼Œå®ƒä»¬å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä»»åŠ¡èƒ½åŠ›å’Œå®Œå…¨ä»»åŠ¡èƒ½åŠ›ã€‚ä½¿å‘½èƒ½åŠ›çš„é£æœºæ˜¯é‚£äº›å‡†å¤‡è¿›è¡Œè‡³å°‘ä¸€ç§ä»»åŠ¡çš„é£æœºï¼Œå³ä½¿å®ƒåªæ˜¯ä¸€é¡¹è®­ç»ƒä»»åŠ¡;å…·æœ‰å®Œå…¨ä»»åŠ¡èƒ½åŠ›çš„é£æœºæ˜¯å‡†å¤‡æ‰§è¡Œé£æœºå®£å¸ƒèƒ½å¤Ÿæ‰§è¡Œçš„æ‰€æœ‰ä»»åŠ¡çš„é£æœºã€‚åè€…æ˜¯æˆ˜æ–—å‡†å¤‡é£æœºçš„çœŸæ­£è¡¡é‡æ ‡å‡†ã€‚</p>
<p>Mission Capableå’ŒFull Mission Capable F-35çš„å¯ç”¨ç‡åœ¨å»å¹´æœ‰æ‰€ä¸‹é™ã€‚ 2016è´¢å¹´çš„æœºé˜Ÿä»»åŠ¡èƒ½åŠ›ç‡ä¸º62ï¼…ï¼Œä½äº2015è´¢å¹´çš„65ï¼…[DG3]ã€‚å®Œå…¨ä»»åŠ¡èƒ½åŠ›ç‡ä»…ä¸º29ï¼…ï¼Œè€Œå‰ä¸€å¹´ä¸º46ï¼…ã€‚</p>
<p>Gilmoreçš„æŠ¥å‘Šå¼•ç”¨äº†åˆ†å¸ƒå¼å­”å¾„ç³»ç»Ÿï¼Œç”µå­æˆ˜ç³»ç»Ÿï¼Œç”µå…‰é¶å‘ç³»ç»Ÿå’Œé›·è¾¾ç­‰ä¸»è¦ä½œæˆ˜ç³»ç»Ÿçš„å¤±æ•ˆï¼Œè¿™æ˜¯å¯¼è‡´èƒ½åŠ›ä¸‹é™çš„æœ€é«˜é©±åŠ¨å› ç´ ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›ç³»ç»Ÿæ®è¯´ä¸ºF-35æä¾›äº†ç‹¬ç‰¹çš„ä½œæˆ˜èƒ½åŠ›ï¼Œè¿™å°±æ˜¯å°†F-35ä¿æŒåœ¨åœ°é¢ä¸Šçš„ç³»ç»Ÿ - æ²¡æœ‰ä»»ä½•èƒ½åŠ›ã€‚<br>æ ¹æ®æœ€è¿‘å‘å¸ƒçš„å¹´åº¦è¿è¥æˆæœ¬å›¾è¡¨ï¼Œå¹³å‡è€Œè¨€ï¼Œ2016å¹´ç©ºå†›çš„F-35é£æœºæ¯å‘¨åªèƒ½é£è¡Œä¸¤æ¶æ¬¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒF-16å¹³å‡æ¯å‘¨è¿‘ä¸‰æ¶æ¬¡ï¼ŒA-10æœºé˜Ÿå¹³å‡è¿‘å››æ¶æ¬¡ã€‚ F-35éœ€è¦å¤§é‡çš„ç»´æŠ¤æ‰èƒ½å®ç°ã€‚</p>
<p>è™½ç„¶å®˜æ–¹å‘å¸ƒçš„å…¬å¼€å£°æ˜è¯´ç»´æŠ¤äººå‘˜åœ¨å–·æ°”å¼é£æœºä¸Šå·¥ä½œæ˜¯å¤šä¹ˆå®¹æ˜“ï¼Œä½†DOTï¼†EæŠ¥å‘Šæç»˜äº†ä¸åŒçš„ç”»é¢ã€‚</p>
<p>ä¾›åº”é“¾é—®é¢˜å·²ç»è¿«ä½¿ç»´æŠ¤è€…èš•é£Ÿé£æœº;ä»ä¸€æ¶é£æœºä¸Šå–ä¸‹éƒ¨ä»¶å®‰è£…åœ¨å¦ä¸€æ¶é£æœºä¸Šï¼Œä»¥ç¡®ä¿è‡³å°‘æœ‰ä¸€æ¶é£æœºé£è¡Œã€‚é£ŸäººåŒ–å…·æœ‰å¢åŠ è¿›è¡Œä¿®å¤çš„æ€»æ—¶é—´çš„æ•ˆæœï¼Œå› ä¸ºå®ƒå¢åŠ äº†ä»ä¾›ä½“å–·å°„å™¨å‰¥ç¦»éƒ¨ä»¶çš„é¢å¤–æ­¥éª¤ï¼Œè€Œä¸ä»…ä»…æ˜¯ä»ç›’å­ä¸­å–å‡ºæ–°çš„æˆ–ä¿®å¤è¿‡çš„éƒ¨ä»¶ã€‚å®ƒè¿˜éœ€è¦å°†éƒ¨ä»¶å®‰è£…ä¸¤æ¬¡ï¼šé¦–å…ˆæ˜¯åœ¨ä¿®å¤çš„å–·å°„å™¨ä¸­ï¼Œç„¶åæ˜¯åœ¨æ‹†å¸çš„å–·å°„å™¨ä¸­ã€‚</p>
<p>å¯¹äº2016è´¢å¹´ï¼Œç»´æŠ¤äººå‘˜ä¸å¾—ä¸æ‹†æ‰å‡ ä¹æ¯10æ¶æ¬¡é£è¡Œä¸€æ¬¡çš„éƒ¨ä»¶ï¼Œè¿™è¿œè¿œè¶…è¿‡äº†è®¡åˆ’ä¸­æ¯100æ¶æ¬¡ä¸è¶…è¿‡8æ¬¡æ‹†åˆ†è¡ŒåŠ¨çš„ä¸èµ·çœ¼çš„ç›®æ ‡ã€‚</p>
<p>éšç€äº§é‡çš„å¢åŠ ï¼Œä¾›åº”é—®é¢˜å¯èƒ½ä¼šå‡å°‘ï¼Œä½†åŸºæœ¬è®¾è®¡é—®é¢˜å°†æŒç»­å­˜åœ¨ã€‚ ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯F-35éšå½¢æ¶‚å±‚å›ºæœ‰çš„ç‹¬ç‰¹ç»´æŠ¤è¦æ±‚ã€‚ å¯¹éšå½¢é£æœºè¿›è¡Œä¸€äº›ä¿®ç†éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œå› ä¸ºéœ€è¦æ—¶é—´å»é™¤ä½å¯è§‚å¯Ÿåˆ°çš„ææ–™ï¼Œä¿®å¤ç ´æŸçš„ç‰©ä½“ï¼Œç„¶åä¿®å¤éšå½¢çš®è‚¤ã€‚<br>è¿™äº›ä¿®å¤é€šå¸¸æ¶‰åŠä½¿ç”¨éœ€è¦æ—¶é—´è¿›è¡ŒåŒ–å­¦å›ºåŒ–çš„ç²˜åˆå‰‚ã€‚ å…¶ä¸­ä¸€äº›ææ–™å¯èƒ½éœ€è¦é•¿è¾¾168å°æ—¶ - ä¸€æ•´å‘¨ - æ‰èƒ½å®Œå…¨å¹²ç‡¥ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545372168522-b9bd672b-4a02-4ff4-b2f7-1b713cb14d88.png#align=left&amp;display=inline&amp;height=498&amp;originHeight=1201&amp;originWidth=1800&amp;status=done&amp;width=826" alt></p>
<p><a name="fafd408e"></a></p>
<h3 id="å®˜å‘˜éšç’F-35é—®é¢˜å’Œçº³ç¨äººå»¶è¯¯çš„çœŸç›¸"><a href="#å®˜å‘˜éšç’F-35é—®é¢˜å’Œçº³ç¨äººå»¶è¯¯çš„çœŸç›¸" class="headerlink" title="å®˜å‘˜éšç’F-35é—®é¢˜å’Œçº³ç¨äººå»¶è¯¯çš„çœŸç›¸"></a><a href="#rt9ngs"></a>å®˜å‘˜éšç’F-35é—®é¢˜å’Œçº³ç¨äººå»¶è¯¯çš„çœŸç›¸</h3><p>å½“æ´›å…‹å¸Œå¾·Â·é©¬ä¸åœ¨17å¹´å‰é¦–æ¬¡èµ¢å¾—åˆåŒæ—¶ï¼Œé¢„è®¡F-35å°†åœ¨2008å¹´å¼€å§‹è¿è¡Œæµ‹è¯•ã€‚ä¸€æ—¦ä»–ä»¬æœªèƒ½è¾¾åˆ°è¿™ä¸€ç›®æ ‡ï¼Œ2017å¹´åº”è¯¥æ˜¯æˆ˜æ–—æµ‹è¯•è¿‡ç¨‹å¼€å§‹çš„é‡è¦ä¸€å¹´ã€‚æˆ‘ä»¬ç°åœ¨çŸ¥é“ï¼Œè¿™ä¸ªè¿‡ç¨‹å‡ ä¹è‚¯å®šä¼šè¢«æ¨è¿Ÿåˆ°2019å¹´â€¦â€¦ç”šè‡³2020å¹´ã€‚<br>DOTï¼†EæŠ¥å‘Šçš„ç¬¬ä¸€é¡µåˆ—å‡ºäº†F-35çš„13ä¸ªæœªè§£å†³çš„ä¸»è¦é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å°†é˜»æ­¢è¯¥è®¡åˆ’äº2017å¹´8æœˆå¼€å§‹è¿›è¡Œæˆ˜æ–—æµ‹è¯•ã€‚ä½†ä½ ä¸ä¼šä»è´Ÿè´£å®˜å‘˜çš„å…¬å¼€è¯„è®ºä¸­å¾—çŸ¥è¿™äº›é—®é¢˜ã€‚è¯¥ç¨‹åºã€‚<br>åœ¨2æœˆä»½ä¼—è®®é™¢å†›äº‹å§”å‘˜ä¼šå°ç»„å§”å‘˜ä¼šä½œè¯æ—¶ï¼Œå°½ç®¡DOTï¼†EæŠ¥å‘Šåœ¨ä¸åˆ°ä¸€ä¸ªæœˆå‰å‘å¸ƒï¼Œä½†å®˜å‘˜å´æ²¡æœ‰å‘å›½ä¼šæå‡ºä»»ä½•è¿™äº›é—®é¢˜ã€‚<br>F-35çš„æŒ‘æˆ˜è§„æ¨¡åœ¨ä»Šå¹´çš„DOTï¼†Eåˆ†æä¸­å¾ˆå®¹æ˜“é‡åŒ–ã€‚æ ¹æ®è¯¥æŠ¥å‘Šï¼ŒF-35ä»ç„¶æœ‰276ä¸ªâ€œè‡³å…³é‡è¦çš„â€ç¼ºé™· - è¿™äº›å¿…é¡»åœ¨å¼€å‘è¿‡ç¨‹ç»“æŸä¹‹å‰ä¿®å¤ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½â€œå¯¼è‡´IOTï¼†Eæˆ–æˆ˜æ–—æœŸé—´çš„æ“ä½œä»»åŠ¡å¤±è´¥â€ã€‚<br>åœ¨276ä¸ªä¸­ï¼Œæœ‰72ä¸ªè¢«åˆ—ä¸ºâ€œä¼˜å…ˆçº§1â€ï¼Œè¿™äº›æœåŠ¡å…³é”®ç¼ºé™·ä¼šé˜»æ­¢æœåŠ¡åœ¨å›ºå®šä¹‹å‰éƒ¨ç½²å–·æ°”å¼é£æœºã€‚<br>å…³äºF-35åœ¨æˆ˜æ–—ä¸­çš„ç¼ºç‚¹å·²ç»æœ‰å¾ˆå¤šï¼Œä½†åŸºæœ¬æœºèº«ä»ç„¶å­˜åœ¨ç»“æ„æ€§é—®é¢˜ã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯å–·æ°”æœºçš„å‚ç›´å°¾ç¿¼å’Œæœºèº«ä¹‹é—´çš„è¿æ¥æ¥å¤´å¤±æ•ˆã€‚è¿™æ˜¯ä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨åŸå§‹è®¾è®¡ä¸­å‘ç°äº†ç¼ºç‚¹ã€‚<br>å·¥ç¨‹å¸ˆåœ¨2010å¹´çš„æ—©æœŸç»“æ„æµ‹è¯•ä¸­å‘ç°ç”¨äºåŠ å›ºæ¥å¤´çš„å¥—ç®¡è¿‡æ—©ç£¨æŸã€‚è¯¥æ¥å¤´åœ¨2014å¹´è¿›è¡Œäº†é‡æ–°è®¾è®¡å¹¶çº³å…¥æ–°é£æœºã€‚        2016å¹´9æœˆï¼Œæ£€æŸ¥å‘˜å‘ç°é‡æ–°è®¾è®¡çš„æ¥å¤´åœ¨ç»è¿‡250å°æ—¶çš„é£è¡Œæµ‹è¯•åå¤±è´¥äº† - è¿œè¿œä½äºJSFåˆåŒä¸­è§„å®šçš„8,000ä¸ªå·¥ä½œå°æ—¶æ•°ã€‚<br>2016å¹´F-35ä»»åŠ¡ç³»ç»Ÿçš„æµ‹è¯•ç»§ç»­è½åäºè®¡åˆ’ã€‚é¡¹ç›®ç»ç†ç¡®å®šå¹¶é¢„ç®—åŸºçº¿æµ‹è¯•ç‚¹ï¼Œæˆ–â€œåœ¨ç‰¹å®šé£è¡Œæµ‹è¯•æ¡ä»¶ä¸‹çš„æ€§èƒ½ç¦»æ•£æµ‹é‡â€ã€‚<br>è¿™äº›ç”¨äºç¡®å®šç³»ç»Ÿæ˜¯å¦ç¬¦åˆåˆåŒè§„èŒƒã€‚æµ‹è¯•å›¢é˜Ÿè¿˜ä¼šå‡ºäºå„ç§åŸå› æ·»åŠ éåŸºçº¿æµ‹è¯•ç‚¹ï¼Œä»¥å…¨é¢è¯„ä¼°æ•´ä¸ªç³»ç»Ÿã€‚ç¤ºä¾‹åŒ…æ‹¬æ·»åŠ æµ‹è¯•ç‚¹ä»¥å‡†å¤‡ç¨åçš„æ›´å¤æ‚çš„æµ‹è¯•ï¼Œåœ¨è½¯ä»¶æ›´æ–°åé‡æ–°æµ‹è¯•ç³»ç»Ÿä»¥ç¡®ä¿æ–°è½¯ä»¶ä¸ä¼šæ”¹å˜å…ˆå‰çš„ç»“æœï¼Œæˆ–â€œå‘ç°æµ‹è¯•ç‚¹â€ï¼Œè¿™äº›æµ‹è¯•ç‚¹è¢«æ·»åŠ ä»¥è¯†åˆ«åœ¨å…¶ä»–æµ‹è¯•æœŸé—´å‘ç°é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚<br>è¯¥è®¡åˆ’ä¸º2016å¹´F-35çš„ä»»åŠ¡ç³»ç»Ÿé¢„ç®—äº†3,578ä¸ªæµ‹è¯•ç‚¹ã€‚æµ‹è¯•å›¢é˜Ÿæ— æ³•å®Œæˆæ‰€æœ‰æµ‹è¯•ï¼Œå®Œæˆ3,041ï¼ŒåŒæ—¶è¿˜åœ¨å…¨å¹´å¢åŠ äº†250ä¸ªæœªé¢„ç®—çš„æµ‹è¯•ç‚¹ã€‚<br>å°½ç®¡è®¡åˆ’æœ‰æ‰€ä¸‹æ»‘ï¼Œä½†F-35è®¡åˆ’åŠå…¬å®¤å·²è¡¨ç¤ºå¸Œæœ›è·³è¿‡è®¸å¤šæ‰€éœ€çš„æµ‹è¯•ç‚¹ï¼Œè€Œæ˜¯ä¾èµ–æµ‹è¯•ä»¥å‰é£è¡Œçš„æ•°æ® - æµ‹è¯•é£æœºä½¿ç”¨æ—©æœŸè½¯ä»¶ç‰ˆæœ¬ - ä½œä¸ºå‡çº§ç³»ç»Ÿè½¯ä»¶å·¥ä½œçš„è¯æ®ã€‚ä½†DOTï¼†Eè­¦å‘Šè¯´ï¼Œè¾ƒæ–°çš„è½¯ä»¶ç‰ˆæœ¬å¯èƒ½è¡¨ç°ä¸åŒï¼Œä½¿æ—©æœŸçš„ç»“æœæ²¡æœ‰å®é™…æ„ä¹‰ã€‚ç¨‹åºç®¡ç†å‘˜åŸºæœ¬ä¸Šæƒ³è¦å®£å¸ƒå¼€å‘æµ‹è¯•è¿‡ç¨‹å¹¶ç»§ç»­è¿›è¡Œæ“ä½œæµ‹è¯•ï¼Œå³ä½¿ä»–ä»¬è¿˜æ²¡æœ‰å®Œæˆæ‰€æœ‰å¿…è¦çš„æ­¥éª¤ã€‚<br>è¿™æ˜¯ä¸€ä¸ªé£é™©å¾ˆå¤§çš„ä¸¾åŠ¨ã€‚ DOTï¼†Eè­¦å‘Šè¯´éµå¾ªè¿™ä¸ªè®¡åˆ’ã€‚</p>
<p><em>â€œå¯èƒ½ä¼šå¯¼è‡´IOT&amp;Eå¤±è´¥ï¼Œå¯¼è‡´éœ€è¦è¿›è¡Œé¢å¤–çš„åç»­è¿è¡Œæµ‹è¯•ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå°†Block 3Fè¿é€åˆ°èƒ½åŠ›ä¸¥é‡ä¸è¶³çš„ç°åœº - å¦‚æœéœ€è¦F-35ï¼Œè¯¥éƒ¨é—¨å¿…é¡»å…·å¤‡çš„èƒ½åŠ› ä¸å½“å‰å¨èƒä½œæ–—äº‰ã€‚â€œ</em><br><br><br>ç¨‹åºåŠå…¬å®¤ä¼¼ä¹åœ¨è¯•å›¾æµ‹è¯•è®¸å¤šå¯èƒ½ä½¿F-35å¦‚æ­¤ä¸å¯æˆ–ç¼ºçš„èƒ½åŠ›æ–¹é¢æ‹–å»¶äº†ä¸‹æ¥ã€‚<br>ä¸€ä¸ªä¾‹å­æ˜¯å¼€å‘éªŒè¯æ¨¡æ‹Ÿå™¨ï¼ˆVSimï¼‰éœ€è¦å¤šé•¿æ—¶é—´ã€‚æ´›å…‹å¸Œå¾·Â·é©¬ä¸å…¬å¸çš„å·¥ç¨‹å¸ˆåœ¨2001å¹´è´Ÿè´£åˆ›å»ºVSimè®¾æ–½ï¼Œè¯¥è®¾æ–½æ—¨åœ¨æˆä¸ºä¸€ä¸ªè¶…ç°å®çš„ï¼Œç»è¿‡å…¨é¢æµ‹è¯•éªŒè¯çš„â€œäººåœ¨ç¯ï¼Œä»»åŠ¡ç³»ç»Ÿè½¯ä»¶åœ¨ç¯ä»¿çœŸï¼Œæ—¨åœ¨æ»¡è¶³Block 3F IOTï¼†Eçš„è¿è¡Œæµ‹è¯•è¦æ±‚ã€‚â€œ<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ—¨åœ¨åœ¨è™šæ‹Ÿç°å®ä¸­æµ‹è¯•é‚£äº›å¤æ‚è€Œä¸¥è°¨çš„åœºæ™¯ï¼Œè¿™äº›åœºæ™¯åœ¨ç°å®ç”Ÿæ´»ä¸­ä¸å¯èƒ½æˆ–å¤ªå±é™©ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„æˆ˜äº‰ã€‚<br>æ‰¿åŒ…å•†è¿œè¿œè½åäºå»ºè®¾è®¡åˆ’ï¼ŒJPOåœ¨2015å¹´æ”¾å¼ƒäº†VSimã€‚ç›¸åï¼Œæµ·å†›èˆªç©ºç³»ç»Ÿå¸ä»¤éƒ¨çš„ä»»åŠ¡æ˜¯å»ºç«‹ä¸€ä¸ªæ”¿åºœè¿è¡Œçš„è”åˆä»¿çœŸç¯å¢ƒï¼ˆJSEï¼‰æ¥æ‰§è¡ŒVSimçš„ä»»åŠ¡ã€‚æ‰¿åŒ…å•†åº”è¯¥æä¾›é£æœºå’Œä¼ æ„Ÿå™¨æ¨¡å‹ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢â€œF-35æ¨¡å‹çš„è°ˆåˆ¤å°šæœªæˆåŠŸã€‚â€<br>è¿™é˜»ç¢äº†è¯¥è®¡åˆ’è®¾è®¡è™šæ‹Ÿä¸–ç•Œï¼Œå…¶ä¸­F-35å’Œæ•Œæ–¹é£æœºå’Œé˜²å¾¡è£…ç½®åœ¨ç°å®ä¸–ç•Œä¸­ç›¸äº’ä½œç”¨ï¼Œé€ æˆè¿›ä¸€æ­¥çš„å»¶è¯¯ã€‚<br>æ²¡æœ‰ç»è¿‡é€‚å½“å‡†å¤‡çš„JSEï¼ŒF-35æ— æ³•å®Œå…¨æµ‹è¯•ã€‚å¿…é¡»æ ¹æ®é£è¡Œè¯•éªŒæœŸé—´æ”¶é›†çš„çœŸå®æ•°æ®è®¾è®¡æ¨¡æ‹Ÿï¼Œå¦åˆ™æ¨¡æ‹Ÿåªä¼šæµ‹è¯•æ‰¿åŒ…å•†æ‰€è¯´çš„å–·æ°”æœºå¯ä»¥åšä»€ä¹ˆã€‚<br>ä¾‹å¦‚ï¼ŒçœŸæ­£çš„F-35å¿…é¡»é£è¶Šä¸€ä¸ªæµ‹è¯•èŒƒå›´ï¼Œæˆ‘ä»¬çš„æ•Œäººä½¿ç”¨ç›¸åŒçš„é›·è¾¾ç³»ç»Ÿæ˜¯æ´»è·ƒçš„ï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ”¶é›†æœ‰å…³å–·æ°”å¼é£æœºçš„æœºè½½ä¼ æ„Ÿå™¨å¦‚ä½•ååº”çš„æ•°æ®ã€‚è¯¥æ•°æ®ç”¨äºéªŒè¯ä»¿çœŸè½¯ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„è¿‡ç¨‹éœ€è¦æ—¶é—´ã€‚æ­£å¦‚DOTï¼†EæŠ¥é“çš„é‚£æ ·ï¼Œâ€œæ­¤å‰çš„åŠªåŠ›å·²ç»èŠ±è´¹äº†æ•°å¹´æ—¶é—´ï¼Œå› æ­¤NAVAIRä¸å¤ªå¯èƒ½åŠæ—¶æŒ‰è®¡åˆ’å®Œæˆé¡¹ç›®ï¼Œä»¥æ”¯æŒç‰©è”ç½‘å’ŒEã€‚â€<br>è¯¥è®¡åˆ’è¿˜åˆ¶å®šè®¡åˆ’ï¼Œä»¥ä¾¿åœ¨è®¡åˆ’æœ€éœ€è¦æ—¶å‡å°‘æµ‹è¯•äººå‘˜å’Œæµ‹è¯•é£æœºçš„æ•°é‡ã€‚è¿™äº›è®¡åˆ’å°†ä½¿æµ‹è¯•é£æœºçš„æ•°é‡ä»18ä¸ªå‡å°‘åˆ°9ä¸ªï¼Œæµ‹è¯•äººå‘˜ä»1,768å‡å°‘åˆ°600ã€‚<br>å‰å°”æ‘©å°”åœ¨ç©ºå†›å›½é™…å¥¥å§”ä¼šå£°æ˜åä¸ä¹…æŠ¥é“è¯¥è®¡åˆ’å°†æ— æ³•åœ¨å¿…è¦çš„æœ€ç»ˆé…ç½®ä¸­ç”Ÿäº§è¶³å¤Ÿçš„F-35ä»¥è¿›è¡Œæ“ä½œæµ‹è¯•ã€‚<br>â€œç”±äºåœ¨å¼€å‘æµ‹è¯•æœŸé—´éœ€è¦å¾ˆé•¿çš„ç¨‹åºå»¶è¿Ÿå’Œå‘ç°ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¤§é‡ä¿®æ”¹ï¼Œä»¥ä¾¿å°†è£…é…è¿‡ç¨‹ä¸­è¿æ¥åˆ°é£è¡Œæµ‹è¯•ä»ªå™¨çš„OTé£æœºçº³å…¥æ‰€éœ€çš„ç”Ÿäº§ä»£è¡¨é…ç½®ä¸­ï¼Œâ€æŠ¥å‘ŠæŒ‡å‡ºã€‚<br>æ¥ç€è¯´ï¼Œå¯¹23æ¶é£æœºè¿›è¡Œäº†è¶…è¿‡155æ¬¡æ”¹è£…ï¼Œä¸“é—¨ç”¨äºå³å°†è¿›è¡Œçš„æˆ˜æ–—ï¼ˆâ€œä½œæˆ˜â€ï¼‰æµ‹è¯•ï¼Œå…¶ä¸­ä¸€äº›ç”šè‡³å°šæœªç­¾çº¦ï¼Œè¿™æ„å‘³ç€IOTå’ŒEçš„å¼€å§‹å°†æ›´è¿›ä¸€æ­¥å»¶è¿Ÿã€‚</p>
<p><em>è”åˆè®¡åˆ’åŠå…¬å®¤ä¸ä»…æ²¡æœ‰éµå®ˆå…¶åŒæ„çš„è¿è¡Œæµ‹è¯•è®¡åˆ’ï¼Œè€Œä¸”æœªèƒ½èµ„åŠ©å’Œæµ‹è¯•è¿›è¡Œæµ‹è¯•æ‰€å¿…éœ€çš„è®¾å¤‡ã€‚ è¿™åŒ…æ‹¬æ²¡æœ‰èµ„é‡‘ç”¨äºé£è¡Œæµ‹è¯•æ•°æ®é‡‡é›†è®°å½•å’Œé¥æµ‹èˆ±ï¼Œè¿™æ˜¯ä¸€ç§å®‰è£…åœ¨F-35ä¸Šçš„ä»ªå™¨ï¼Œç”¨äºæ¨¡æ‹Ÿé£æœºçš„æ­¦å™¨ã€‚</em><br><br><br>è¿™å¯¹äºæŠ¥å‘Šå’Œåˆ†ææ¯ä¸ªæ¨¡æ‹Ÿæ­¦å™¨å°„å‡»çš„ç»“æœè‡³å…³é‡è¦ã€‚ åœ¨é£æœºåœ¨æ¥åˆå’Œæ­¦å™¨æµ‹è¯•æœŸé—´é£è¡Œçš„æ¡ä»¶ä¸‹ï¼Œåœ¨åŠèˆ±åŠŸèƒ½å’Œå®‰å…¨æ€§è¢«æ¸…é™¤ä¹‹å‰ï¼Œä¸èƒ½è¿›è¡Œæ­¤ç±»æµ‹è¯•ã€‚<br>äº”è§’å¤§æ¥¼å’Œæ‰¿åŒ…å•†æ˜¯å¦ä¼šç»§ç»­å¿½è§†æœ‰å…³F-35åœ¨æµ‹è¯•ä¸­çš„è¡¨ç°ä»¥åŠçœ‹ä¼¼æ— ä¼‘æ­¢çš„å»¶è¯¯çš„ä»¤äººä¸å¿«çš„ä¿¡æ¯ï¼Œå¹¶è¯•å›¾åœ¨ç¾å›½äººæ°‘å’Œä»–ä»¬çš„å¿ƒä¸­äº§ç”Ÿé”™è¯¯çš„å°è±¡ï¼Œè¿˜æœ‰å¾…è§‚å¯Ÿã€‚æ”¿ç­–åˆ¶å®šè€…ã€‚<br>åœ¨æœ€è¿‘ç‰¹æœ—æ™®æ€»ç»Ÿå’Œäº”è§’å¤§æ¥¼ä¹‹é—´çš„äº¤æµä¸­ï¼Œä¼¼ä¹æ²¡æœ‰äººåœ¨æ—¥æœ¬ç‰¹åˆ«è¡Œæ”¿åŒºå¼•å¯¼æ€»ç»Ÿæ³¨æ„é™¤æ³¢æ ¼ä¸¹å°†å†›ä»¥å¤–çš„ä»»ä½•äººã€‚ å¾ˆæ˜æ˜¾ï¼Œä»–æ²¡æœ‰å’Œä»»ä½•æ‰¹è¯„è¯¥è®¡åˆ’çš„äººè°ˆè¿‡ï¼Œæ¯”å¦‚Gilmoreã€‚ æ ¹æ®è¿™ä»½æŠ¥å‘Šçš„ç»“æœï¼Œå¦‚æœä»–æœ‰ï¼Œé‚£ä¹ˆå¾ˆéš¾çœ‹å‡ºä»»ä½•äººéƒ½å¯ä»¥è¯šå®åœ°è¯´F-35æ˜¯â€œå¤ªæ£’äº†â€ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/219582/1545372354038-3b796934-db9d-4360-a02c-bc95e017fa8c.png#align=left&amp;display=inline&amp;height=419&amp;originHeight=702&amp;originWidth=1250&amp;status=done&amp;width=826" alt></p>
<p><a name="abf376ae"></a></p>
<h4 id="å‘å‰è¿›"><a href="#å‘å‰è¿›" class="headerlink" title="å‘å‰è¿›"></a><a href="#solnez"></a>å‘å‰è¿›</h4><p>DOTï¼†Eçš„æœ€æ–°æŠ¥å‘Šæ›´åŠ è¯æ˜F-35è®¡åˆ’å°†åœ¨æœªæ¥å‡ å¹´ç»§ç»­å¤§é‡è€—è´¹æ—¶é—´å’Œèµ„æºï¼Œå¹¶å°†ä¸ºæˆ‘ä»¬çš„æ­¦è£…éƒ¨é˜Ÿæä¾›ä¸€å°äºŒæˆ˜æˆ˜æ–—æœºï¼Œå…¶æ‰§è¡Œä»»åŠ¡ä¸å¦‚å®ƒæœ¬æ¥è¦å–ä»£çš„â€œä¼ ç»Ÿâ€é£æœºã€‚ä¸Šå¤©æå«å›½å®¶çš„ç”·ç”·å¥³å¥³åº”è¯¥å¾—åˆ°æ›´å¥½çš„å¾…é‡ã€‚<br>å°½ç®¡åœ¨åç››é¡¿æœ‰ä¼ ç»Ÿæ™ºæ…§ï¼Œä½†æœåŠ¡å¹¶ä¸ä¸€å®šè¦åšæŒä½¿ç”¨F-35ã€‚å…¶ä»–é€‰é¡¹ç¡®å®å­˜åœ¨ã€‚<br>1.ä¸ºäº†å¡«è¡¥ç©ºå¯¹ç©ºä¸­çš„è¿‘æœŸç©ºæ´ï¼Œå¯åŠ¨ä¸€é¡¹è®¡åˆ’ï¼Œå¯¹æ‰€æœ‰å¯ç”¨çš„F-16Aå’ŒF-18è¿›è¡Œç¿»æ–°å’Œå‡çº§ï¼Œä½¿ç”¨å¯¿å‘½æ›´é•¿çš„æœºèº«å’Œæ›´é«˜çš„æ¨åŠ›F-110-GE- 132ï¼ˆF-16ï¼‰å’ŒF-404-GE-402ï¼ˆF-18ï¼‰å‘åŠ¨æœºã€‚ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„ç°æˆç”µå­ç³»ç»Ÿå‡çº§å…¶ç”µå­ç³»ç»Ÿã€‚</p>
<p>è¿™å°†ä½¿æˆ‘ä»¬çš„æˆ˜æ–—æœºåœ¨ç©ºå¯¹ç©ºä½œæˆ˜ä¸­æ¯”åæ¥çš„F-16å’ŒF-18å‹å·æˆ–F-35æ›´æœ‰æ•ˆã€‚å¦‚æœéœ€è¦å¢åŠ åŠ›é‡ï¼Œä»boneyardæ·»åŠ æœºèº«ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå°†é£è¡Œå‘˜è®­ç»ƒæ—¶é—´æé«˜åˆ°æ¯æœˆ30å°æ—¶çš„æœ€ä½å¯æ¥å—æ°´å¹³ï¼Œéƒ¨åˆ†åŸå› æ˜¯ç°åœ¨ä¸è´­ä¹°æ¬ å‘è¾¾çš„F-35è€ŒèŠ‚çœäº†èµ„é‡‘ã€‚</p>
<p>2.ä¸ºäº†å¡«è¡¥è¿‘è·ç¦»ç©ºä¸­æ”¯æ´éƒ¨é˜Ÿä¸­æ›´ä¸ºä¸¥é‡çš„è¿‘æœŸç©ºæ´ï¼Œå®Œæˆç©ºå†›æ‹’ç»é‡æ–°è®­ç»ƒçš„100æ¶A-10çš„é‡ç»•ï¼Œç„¶åé€šè¿‡æ•´ä¿®/æ‰©å¤§ç°æœ‰çš„ä»…272æ¶A-10çš„åŠ›é‡ã€‚å°†boneyardä¸­æ‰€æœ‰å¯ç”¨çš„A-10é‡æ–°è°ƒæ•´ä¸ºA-10Cæ ‡å‡†ã€‚</p>
<p>3.ç«‹å³è¿›è¡Œä¸‰ä¸ªæ–°çš„ç«äº‰æ€§åŸå‹é£è¡Œè®¡åˆ’ï¼Œè®¾è®¡å’Œå»ºé€ ä¸€ä¸ªæ›´è‡´å‘½ï¼Œæ›´ç”Ÿå­˜çš„è¿‘è·ç¦»ç©ºä¸­æ”¯æ´é£æœºï¼Œä»¥å–ä»£A-10ï¼Œå¹¶è®¾è®¡å’Œå»ºé€ ä¸¤ä¸ªä¸åŒçš„ç©ºå¯¹ç©ºæˆ˜æ–—æœºï¼Œè¿™äº›æˆ˜æ–—æœºæ›´å°ï¼Œæ›´å…·æˆ˜æ–—åŠ› - æ¯”F-16ï¼ŒF-22å’ŒF-18æ›´æœ‰æ•ˆã€‚å¯¹æ‰€æœ‰é…å¤‡é›·è¾¾å¯¼å¼¹å’Œéšèº«å¯¹æŠ—æªæ–½çš„åˆæ ¼æ•Œäººè¿›è¡Œæµ‹è¯•ã€‚<br>è¿™äº›ç¨‹åºåº”è¯¥éµå¾ª20ä¸–çºª70å¹´ä»£è½»å‹æˆ˜æ–—æœºå’ŒA-Xè®¡åˆ’çš„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å®å¼¹ï¼Œç°å®æƒ…æ™¯ç«äº‰é£è¶Šæµ‹è¯•æ–¹é¢ã€‚è¿™äº›è®¡åˆ’äº§ç”Ÿäº†F-16å’ŒA-10ä¸¤æ¶æ— å¯äº‰è®®çš„é«˜æ•ˆé£æœºï¼Œæ¯æ¶é£æœºéƒ½æ¯”å½“æ—¶äº”è§’å¤§æ¥¼çš„é¦–é€‰é£æœºä¾¿å®œã€‚ä»–ä»¬åœ¨ä¸åˆ°10å¹´çš„æ—¶é—´å†…è¿›è¡Œäº†æµ‹è¯•ï¼Œä½†ä¸è¶…è¿‡25å¹´ã€‚</p>
<p>4.ç»å¯¹æœ€ä½é™åº¦ï¼ŒF-35æµ‹è¯•ç¨‹åºå·²ç»åˆ°ä½ï¼ŒJPOå’ŒGilmoreåŒæ„å¿…é¡»æ‰§è¡Œä»¥ä¾¿åœ¨è¿›ä¸€æ­¥ç”Ÿäº§ä¹‹å‰ç†è§£è¿™æ¶é£æœºèƒ½å¤Ÿèƒœä»»å’Œä¸èƒ½èƒœä»»çš„äº‹æƒ…ã€‚è¿™æ„å‘³ç€æš‚åœè¿›ä¸€æ­¥çš„F-35ç”Ÿäº§ï¼Œç›´åˆ°è¿™äº›æµ‹è¯•å®Œæˆå¹¶è¯šå®åœ°æŠ¥å‘Šç»™å›½é˜²éƒ¨é•¿ï¼Œæ€»ç»Ÿå’Œå›½ä¼šã€‚</p>
<p><a name="54bbba80"></a></p>
<h4 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a><a href="#9mgopz"></a>ç»“è®º</h4><p>F-35è®¡åˆ’åŠå…¬å®¤å·²è¾¾åˆ°å…³é”®å†³ç­–ç‚¹ã€‚ ç°åœ¨éœ€è¦é‡‡å–å¤§èƒ†è¡ŒåŠ¨æ¥æŒ½æ•‘è”åˆæ”»å‡»æˆ˜æ–—æœºè¿™æ ·çš„å›½å®¶ç¾éš¾ã€‚</p>
<p>æ”¿åºœåº”ç»§ç»­å®¡æŸ¥F-35è®¡åˆ’ã€‚ ä½†å®˜å‘˜ä»¬ä¸åº”è¯¥åªæ˜¯ä¸å°†å†›å’Œé«˜ç®¡äº¤è°ˆï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰åŠ¨åŠ›å»è®²è¿°çœŸç›¸ï¼Œå› ä¸ºä»–ä»¬åœ¨ç¡®ä¿ç¨‹åºå­˜æ´»æ–¹é¢æœ‰ç€æ—¢å¾—çš„ç»æµåˆ©ç›Š - æ— è®ºèƒ½åŠ›å¦‚ä½•ã€‚</p>
<p>æ­£å¦‚æœ¬æŠ¥å‘Šæ‰€ç¤ºï¼Œä»–ä»¬å¹¶æ²¡æœ‰è®²è¿°æ•´ä¸ªæ•…äº‹ã€‚ ä»å…¶ä»–è§‚ç‚¹æ¥çœ‹ï¼Œè¿˜æœ‰æ›´å¤šäººåœ¨é£Ÿç‰©é“¾ä¸­èµ°ä¸‹å¡è·¯ã€‚ ä»–ä»¬æ˜¯æ‹¥æœ‰çœŸå®æ•…äº‹çš„äººã€‚ è€Œä¸”ï¼Œæ­£å¦‚ä¸Šè¿°å»ºè®®æ‰€ç¤ºï¼Œä»æœ‰é€‰æ‹©ã€‚</p>
<p>å¯¹äºè¯¥è®¡åˆ’è¿›è¡Œé‡å¤§æ”¹å˜è¿˜ä¸ºæ—¶ä¸æ™šï¼Œæ­£å¦‚å…¶ç»´æŠ¤è€…æ‰€å£°ç§°çš„é‚£æ ·ã€‚</p>
<p>Dan Grazieræ˜¯æ”¿åºœç›‘ç£é¡¹ç›®çš„Jack Shanahanç ”ç©¶å‘˜ï¼Œè¿™ç¯‡æ–‡ç« æœ€åˆå‡ºç°åœ¨é‚£é‡Œã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/yuque/F-35æ˜¯1.4ä¸‡äº¿ç¾å…ƒçš„å›½å®¶ç¾éš¾/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Pytorchï¼šå¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨Moduleï¼ŒSequentialï¼ŒModuleListå’ŒModuleDict" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/20/yuque/Pytorchï¼šå¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨Moduleï¼ŒSequentialï¼ŒModuleListå’ŒModuleDict/">Pytorchï¼šå¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨Moduleï¼ŒSequentialï¼ŒModuleListå’ŒModuleDict</a>
    </h1>
  

        
        <a href="/2018/12/20/yuque/Pytorchï¼šå¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨Moduleï¼ŒSequentialï¼ŒModuleListå’ŒModuleDict/" class="archive-article-date">
  	<time datetime="2018-12-20T07:28:04.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-20</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>åˆ†äº«ï¼Œé‡ç”¨å’Œåˆ†è§£æ¨¡å‹å¤æ‚æ€§çš„æœ‰æ•ˆæ–¹æ³•</p>
<p>æ›´æ–°åˆ° Pytorch 4.1ç‰ˆæœ¬</p>
<p>ä½ å¯ä»¥æ‰¾åˆ°ä»£ç  <a href="https://github.com/FrancescoSaverioZuppichini/Pytorch-how-and-when-to-use-Module-Sequential-ModuleList-and-ModuleDict" target="_blank" rel="noopener">here</a></p>
<p>Pytorchæ˜¯ä¸€ä¸ªå¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæä¾›äº†åˆ›å»ºMLæ¨¡å‹çš„æ™ºèƒ½æ–¹æ³•ã€‚ å³ä½¿æ–‡æ¡£åˆ¶ä½œå®Œå¥½ï¼Œæˆ‘ä»ç„¶å‘ç°å¤§å¤šæ•°äººä»ç„¶èƒ½å¤Ÿç¼–å†™é”™è¯¯çš„è€Œä¸æ˜¯æœ‰ç»„ç»‡çš„PyTorchä»£ç ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨PyTorchçš„ä¸‰ä¸ªä¸»è¦æ„å»ºå—ï¼šModuleï¼ŒSequentialå’ŒModuleListã€‚ æˆ‘ä»¬å°†ä»ä¸€ä¸ªä¾‹å­å¼€å§‹ï¼Œè¿­ä»£åœ°æˆ‘ä»¬å°†ä½¿å®ƒå˜å¾—æ›´å¥½ã€‚<br><br><br><br>æ‰€æœ‰è¿™å››ä¸ªç±»éƒ½åŒ…å«åœ¨torch.nnä¸­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="comment"># nn.Module</span></span><br><span class="line"><span class="comment"># nn.Sequential</span></span><br><span class="line"><span class="comment"># nn.Module</span></span><br></pre></td></tr></table></figure>
<p><a name="puggyn"></a></p>
<h2 id="æ¨¡å—ï¼šä¸»è¦æ„å»ºå—"><a href="#æ¨¡å—ï¼šä¸»è¦æ„å»ºå—" class="headerlink" title="æ¨¡å—ï¼šä¸»è¦æ„å»ºå—"></a><a href="#puggyn"></a>æ¨¡å—ï¼šä¸»è¦æ„å»ºå—</h2><p>Moduleæ˜¯ä¸»è¦çš„æ„å»ºå—ï¼Œå®ƒå®šä¹‰äº†æ‰€æœ‰ç¥ç»ç½‘ç»œçš„åŸºç±»ï¼Œä½ å¿…é¡»å°†å®ƒå­ç±»åŒ–ã€‚<br><br><br><br>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»å…¸çš„CNNåˆ†ç±»å™¨ä½œä¸ºç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(in_c, <span class="number">32</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(<span class="number">32</span>)</span><br><span class="line">        </span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">32</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        </span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = self.bn2(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line"></span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (conv1): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">  (bn1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">  (conv2): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">  (bn2): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">  (fc1): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">  (fc2): Linear(in_features=1024, out_features=10, bias=True)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åˆ†ç±»å™¨ï¼Œå…¶ç¼–ç éƒ¨åˆ†ä½¿ç”¨ä¸¤å±‚3x3 convs + batchnorm + reluå’Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªçº¿æ€§å±‚çš„è§£ç éƒ¨åˆ†ã€‚ å¦‚æœæ‚¨ä¸æ˜¯PyTorchçš„æ–°æ‰‹ï¼Œæ‚¨å¯èƒ½ä»¥å‰çœ‹è¿‡è¿™ç§ç±»å‹çš„ç¼–ç ï¼Œä½†æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚<br><br><br><br>å¦‚æœæˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€ä¸ªå›¾å±‚ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨<strong>init</strong>å’Œforwardå‡½æ•°ä¸­å†æ¬¡ç¼–å†™å¤§é‡ä»£ç ã€‚ æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›æˆ‘ä»¬æƒ³è¦åœ¨å¦ä¸€ä¸ªæ¨¡å‹ä¸­ä½¿ç”¨çš„å…¬å…±å—ï¼Œä¾‹å¦‚ 3x3 conv + batchnorm + reluï¼Œæˆ‘ä»¬å¿…é¡»å†å†™ä¸€æ¬¡ã€‚</p>
<p><a name="kpmyrn"></a></p>
<h2 id="Sequentialï¼šå †å å’Œåˆå¹¶å›¾å±‚"><a href="#Sequentialï¼šå †å å’Œåˆå¹¶å›¾å±‚" class="headerlink" title="Sequentialï¼šå †å å’Œåˆå¹¶å›¾å±‚"></a><a href="#kpmyrn"></a>Sequentialï¼šå †å å’Œåˆå¹¶å›¾å±‚</h2><p><a name="di8wcs"></a></p>
<h2 id><a href="#" class="headerlink" title></a><a href="#di8wcs"></a></h2><p>Sequentialæ˜¯ä¸€ä¸ªæ¨¡å—çš„å®¹å™¨ï¼Œå¯ä»¥å †å åœ¨ä¸€èµ·å¹¶åŒæ—¶è¿è¡Œã€‚<br><br><br><br>ä½ å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬å¿…é¡»å°†è‡ªå·±çš„ä¸€åˆ‡å­˜å‚¨èµ·æ¥ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Sequentialæ¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv_block1 = nn.Sequential(</span><br><span class="line">            nn.Conv2d(in_c, <span class="number">32</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.BatchNorm2d(<span class="number">32</span>),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        self.conv_block2 = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">32</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.BatchNorm2d(<span class="number">64</span>),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.Sigmoid(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.conv_block1(x)</span><br><span class="line">        x = self.conv_block2(x)</span><br><span class="line"></span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (conv_block1): Sequential(</span><br><span class="line">    (<span class="number">0</span>): Conv2d(<span class="number">1</span>, <span class="number">32</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>), padding=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">    (<span class="number">1</span>): BatchNorm2d(<span class="number">32</span>, eps=<span class="number">1e-05</span>, momentum=<span class="number">0.1</span>, affine=<span class="literal">True</span>, track_running_stats=<span class="literal">True</span>)</span><br><span class="line">    (<span class="number">2</span>): ReLU()</span><br><span class="line">  )</span><br><span class="line">  (conv_block2): Sequential(</span><br><span class="line">    (<span class="number">0</span>): Conv2d(<span class="number">32</span>, <span class="number">64</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>), padding=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">    (<span class="number">1</span>): BatchNorm2d(<span class="number">64</span>, eps=<span class="number">1e-05</span>, momentum=<span class="number">0.1</span>, affine=<span class="literal">True</span>, track_running_stats=<span class="literal">True</span>)</span><br><span class="line">    (<span class="number">2</span>): ReLU()</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (<span class="number">0</span>): Linear(in_features=<span class="number">25088</span>, out_features=<span class="number">1024</span>, bias=<span class="literal">True</span>)</span><br><span class="line">    (<span class="number">1</span>): Sigmoid()</span><br><span class="line">    (<span class="number">2</span>): Linear(in_features=<span class="number">1024</span>, out_features=<span class="number">10</span>, bias=<span class="literal">True</span>)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ä½ è§‰å¾—å¥½å¤šäº†ï¼Ÿ<br><br><br><br>æ‚¨æ˜¯å¦æ³¨æ„åˆ°conv_block1å’Œconv_block2çœ‹èµ·æ¥å‡ ä¹ç›¸åŒï¼Ÿ æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé‡æ–°ç”Ÿæˆnn.Sequentialçš„å‡½æ•°æ¥ç®€åŒ–ä»£ç ï¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_block</span><span class="params">(in_f, out_f, *args, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.Conv2d(in_f, out_f, *args, **kwargs),</span><br><span class="line">        nn.BatchNorm2d(out_f),</span><br><span class="line">        nn.ReLU()</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„æ¨¡å—ä¸­è°ƒç”¨æ­¤å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv_block1 = conv_block(in_c, <span class="number">32</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        self.conv_block2 = conv_block(<span class="number">32</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.Sigmoid(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.conv_block1(x)</span><br><span class="line">        x = self.conv_block2(x)</span><br><span class="line"></span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (conv_block1): Sequential(</span><br><span class="line">    (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">    (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">    (2): ReLU()</span><br><span class="line">  )</span><br><span class="line">  (conv_block2): Sequential(</span><br><span class="line">    (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">    (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">    (2): ReLU()</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (0): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">    (1): Sigmoid()</span><br><span class="line">    (2): Linear(in_features=1024, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Even cleaner! Still <code>conv_block1</code> and <code>conv_block2</code> are almost the same! We can merge them using <code>nn.Sequential</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.encoder = nn.Sequential(</span><br><span class="line">            conv_block(in_c, <span class="number">32</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            conv_block(<span class="number">32</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.Sigmoid(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): Sequential(</span><br><span class="line">    (0): Sequential(</span><br><span class="line">      (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">    (1): Sequential(</span><br><span class="line">      (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (0): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">    (1): Sigmoid()</span><br><span class="line">    (2): Linear(in_features=1024, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>self.encoder</code> now holds booth <code>conv_block</code>. We have decoupled logic for our model and make it easier to read and reuse. Our <code>conv_block</code> function can be imported and used in another model.</p>
<p><a name="h5bzub"></a></p>
<h2 id="Dynamic-Sequential-create-multiple-layers-at-once"><a href="#Dynamic-Sequential-create-multiple-layers-at-once" class="headerlink" title="Dynamic Sequential: create multiple layers at once"></a><a href="#h5bzub"></a>Dynamic Sequential: create multiple layers at once</h2><p>What if we can to add a new layers in <code>self.encoder</code>, hardcoded them is not convinient:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">self.encoder = nn.Sequential(</span><br><span class="line">            conv_block(in_c, <span class="number">32</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            conv_block(<span class="number">32</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            conv_block(<span class="number">64</span>, <span class="number">128</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            conv_block(<span class="number">128</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line"></span><br><span class="line">        )</span><br></pre></td></tr></table></figure>
<p>Would it be nice if we can define the sizes as an array and automatically create all the layers without writing each one of them? Fortunately we can create an array and pass it to <code>Sequential</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.enc_sizes = [in_c, <span class="number">32</span>, <span class="number">64</span>]</span><br><span class="line">        </span><br><span class="line">        conv_blocks = [conv_block(in_f, out_f, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(self.enc_sizes, self.enc_sizes[<span class="number">1</span>:])]</span><br><span class="line">        </span><br><span class="line">        self.encoder = nn.Sequential(*conv_blocks)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.Sigmoid(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): Sequential(</span><br><span class="line">    (0): Sequential(</span><br><span class="line">      (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">    (1): Sequential(</span><br><span class="line">      (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (0): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">    (1): Sigmoid()</span><br><span class="line">    (2): Linear(in_features=1024, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Letâ€™s break it down. We created an array <code>self.enc_sizes</code> that holds the sizes of our encoder. Then we create an array <code>conv_blocks</code> by iterating the sizes. Since we have to give booth a in size and an outsize for each layer we <code>zip</code>ed the sizeâ€™array with itself by shifting it by one.</p>
<p>Just to be clear, take a look at the following example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sizes = [<span class="number">1</span>, <span class="number">32</span>, <span class="number">64</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> in_f,out_f <span class="keyword">in</span> zip(sizes, sizes[<span class="number">1</span>:]):</span><br><span class="line">    print(in_f,out_f)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 32</span><br><span class="line">32 64</span><br></pre></td></tr></table></figure>
<p>Then, since <code>Sequential</code> does not accept a list, we decompose it by using the <code>*</code> operator.</p>
<p>Tada! Now if we just want to add a size, we can easily add a new number to the list. It is a common practice to make the size a parameter.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, enc_sizes, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.enc_sizes = [in_c, *enc_sizes]</span><br><span class="line">        </span><br><span class="line">        conv_blokcs = [conv_block(in_f, out_f, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(self.enc_sizes, self.enc_sizes[<span class="number">1</span>:])]</span><br><span class="line">        </span><br><span class="line">        self.encoder = nn.Sequential(*conv_blokcs)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.Sigmoid(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, n_classes)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, [<span class="number">32</span>,<span class="number">64</span>, <span class="number">128</span>], <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): Sequential(</span><br><span class="line">    (0): Sequential(</span><br><span class="line">      (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">    (1): Sequential(</span><br><span class="line">      (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">    (2): Sequential(</span><br><span class="line">      (0): Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (0): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">    (1): Sigmoid()</span><br><span class="line">    (2): Linear(in_features=1024, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>We can do the same for the decoder part</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec_block</span><span class="params">(in_f, out_f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.Linear(in_f, out_f),</span><br><span class="line">        nn.Sigmoid()</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, enc_sizes, dec_sizes,  n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.enc_sizes = [in_c, *enc_sizes]</span><br><span class="line">        self.dec_sizes = [<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, *dec_sizes]</span><br><span class="line"></span><br><span class="line">        conv_blokcs = [conv_block(in_f, out_f, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(self.enc_sizes, self.enc_sizes[<span class="number">1</span>:])]</span><br><span class="line">        </span><br><span class="line">        self.encoder = nn.Sequential(*conv_blokcs)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        dec_blocks = [dec_block(in_f, out_f) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(self.dec_sizes, self.dec_sizes[<span class="number">1</span>:])]</span><br><span class="line">        </span><br><span class="line">        self.decoder = nn.Sequential(*dec_blocks)</span><br><span class="line">        </span><br><span class="line">        self.last = nn.Linear(self.dec_sizes[<span class="number">-1</span>], n_classes)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, [<span class="number">32</span>,<span class="number">64</span>], [<span class="number">1024</span>, <span class="number">512</span>], <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): Sequential(</span><br><span class="line">    (0): Sequential(</span><br><span class="line">      (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">    (1): Sequential(</span><br><span class="line">      (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">      (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (2): ReLU()</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): Sequential(</span><br><span class="line">    (0): Sequential(</span><br><span class="line">      (0): Linear(in_features=25088, out_features=1024, bias=True)</span><br><span class="line">      (1): Sigmoid()</span><br><span class="line">    )</span><br><span class="line">    (1): Sequential(</span><br><span class="line">      (0): Linear(in_features=1024, out_features=512, bias=True)</span><br><span class="line">      (1): Sigmoid()</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (last): Linear(in_features=512, out_features=10, bias=True)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>We followed the same pattern, we create a new block for the decoding part, linear + sigmoid, and we pass an array with the sizes. We had to add a <code>self.last</code> since we do not want to activate the output</p>
<p>Now, we can even break down our model in two! Encoder + Decoder</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEncoder</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, enc_sizes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv_blokcs = nn.Sequential(*[conv_block(in_f, out_f, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(enc_sizes, enc_sizes[<span class="number">1</span>:])])</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> self.conv_blokcs(x)</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDecoder</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, dec_sizes, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.dec_blocks = nn.Sequential(*[dec_block(in_f, out_f) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(dec_sizes, dec_sizes[<span class="number">1</span>:])])</span><br><span class="line">        self.last = nn.Linear(dec_sizes[<span class="number">-1</span>], n_classes)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.dec_blocks()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, enc_sizes, dec_sizes,  n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.enc_sizes = [in_c, *enc_sizes]</span><br><span class="line">        self.dec_sizes = [<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, *dec_sizes]</span><br><span class="line"></span><br><span class="line">        self.encoder = MyEncoder(self.enc_sizes)</span><br><span class="line">        </span><br><span class="line">        self.decoder = MyDecoder(dec_sizes, n_classes)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.flatten(<span class="number">1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, [<span class="number">32</span>,<span class="number">64</span>], [<span class="number">1024</span>, <span class="number">512</span>], <span class="number">10</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): MyEncoder(</span><br><span class="line">    (conv_blokcs): Sequential(</span><br><span class="line">      (0): Sequential(</span><br><span class="line">        (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">        (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">        (2): ReLU()</span><br><span class="line">      )</span><br><span class="line">      (1): Sequential(</span><br><span class="line">        (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">        (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">        (2): ReLU()</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): MyDecoder(</span><br><span class="line">    (dec_blocks): Sequential(</span><br><span class="line">      (0): Sequential(</span><br><span class="line">        (0): Linear(in_features=1024, out_features=512, bias=True)</span><br><span class="line">        (1): Sigmoid()</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (last): Linear(in_features=512, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Be aware that <code>MyEncoder</code> and <code>MyDecoder</code> could also be functions that returns a <code>nn.Sequential</code>. I prefer to use the first pattern for models and the second for building blocks.</p>
<p>By diving our module into submodules it is easier to <strong>share</strong> the code, <strong>debug</strong> it and <strong>test</strong> it.</p>
<p><a name="8xg9py"></a></p>
<h2 id="ModuleList-when-we-need-to-iterate"><a href="#ModuleList-when-we-need-to-iterate" class="headerlink" title="ModuleList : when we need to iterate"></a><a href="#8xg9py"></a>ModuleList : when we need to iterate</h2><p><code>ModuleList</code> allows you to store <code>Module</code> as a list. It can be useful when you need to iterate through layer and store/use some information, like in U-net.</p>
<p>The main difference between <code>Sequential</code> is that <code>ModuleList</code> have not a <code>forward</code> method so the inner layers are not connected. Assuming we need each output of each layer in the decoder, we can store it by:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModule</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, sizes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.layers = nn.ModuleList([nn.Linear(in_f, out_f) <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(sizes, sizes[<span class="number">1</span>:])])</span><br><span class="line">        self.trace = []</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.layers:</span><br><span class="line">            x = layer(x)</span><br><span class="line">            self.trace.append(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">model = MyModule([<span class="number">1</span>, <span class="number">16</span>, <span class="number">32</span>])</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">model(torch.rand((<span class="number">4</span>,<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">[print(trace.shape) <span class="keyword">for</span> trace <span class="keyword">in</span> model.trace]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">torch.Size([4, 16])</span><br><span class="line">torch.Size([4, 32])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[None, None]</span><br></pre></td></tr></table></figure>
<p><a name="f7epth"></a></p>
<h2 id="ModuleDict-when-we-need-to-choose"><a href="#ModuleDict-when-we-need-to-choose" class="headerlink" title="ModuleDict: when we need to choose"></a><a href="#f7epth"></a>ModuleDict: when we need to choose</h2><p>What if we want to switch to <code>LearkyRelu</code> in our <code>conv_block</code>? We can use <code>ModuleDict</code> to create a dictionary of <code>Module</code> and dynamically switch <code>Module</code> when we want</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_block</span><span class="params">(in_f, out_f, activation=<span class="string">'relu'</span>, *args, **kwargs)</span>:</span></span><br><span class="line">    </span><br><span class="line">    activations = nn.ModuleDict([</span><br><span class="line">                [<span class="string">'lrelu'</span>, nn.LeakyReLU()],</span><br><span class="line">                [<span class="string">'relu'</span>, nn.ReLU()]</span><br><span class="line">    ])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.Conv2d(in_f, out_f, *args, **kwargs),</span><br><span class="line">        nn.BatchNorm2d(out_f),</span><br><span class="line">        activations[activation]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(conv_block(<span class="number">1</span>, <span class="number">32</span>,<span class="string">'lrelu'</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>))</span><br><span class="line">print(conv_block(<span class="number">1</span>, <span class="number">32</span>,<span class="string">'relu'</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Sequential(</span><br><span class="line">  (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">  (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">  (2): LeakyReLU(negative_slope=0.01)</span><br><span class="line">)</span><br><span class="line">Sequential(</span><br><span class="line">  (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">  (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">  (2): ReLU()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><a name="c51cxn"></a></p>
<h2 id="Final-implementation"><a href="#Final-implementation" class="headerlink" title="Final implementation"></a><a href="#c51cxn"></a>Final implementation</h2><p>Letâ€™s wrap it up everything!</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_block</span><span class="params">(in_f, out_f, activation=<span class="string">'relu'</span>, *args, **kwargs)</span>:</span></span><br><span class="line">    activations = nn.ModuleDict([</span><br><span class="line">                [<span class="string">'lrelu'</span>, nn.LeakyReLU()],</span><br><span class="line">                [<span class="string">'relu'</span>, nn.ReLU()]</span><br><span class="line">    ])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.Conv2d(in_f, out_f, *args, **kwargs),</span><br><span class="line">        nn.BatchNorm2d(out_f),</span><br><span class="line">        activations[activation]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec_block</span><span class="params">(in_f, out_f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.Linear(in_f, out_f),</span><br><span class="line">        nn.Sigmoid()</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEncoder</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, enc_sizes, *args, **kwargs)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv_blokcs = nn.Sequential(*[conv_block(in_f, out_f, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, *args, **kwargs) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(enc_sizes, enc_sizes[<span class="number">1</span>:])])</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> self.conv_blokcs(x)</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDecoder</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, dec_sizes, n_classes)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.dec_blocks = nn.Sequential(*[dec_block(in_f, out_f) </span><br><span class="line">                       <span class="keyword">for</span> in_f, out_f <span class="keyword">in</span> zip(dec_sizes, dec_sizes[<span class="number">1</span>:])])</span><br><span class="line">        self.last = nn.Linear(dec_sizes[<span class="number">-1</span>], n_classes)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.dec_blocks()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCNNClassifier</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, in_c, enc_sizes, dec_sizes,  n_classes, activation=<span class="string">'relu'</span>)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.enc_sizes = [in_c, *enc_sizes]</span><br><span class="line">        self.dec_sizes = [<span class="number">32</span> * <span class="number">28</span> * <span class="number">28</span>, *dec_sizes]</span><br><span class="line"></span><br><span class="line">        self.encoder = MyEncoder(self.enc_sizes, activation=activation)</span><br><span class="line">        </span><br><span class="line">        self.decoder = MyDecoder(dec_sizes, n_classes)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.encoder(x)</span><br><span class="line">        </span><br><span class="line">        x = x.flatten(<span class="number">1</span>) <span class="comment"># flat</span></span><br><span class="line">        </span><br><span class="line">        x = self.decoder(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = MyCNNClassifier(<span class="number">1</span>, [<span class="number">32</span>,<span class="number">64</span>], [<span class="number">1024</span>, <span class="number">512</span>], <span class="number">10</span>, activation=<span class="string">'lrelu'</span>)</span><br><span class="line">print(model)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">MyCNNClassifier(</span><br><span class="line">  (encoder): MyEncoder(</span><br><span class="line">    (conv_blokcs): Sequential(</span><br><span class="line">      (0): Sequential(</span><br><span class="line">        (0): Conv2d(1, 32, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">        (1): BatchNorm2d(32, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">        (2): LeakyReLU(negative_slope=0.01)</span><br><span class="line">      )</span><br><span class="line">      (1): Sequential(</span><br><span class="line">        (0): Conv2d(32, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><br><span class="line">        (1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">        (2): LeakyReLU(negative_slope=0.01)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (decoder): MyDecoder(</span><br><span class="line">    (dec_blocks): Sequential(</span><br><span class="line">      (0): Sequential(</span><br><span class="line">        (0): Linear(in_features=1024, out_features=512, bias=True)</span><br><span class="line">        (1): Sigmoid()</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (last): Linear(in_features=512, out_features=10, bias=True)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><a name="8gyuvn"></a></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a><a href="#8gyuvn"></a>Conclusion</h2><p>So, in summary.</p>
<ul>
<li><p>Use <code>Module</code> when you have a big block compose of multiple smaller blocks</p>
</li>
<li><p>Use <code>Sequential</code> when you want to create a small block from layers</p>
</li>
<li><p>Use <code>ModuleList</code> when you need to iterate through some layers or building blocks and do something</p>
</li>
<li><p>Use <code>ModuleDict</code> when you need to parametise some blocks of your model, for example an activation function</p>
</li>
</ul>
<p>Thatâ€™s all folks!</p>
<p>Thank you for reading</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/20/yuque/Pytorchï¼šå¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨Moduleï¼ŒSequentialï¼ŒModuleListå’ŒModuleDict/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/7/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/9/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2019 Zhos
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>

        <!-- ä¸è’œå­ç»Ÿè®¡ -->
        <span id="busuanzi_container_site_pv">
                æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv" style="display:none">
                æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span>
        <script async src="/busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="â€‹Â…",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r Â áš€á â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">æ‰€æœ‰æ–‡ç« </a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">å‹é“¾</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">å…³äºæˆ‘</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br>1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br>2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yiliaæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br> npm i hexo-generator-json-content --save<br><br>
            3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://www.zhos.me/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥1</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">å¾ˆæƒ­æ„§&lt;br&gt;&lt;br&gt;åªåšäº†ä¸€ç‚¹å¾®å°çš„å·¥ä½œ&lt;br&gt;è°¢è°¢å¤§å®¶</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>