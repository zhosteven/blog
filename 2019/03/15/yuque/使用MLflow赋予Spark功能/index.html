<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="è¿™ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘ä»¬ä½¿ç”¨MLflowçš„åˆæ­¥ç»éªŒã€‚æˆ‘ä»¬å°†é€šè¿‡è®°å½•æ‰€æœ‰æ¢ç´¢æ€§è¿­ä»£ï¼Œå¼€å§‹ä½¿ç”¨è‡ªå·±çš„è·Ÿè¸ªæœåŠ¡å™¨å‘ç°MLflow ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨UDFå°†Sparkä¸MLflowç›¸å…³è”çš„ç»éªŒã€‚ ä¸Šä¸‹æ–‡æˆ‘ä»¬åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½çš„åŠ›é‡ï¼Œä½¿äººä»¬èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„å¥åº·å’Œç¦ç¥‰ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› æ­¤æ˜¯æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ•°æ®äº§å“çš„æ ¸å¿ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆMLFLowï¼Œä¸€ä¸ªæ¶µç›–MLç”Ÿå‘½å‘¨æœŸæ‰€æœ‰æ–¹é¢çš„å¼€æºå¹³å°å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚ MLf">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½">
<meta property="og:url" content="http://zhos.me/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/index.html">
<meta property="og:site_name" content="A+">
<meta property="og:description" content="è¿™ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘ä»¬ä½¿ç”¨MLflowçš„åˆæ­¥ç»éªŒã€‚æˆ‘ä»¬å°†é€šè¿‡è®°å½•æ‰€æœ‰æ¢ç´¢æ€§è¿­ä»£ï¼Œå¼€å§‹ä½¿ç”¨è‡ªå·±çš„è·Ÿè¸ªæœåŠ¡å™¨å‘ç°MLflow ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨UDFå°†Sparkä¸MLflowç›¸å…³è”çš„ç»éªŒã€‚ ä¸Šä¸‹æ–‡æˆ‘ä»¬åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½çš„åŠ›é‡ï¼Œä½¿äººä»¬èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„å¥åº·å’Œç¦ç¥‰ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› æ­¤æ˜¯æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ•°æ®äº§å“çš„æ ¸å¿ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆMLFLowï¼Œä¸€ä¸ªæ¶µç›–MLç”Ÿå‘½å‘¨æœŸæ‰€æœ‰æ–¹é¢çš„å¼€æºå¹³å°å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚ MLf">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639247139-4605b9cb-f981-43fc-a969-9a2155d75965.png#align=left&display=inline&height=239&name=1_z6iObWdxXOtcIj_cUk2gag.png&originHeight=642&originWidth=2000&size=114273&status=done&width=746">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639366867-dba4caa9-6ea2-4ca8-b59a-737bbfa774fc.png#align=left&display=inline&height=365&name=1_3soEGGuFumQXV5LSZNCnrA.png&originHeight=489&originWidth=1000&size=130330&status=done&width=746">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639490766-7db77f84-79f9-486e-963c-c574d85d438e.png#align=left&display=inline&height=120&name=1_vBVbyT3F_YFjjfJuSDVrUA.png&originHeight=161&originWidth=1000&size=81585&status=done&width=746">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639783096-5f2fa010-2bff-4b1f-a478-ec4bde5b218d.png#align=left&display=inline&height=250&name=1_hqSqC1493Tmu5-OHNcKhRg.png&originHeight=335&originWidth=1000&size=196030&status=done&width=746">
<meta property="og:updated_time" content="2019-04-04T13:32:29.410Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½">
<meta name="twitter:description" content="è¿™ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘ä»¬ä½¿ç”¨MLflowçš„åˆæ­¥ç»éªŒã€‚æˆ‘ä»¬å°†é€šè¿‡è®°å½•æ‰€æœ‰æ¢ç´¢æ€§è¿­ä»£ï¼Œå¼€å§‹ä½¿ç”¨è‡ªå·±çš„è·Ÿè¸ªæœåŠ¡å™¨å‘ç°MLflow ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨UDFå°†Sparkä¸MLflowç›¸å…³è”çš„ç»éªŒã€‚ ä¸Šä¸‹æ–‡æˆ‘ä»¬åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½çš„åŠ›é‡ï¼Œä½¿äººä»¬èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„å¥åº·å’Œç¦ç¥‰ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› æ­¤æ˜¯æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ•°æ®äº§å“çš„æ ¸å¿ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆMLFLowï¼Œä¸€ä¸ªæ¶µç›–MLç”Ÿå‘½å‘¨æœŸæ‰€æœ‰æ–¹é¢çš„å¼€æºå¹³å°å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚ MLf">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639247139-4605b9cb-f981-43fc-a969-9a2155d75965.png#align=left&display=inline&height=239&name=1_z6iObWdxXOtcIj_cUk2gag.png&originHeight=642&originWidth=2000&size=114273&status=done&width=746">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zhos.me/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/">





  <title>ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½ | A+</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">A+</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">æ­¦å¾·</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhos.me/2019/03/15/yuque/ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhos">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A+">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ä½¿ç”¨MLflowèµ‹äºˆSparkåŠŸèƒ½</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-03-15T16:33:35+08:00">
                2019-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>è¿™ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘ä»¬ä½¿ç”¨<a href="https://mlflow.org/" target="_blank" rel="noopener"><strong>MLflow</strong></a>çš„åˆæ­¥ç»éªŒã€‚<br>æˆ‘ä»¬å°†é€šè¿‡è®°å½•æ‰€æœ‰æ¢ç´¢æ€§è¿­ä»£ï¼Œå¼€å§‹ä½¿ç”¨è‡ªå·±çš„<a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener">è·Ÿè¸ªæœåŠ¡å™¨</a>å‘ç°MLflow ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨UDFå°†Sparkä¸MLflowç›¸å…³è”çš„ç»éªŒã€‚<br><a name="50f198f0"></a></p>
<h4 id="ä¸Šä¸‹æ–‡"><a href="#ä¸Šä¸‹æ–‡" class="headerlink" title="ä¸Šä¸‹æ–‡"></a>ä¸Šä¸‹æ–‡</h4><p>æˆ‘ä»¬åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½çš„åŠ›é‡ï¼Œä½¿äººä»¬èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„å¥åº·å’Œç¦ç¥‰ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› æ­¤æ˜¯æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ•°æ®äº§å“çš„æ ¸å¿ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆMLFLowï¼Œä¸€ä¸ªæ¶µç›–MLç”Ÿå‘½å‘¨æœŸæ‰€æœ‰æ–¹é¢çš„å¼€æºå¹³å°å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚<br><a name="MLflow"></a></p>
<h3 id="MLflow"><a href="#MLflow" class="headerlink" title="MLflow"></a>MLflow</h3><p>MLflowçš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨MLä¹‹ä¸Šæä¾›é¢å¤–çš„å±‚ï¼Œå…è®¸æ•°æ®ç§‘å­¦å®¶ä¸å‡ ä¹ä»»ä½•æœºå™¨å­¦ä¹ åº“ï¼ˆ<a href="https://github.com/h2oai" target="_blank" rel="noopener"><em>h2oï¼Œ</em></a><a href="https://keras.io/" target="_blank" rel="noopener"><em>kerasï¼Œ</em></a><a href="http://mleap-docs.combust.ml/" target="_blank" rel="noopener"><em>mleapï¼Œ</em></a><a href="https://pytorch.org/" target="_blank" rel="noopener"><em>pytorchï¼Œ</em></a><a href="http://scikit-learn.org/stable/" target="_blank" rel="noopener"><em>sklearnå’Œ</em></a><a href="https://www.tensorflow.org/" target="_blank" rel="noopener"><em>tensorflow</em></a>ï¼‰ä¸€èµ·å·¥ä½œï¼ŒåŒæ—¶ï¼Œå®ƒå°†ä»–ä»¬çš„å·¥ä½œå¸¦åˆ°å¦ä¸€ä¸ªå±‚æ¬¡ã€‚<br>MLflowæä¾›ä¸‰ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><a href="https://mlflow.org/docs/latest/tracking.html" target="_blank" rel="noopener"><strong>è·Ÿè¸ª</strong></a> â€Š- è®°å½•å’ŒæŸ¥è¯¢å®éªŒï¼šä»£ç ï¼Œæ•°æ®ï¼Œé…ç½®å’Œç»“æœã€‚è·Ÿè¸ªå»ºæ¨¡è¿›åº¦éå¸¸æœ‰ç”¨ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/projects.html" target="_blank" rel="noopener"><strong>é¡¹ç›®</strong></a> â€Š- åœ¨ä»»ä½•å¹³å°ï¼ˆ<strong>_å³_</strong> <a href="https://aws.amazon.com/sagemaker" target="_blank" rel="noopener"><em>Sagemaker</em></a>ï¼‰ä¸Šå¯é‡å¤è¿è¡Œçš„åŒ…è£…æ ¼å¼ã€‚</li>
<li><a href="https://mlflow.org/docs/latest/models.html" target="_blank" rel="noopener"><strong>æ¨¡å‹</strong></a> â€Š- å°†æ¨¡å‹å‘é€åˆ°å„ç§éƒ¨ç½²å·¥å…·çš„é€šç”¨æ ¼å¼ã€‚<blockquote>
<p><strong>MLflow</strong>ï¼ˆç›®å‰å¤„äºalphaç‰ˆæœ¬ï¼‰æ˜¯ä¸€ä¸ªç®¡ç†MLç”Ÿå‘½å‘¨æœŸçš„å¼€æºå¹³å°ï¼ŒåŒ…æ‹¬å®éªŒï¼Œå¯é‡å¤æ€§å’Œéƒ¨ç½²ã€‚<br><a name="181d871e"></a></p>
</blockquote>
<h4 id="è®¾ç½®MLflow"><a href="#è®¾ç½®MLflow" class="headerlink" title="è®¾ç½®MLflow"></a>è®¾ç½®MLflow</h4>ä¸ºäº†ä½¿ç”¨MLflowï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®¾ç½®æ‰€æœ‰Pythonç¯å¢ƒä»¥ä½¿ç”¨MLflowï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener">PyEnv </a>_ï¼ˆ_<a href="https://gist.github.com/chris-zen/9e61db6924bd37fbe414f648614ca4c5" target="_blank" rel="noopener"><em>åœ¨Macä¸­</em></a><strong>_è®¾ç½®_</strong>_ â†’ _<a href="https://gist.github.com/chris-zen/9e61db6924bd37fbe414f648614ca4c5" target="_blank" rel="noopener"><em>Pythonï¼‰</em></a>ã€‚è¿™å°†æä¾›ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å®‰è£…è¿è¡Œå®ƒæ‰€éœ€çš„æ‰€æœ‰åº“ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.7.0</span><br><span class="line">pyenv global 3.7.0 # Use Python 3.7</span><br><span class="line">mkvirtualenv mlflow # Create a Virtual Env with Python 3.7</span><br><span class="line">workon mlflow</span><br></pre></td></tr></table></figure>
<p>å®‰è£…æ‰€éœ€çš„åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install mlflow==0.7.0 \</span><br><span class="line">            Cython==0.29 \ </span><br><span class="line">            numpy==1.14.5 \</span><br><span class="line">            pandas==0.23.4 \</span><br><span class="line">            pyarrow==0.11.0</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong>æˆ‘ä»¬ä½¿ç”¨PyArrowå°†æ¨¡å‹ä½œä¸ºUDFå¯åŠ¨ã€‚PyArrowå’ŒNumpyç‰ˆæœ¬éœ€è¦ä¿®å¤ï¼Œå› ä¸ºæœ€æ–°çš„ç‰ˆæœ¬ä¹‹é—´å­˜åœ¨ä¸€äº›å†²çªã€‚</p>
</blockquote>
<p><a name="9a02c96e"></a></p>
<h4 id="å¯åŠ¨è·Ÿè¸ªUI"><a href="#å¯åŠ¨è·Ÿè¸ªUI" class="headerlink" title="å¯åŠ¨è·Ÿè¸ªUI"></a>å¯åŠ¨è·Ÿè¸ªUI</h4><p>MLflow Trackingå…è®¸æˆ‘ä»¬ä½¿ç”¨<a href="https://mlflow.org/docs/latest/python_api/index.html#python-api" target="_blank" rel="noopener">Python</a>å’Œ<a href="https://mlflow.org/docs/latest/rest-api.html#rest-api" target="_blank" rel="noopener">REST</a> API è®°å½•å’ŒæŸ¥è¯¢å®éªŒã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰æˆ‘ä»¬å°†å­˜å‚¨æ¨¡å‹å·¥ä»¶çš„ä½ç½®ï¼ˆ<em>Localhostï¼Œ</em><a href="https://mlflow.org/docs/latest/tracking.html#amazon-s3" target="_blank" rel="noopener"><em>Amazon S3</em></a>_ï¼Œ_<a href="https://mlflow.org/docs/latest/tracking.html#azure-blob-storage" target="_blank" rel="noopener"><em>Azure Blobå­˜å‚¨</em></a>_ï¼Œ_<a href="https://mlflow.org/docs/latest/tracking.html#google-cloud-storage" target="_blank" rel="noopener"><em>Googleäº‘å­˜å‚¨</em></a>_æˆ–_<a href="https://mlflow.org/docs/latest/tracking.html#sftp-server" target="_blank" rel="noopener"><em>SFTPæœåŠ¡å™¨</em></a>ï¼‰ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨AWS ï¼Œå› æ­¤æˆ‘ä»¬å°†å°è¯•å°†<strong>S3</strong>ä½œä¸ºå·¥ä»¶å­˜å‚¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Running a Tracking Server</span><br><span class="line">mlflow server \</span><br><span class="line">    --file-store /tmp/mlflow/fileStore \</span><br><span class="line">    --default-artifact-root s3://&lt;bucket&gt;/mlflow/artifacts/ \</span><br><span class="line">    --host localhost</span><br><span class="line">    --port 5000</span><br></pre></td></tr></table></figure>
<p>MLflowå»ºè®®ä½¿ç”¨<strong>æŒä¹…æ€§æ–‡ä»¶å­˜å‚¨</strong>ã€‚è¿™<code>file-store</code>æ˜¯æœåŠ¡å™¨å­˜å‚¨è¿è¡Œå’Œå®éªŒå…ƒæ•°æ®çš„ä½ç½®ã€‚å› æ­¤ï¼Œåœ¨è¿è¡ŒæœåŠ¡å™¨æ—¶ï¼Œè¯·ç¡®ä¿è¿™æŒ‡å‘æŒä¹…æ–‡ä»¶ç³»ç»Ÿä½ç½®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯<code>/tmp</code>ç”¨äºå®éªŒã€‚<br>è¯·è®°ä½ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨mlflowæœåŠ¡å™¨è¿è¡Œæ—§å®éªŒï¼Œå®ƒä»¬å¿…é¡»å­˜åœ¨äºæ–‡ä»¶å­˜å‚¨ä¸­ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å®ƒä»¬ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨UDFä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºåªéœ€è¦æ¨¡å‹è·¯å¾„ã€‚</p>
<blockquote>
<p><strong><em>æ³¨æ„ï¼š</em></strong>è¯·è®°ä½è·Ÿè¸ªUIï¼Œæ¨¡å‹å®¢æˆ·ç«¯å¿…é¡»èƒ½å¤Ÿè®¿é—®å·¥ä»¶ä½ç½®ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºè·Ÿè¸ªUIæ˜¯å¦åœ¨EC2å®ä¾‹ä¸Šï¼Œå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡ŒMLflowï¼Œæˆ‘ä»¬çš„æœºå™¨åº”è¯¥å¯ä»¥ç›´æ¥è®¿é—®S3æ¥ç¼–å†™å·¥ä»¶æ¨¡å‹ã€‚</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639247139-4605b9cb-f981-43fc-a969-9a2155d75965.png#align=left&amp;display=inline&amp;height=239&amp;name=1_z6iObWdxXOtcIj_cUk2gag.png&amp;originHeight=642&amp;originWidth=2000&amp;size=114273&amp;status=done&amp;width=746" alt="1_z6iObWdxXOtcIj_cUk2gag.png"><br><a name="7d519d5b"></a></p>
<h4 id="è¿è¡Œæ¨¡å‹"><a href="#è¿è¡Œæ¨¡å‹" class="headerlink" title="è¿è¡Œæ¨¡å‹"></a>è¿è¡Œæ¨¡å‹</h4><p>è·Ÿè¸ªæœåŠ¡å™¨è¿è¡Œåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹ã€‚<br>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://github.com/mlflow/mlflow/blob/master/examples/sklearn_elasticnet_wine/train.py" target="_blank" rel="noopener"><strong><em>MLflow Sklearnç¤ºä¾‹ä¸­</em></strong></a>æä¾›çš„wineç¤ºä¾‹çš„ä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MLFLOW_TRACKING_URI=http://localhost:5000 python wine_quality.py \</span><br><span class="line">  --alpha 0.9</span><br><span class="line">  --l1_ration 0.5</span><br><span class="line">  --wine_file ./data/winequality-red.csv</span><br></pre></td></tr></table></figure>
<p>å¦‚å‰æ‰€è¿°ï¼ŒMLflowå…è®¸è®°å½•æ¨¡å‹çš„å‚æ•°ï¼Œåº¦é‡å’Œå·¥ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è·Ÿè¸ªè¿™äº›åœ¨ä¸åŒè¿­ä»£ä¸­å¦‚ä½•æ¼”å˜ã€‚æ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥Tracking Serveræ¥é‡ç°æˆ‘ä»¬çš„æœ€ä½³æ¨¡å‹ï¼Œæˆ–è€…éªŒè¯å“ªäº›ä»£ç æ­£åœ¨æ‰§è¡Œæ‰€éœ€çš„è¿­ä»£ï¼Œå› ä¸º<strong>å®ƒè®°å½•</strong><em>ï¼ˆå…è´¹ï¼‰</em><strong>gitå“ˆå¸Œæäº¤</strong>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">with mlflow.start_run():</span><br><span class="line"></span><br><span class="line">    ... model ...</span><br><span class="line"></span><br><span class="line">    mlflow.log_param(&quot;source&quot;, wine_path)</span><br><span class="line">    mlflow.log_param(&quot;alpha&quot;, alpha)</span><br><span class="line">    mlflow.log_param(&quot;l1_ratio&quot;, l1_ratio)</span><br><span class="line"></span><br><span class="line">    mlflow.log_metric(&quot;rmse&quot;, rmse)</span><br><span class="line">    mlflow.log_metric(&quot;r2&quot;, r2)</span><br><span class="line">    mlflow.log_metric(&quot;mae&quot;, mae)</span><br><span class="line"></span><br><span class="line">    mlflow.set_tag(&apos;domain&apos;, &apos;wine&apos;)</span><br><span class="line">    mlflow.set_tag(&apos;predict&apos;, &apos;quality&apos;)</span><br><span class="line">    mlflow.sklearn.log_model(lr, &quot;model&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639366867-dba4caa9-6ea2-4ca8-b59a-737bbfa774fc.png#align=left&amp;display=inline&amp;height=365&amp;name=1_3soEGGuFumQXV5LSZNCnrA.png&amp;originHeight=489&amp;originWidth=1000&amp;size=130330&amp;status=done&amp;width=746" alt="1_3soEGGuFumQXV5LSZNCnrA.png"><br><a name="146d11ee"></a></p>
<h4 id="æœåŠ¡æ¨¡å‹"><a href="#æœåŠ¡æ¨¡å‹" class="headerlink" title="æœåŠ¡æ¨¡å‹"></a>æœåŠ¡æ¨¡å‹</h4><p> ä½¿ç”¨â€œ &gt; <strong><em>mlflowæœåŠ¡å™¨</em></strong>&gt; _ â€_å¯åŠ¨çš„&gt; <strong>MLflowè·Ÿè¸ªæœåŠ¡å™¨</strong>è¿˜æ‰˜ç®¡REST APIï¼Œç”¨äºè·Ÿè¸ªè¿è¡Œå¹¶å°†æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚æ‚¨å¯ä»¥ä½¿ç”¨â€œ &gt; <strong>_MLFLOW_TRACKING_URI_</strong>&gt; _â€<em>ç¯å¢ƒå˜é‡æŒ‡å®šè·Ÿè¸ªæœåŠ¡å™¨URIï¼ŒMLflowè·Ÿè¸ªAPIä¼šè‡ªåŠ¨ä¸è¯¥URIå¤„çš„è·Ÿè¸ªæœåŠ¡å™¨é€šä¿¡ï¼Œä»¥åˆ›å»º/è·å–è¿è¡Œä¿¡æ¯ï¼Œè®°å½•æŒ‡æ ‡ç­‰ã€‚<br>**</em>å‚è€ƒï¼š<em>**[</em>æ–‡æ¡£//è¿è¡Œè·Ÿè¸ªæœåŠ¡å™¨<em>](<a href="https://mlflow.org/docs/latest/tracking.html#running-a-tracking-server" target="_blank" rel="noopener">https://mlflow.org/docs/latest/tracking.html#running-a-tracking-server</a>)<br>ä¸ºäº†æä¾›æ¨¡å‹ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä¸€ä¸ª<strong>è·Ÿè¸ªæœåŠ¡å™¨</strong>ï¼ˆ**</em>å‚è§_<strong><em>å¯åŠ¨UI</em>ï¼‰å’Œä¸€ä¸ª</strong>æ¨¡å‹è¿è¡ŒID**ã€‚<br><br><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639490766-7db77f84-79f9-486e-963c-c574d85d438e.png#align=left&amp;display=inline&amp;height=120&amp;name=1_vBVbyT3F_YFjjfJuSDVrUA.png&amp;originHeight=161&amp;originWidth=1000&amp;size=81585&amp;status=done&amp;width=746" alt="1_vBVbyT3F_YFjjfJuSDVrUA.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Serve a sklearn model through 127.0.0.0:5005</span><br><span class="line">MLFLOW_TRACKING_URI=http://0.0.0.0:5000 mlflow sklearn serve \</span><br><span class="line">  --port 5005  \</span><br><span class="line">  --run_id 0f8691808e914d1087cf097a08730f17 \</span><br><span class="line">  --model-path model</span><br></pre></td></tr></table></figure>
<p>è¦ä½¿ç”¨<strong>MLflowæœåŠ¡åŠŸèƒ½</strong>ä¸ºæ¨¡å‹æä¾›<strong>æœåŠ¡ï¼Œ</strong>æˆ‘ä»¬éœ€è¦è®¿é—®è·Ÿè¸ªUIï¼Œå› æ­¤åªéœ€æŒ‡å®šå³å¯æ£€ç´¢æ¨¡å‹ä¿¡æ¯<code>--run_id</code> ã€‚<br>ä¸€æ—¦è·Ÿè¸ªæœåŠ¡å™¨ä¸ºæ¨¡å‹æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢æ–°çš„æ¨¡å‹ç«¯ç‚¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Query Tracking Server Endpoint</span><br><span class="line">curl -X POST \</span><br><span class="line">  http://127.0.0.1:5005/invocations \</span><br><span class="line">  -H &apos;Content-Type: application/json&apos; \</span><br><span class="line">  -d &apos;[</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;fixed acidity&quot;: 3.42, </span><br><span class="line">		&quot;volatile acidity&quot;: 1.66, </span><br><span class="line">		&quot;citric acid&quot;: 0.48, </span><br><span class="line">		&quot;residual sugar&quot;: 4.2, </span><br><span class="line">		&quot;chloridessssss&quot;: 0.229, </span><br><span class="line">		&quot;free sulfur dsioxide&quot;: 19, </span><br><span class="line">		&quot;total sulfur dioxide&quot;: 25, </span><br><span class="line">		&quot;density&quot;: 1.98, </span><br><span class="line">		&quot;pH&quot;: 5.33, </span><br><span class="line">		&quot;sulphates&quot;: 4.39, </span><br><span class="line">		&quot;alcohol&quot;: 10.8</span><br><span class="line">	&#125;</span><br><span class="line">]&apos;</span><br><span class="line"></span><br><span class="line">&gt; &#123;&quot;predictions&quot;: [5.825055635303461]&#125;</span><br></pre></td></tr></table></figure>
<p><a name="e475db1c"></a></p>
<h3 id="ä»Sparkè¿è¡Œæ¨¡å‹"><a href="#ä»Sparkè¿è¡Œæ¨¡å‹" class="headerlink" title="ä»Sparkè¿è¡Œæ¨¡å‹"></a>ä»Sparkè¿è¡Œæ¨¡å‹</h3><p>è™½ç„¶é€šè¿‡è®­ç»ƒæ¨¡å‹å’Œä½¿ç”¨æœåŠ¡åŠŸèƒ½ï¼ˆ<strong><em>refï¼š</em></strong><a href="https://mlflow.org/docs/latest/models.html#local" target="_blank" rel="noopener"><em>mlflow // docs // models #localï¼‰</em></a>å®æ—¶ä¸ºæ¨¡å‹æä¾›æœåŠ¡éå¸¸å¼ºå¤§ï¼Œä½†ä½¿ç”¨Sparkï¼ˆæ‰¹é‡æˆ–æµå¼ä¼ è¾“ï¼‰åº”ç”¨æ¨¡å‹æ›´æ˜¯å¦‚æ­¤å¼ºå¤§ï¼Œå› ä¸ºå®ƒåŠ å…¥äº†åˆ†é…åŠ›é‡ã€‚<a href="https://mlflow.org/docs/latest/models.html#local" target="_blank" rel="noopener"></a><br>æƒ³è±¡ä¸€ä¸‹ï¼Œè¿›è¡Œç¦»çº¿è®­ç»ƒï¼Œç„¶åä»¥æ›´ç®€å•çš„æ–¹å¼å°†è¾“å‡ºæ¨¡å‹åº”ç”¨äºæ‰€æœ‰æ•°æ®ã€‚è¿™å°±æ˜¯Sparkå’ŒMLflowå…±åŒå®Œç¾çš„åœ°æ–¹ã€‚<br><a name="92cfd913"></a></p>
<h4 id="å®‰è£…PySpark-Jupyter-Spark"><a href="#å®‰è£…PySpark-Jupyter-Spark" class="headerlink" title="å®‰è£…PySpark + Jupyter + Spark"></a>å®‰è£…PySpark + Jupyter + Spark</h4><p><strong><em>å‚è€ƒï¼š</em></strong><a href="https://blog.sicara.com/get-started-pyspark-jupyter-guide-tutorial-ae2fe84f594f" target="_blank" rel="noopener"><em>PySparkå¼€å§‹ - Jupyter</em></a><br>å±•ç¤ºæˆ‘ä»¬å¦‚ä½•å°†MLflowæ¨¡å‹åº”ç”¨äºSparkæ•°æ®å¸§ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨PySparkè®¾ç½®Jupyterç¬”è®°æœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆä¸‹è½½æœ€æ–°çš„ç¨³å®šApache Sparkï¼ˆå½“å‰ç‰ˆæœ¬2.3.2ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">cd ~/Downloads/</span><br><span class="line">tar -xzf spark-2.3.2-bin-hadoop2.7.tgz</span><br><span class="line">mv ~/Downloads/spark-2.3.2-bin-hadoop2.7 ~/</span><br><span class="line">ln -s ~/spark-2.3.2-bin-hadoop2.7 ~/sparkÌ€</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æˆ‘ä»¬çš„virtualEnvä¸­å®‰è£…PySparkå’ŒJupyter</span><br><span class="line"></span><br><span class="line">pip install pyspark jupyter</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®Environmnetå˜é‡</span><br><span class="line"></span><br><span class="line">export SPARK_HOME=~/spark</span><br><span class="line">export PATH=$SPARK_HOME/bin:$PATH</span><br><span class="line">export PYSPARK_DRIVER_PYTHON=jupyter</span><br><span class="line">export PYSPARK_DRIVER_PYTHON_OPTS=&quot;notebook --notebook-dir=$&#123;HOME&#125;/Projects/notebooks&quot;</span><br><span class="line">é€šè¿‡å®šä¹‰notebook-dirï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿå°†æˆ‘ä»¬çš„ç¬”è®°æœ¬å­˜å‚¨å’Œä¿å­˜åœ¨æ‰€éœ€çš„æ–‡ä»¶å¤¹ä¸­ã€‚</span><br></pre></td></tr></table></figure>
<p><a name="f6e12a2e"></a></p>
<h4 id="ä»PySparkå¯åŠ¨Jupyter"><a href="#ä»PySparkå¯åŠ¨Jupyter" class="headerlink" title="ä»PySparkå¯åŠ¨Jupyter"></a>ä»PySparkå¯åŠ¨Jupyter</h4><p>ç”±äºæˆ‘ä»¬å°†Jupyteré…ç½®ä¸º<strong><em>PySparké©±åŠ¨ç¨‹åº</em></strong>ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é™„åŠ åˆ°æˆ‘ä»¬ç¬”è®°æœ¬çš„PySparkä¸Šä¸‹æ–‡å¯åŠ¨Jupyterã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(mlflow) afranzi:~$ pyspark</span><br><span class="line">[I 19:05:01.572 NotebookApp] sparkmagic extension enabled!</span><br><span class="line">[I 19:05:01.573 NotebookApp] Serving notebooks from local directory: /Users/afranzi/Projects/notebooks</span><br><span class="line">[I 19:05:01.573 NotebookApp] The Jupyter Notebook is running at:</span><br><span class="line">[I 19:05:01.573 NotebookApp] http://localhost:8888/?token=c06252daa6a12cfdd33c1d2e96c8d3b19d90e9f6fc171745</span><br><span class="line">[I 19:05:01.573 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 19:05:01.574 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8888/?token=c06252daa6a12cfdd33c1d2e96c8d3b19d90e9f6fc171745</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼ŒMLflowæä¾›äº†å°†æ¨¡å‹å·¥ä»¶è®°å½•åˆ°S3çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œä¸€æ—¦æˆ‘ä»¬é€‰æ‹©äº†ä¸€ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¯¥<code>mlflow.pyfunc</code>æ¨¡å—å°†å…¶ä½œä¸ºUDFå¯¼å…¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import mlflow.pyfunc</span><br><span class="line"></span><br><span class="line">model_path = &apos;s3://&lt;bucket&gt;/mlflow/artifacts/1/0f8691808e914d1087cf097a08730f17/artifacts/model&apos;</span><br><span class="line">wine_path = &apos;/Users/afranzi/Projects/data/winequality-red.csv&apos;</span><br><span class="line">wine_udf = mlflow.pyfunc.spark_udf(spark, model_path)</span><br><span class="line"></span><br><span class="line">df = spark.read.format(&quot;csv&quot;).option(&quot;header&quot;, &quot;true&quot;).option(&apos;delimiter&apos;, &apos;;&apos;).load(wine_path)</span><br><span class="line">columns = [ &quot;fixed acidity&quot;, &quot;volatile acidity&quot;, &quot;citric acid&quot;,</span><br><span class="line">            &quot;residual sugar&quot;, &quot;chlorides&quot;, &quot;free sulfur dioxide&quot;,</span><br><span class="line">            &quot;total sulfur dioxide&quot;, &quot;density&quot;, &quot;pH&quot;,</span><br><span class="line">            &quot;sulphates&quot;, &quot;alcohol&quot;</span><br><span class="line">          ]</span><br><span class="line">          </span><br><span class="line">df.withColumn(&apos;prediction&apos;, wine_udf(*columns)).show(100, False)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/219582/1552639783096-5f2fa010-2bff-4b1f-a478-ec4bde5b218d.png#align=left&amp;display=inline&amp;height=250&amp;name=1_hqSqC1493Tmu5-OHNcKhRg.png&amp;originHeight=335&amp;originWidth=1000&amp;size=196030&amp;status=done&amp;width=746" alt="1_hqSqC1493Tmu5-OHNcKhRg.png"><br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å±•ç¤ºäº†å¦‚ä½•é€šè¿‡åœ¨æˆ‘ä»¬æ‰€æœ‰çš„è‘¡è„é…’æ•°æ®é›†ä¸­è¿è¡Œè‘¡è„é…’è´¨é‡é¢„æµ‹æ¥å°†PySparkä¸MLflowç»“åˆä½¿ç”¨ã€‚ä½†æ˜¯å½“æ‚¨éœ€è¦ä½¿ç”¨Scala Sparkçš„Python MLflowæ¨¡å—æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<br>æˆ‘ä»¬è¿˜è®¾æ³•é€šè¿‡åœ¨Scalaå’ŒPythonä¹‹é—´å…±äº«Spark Contextæ¥æµ‹è¯•å®ƒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æ³¨å†Œçš„MLflow UDFåœ¨Pythonï¼Œç„¶åä»æ–¯å¡æ‹‰ç”¨å®ƒï¼ˆ<em>å¶æ°ï¼Œä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†è‡³å°‘å®ƒçš„ä¸œè¥¿</em><strong>ğŸ­</strong>ï¼‰ã€‚<br><a name="9f923831"></a></p>
<h4 id="Scala-Spark-MLflow"><a href="#Scala-Spark-MLflow" class="headerlink" title="Scala Spark + MLflow"></a>Scala Spark + MLflow</h4><p>å¯¹äºæ­¤ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†Toree <a href="https://toree.apache.org/" target="_blank" rel="noopener"><strong>å†…æ ¸</strong></a>æ·»åŠ åˆ°ç°æœ‰çš„Jupyterä¸­ã€‚<br>å®‰è£…Spark + Toree + Jupyter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install toree</span><br><span class="line">jupyter toree install --spark_home=/Users/afranzi/spark --sys-prefix</span><br><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Available kernels:</span><br><span class="line">  apache_toree_scala    /Users/afranzi/.virtualenvs/mlflow/share/jupyter/kernels/apache_toree_scala</span><br><span class="line">  python3               /Users/afranzi/.virtualenvs/mlflow/share/jupyter/kernels/python3</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚æ‚¨åœ¨é™„å¸¦çš„ç¬”è®°æœ¬ä¸­çœ‹åˆ°çš„ï¼ŒUDFåœ¨Sparkå’ŒPySparkä¹‹é—´å…±äº«ã€‚æˆ‘ä»¬å¸Œæœ›è¿™æœ€åä¸€éƒ¨åˆ†å¯¹é‚£äº›å–œæ¬¢Scalaå¹¶ä¸”å¿…é¡»å°†MLæ¨¡å‹æŠ•å…¥ç”Ÿäº§çš„å›¢é˜Ÿæœ‰æ‰€å¸®åŠ©ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]:</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.col</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.StructType</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;Column, DataFrame&#125;</span><br><span class="line"><span class="keyword">import</span> scala.util.matching.Regex</span><br><span class="line"></span><br><span class="line">val FirstAtRe: Regex = <span class="string">"^_"</span>.r</span><br><span class="line">val AliasRe: Regex = <span class="string">"[\\s_.:@]+"</span>.r</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFieldAlias</span><span class="params">(field_name: String)</span>:</span> String = &#123;</span><br><span class="line">    FirstAtRe.replaceAllIn(AliasRe.replaceAllIn(field_name, <span class="string">"_"</span>), <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">selectFieldsNormalized</span><span class="params">(columns: List[String])</span><span class="params">(df: DataFrame)</span>:</span> DataFrame = &#123;</span><br><span class="line">    val fieldsToSelect: List[Column] = columns.map(field =&gt;</span><br><span class="line">        col(field).<span class="keyword">as</span>(getFieldAlias(field))</span><br><span class="line">    )</span><br><span class="line">    df.select(fieldsToSelect: _*)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">normalizeSchema</span><span class="params">(df: DataFrame)</span>:</span> DataFrame = &#123;</span><br><span class="line">    val schema = df.columns.toList</span><br><span class="line">    df.transform(selectFieldsNormalized(schema))</span><br><span class="line">&#125;</span><br><span class="line">FirstAtRe = ^_</span><br><span class="line">AliasRe = [\s_.:@]+</span><br><span class="line">getFieldAlias: (field_name: String)String</span><br><span class="line">selectFieldsNormalized: (columns: List[String])(df: org.apache.spark.sql.DataFrame)org.apache.spark.sql.DataFrame</span><br><span class="line">normalizeSchema: (df: org.apache.spark.sql.DataFrame)org.apache.spark.sql.DataFrame</span><br><span class="line">Out[<span class="number">1</span>]:</span><br><span class="line">[\s_.:@]+</span><br><span class="line">In [<span class="number">2</span>]:</span><br><span class="line">val winePath = <span class="string">"~/Research/mlflow-workshop/examples/wine_quality/data/winequality-red.csv"</span></span><br><span class="line">val modelPath = <span class="string">"/tmp/mlflow/artifactStore/0/96cba14c6e4b452e937eb5072467bf79/artifacts/model"</span></span><br><span class="line">winePath = ~/Research/mlflow-workshop/examples/wine_quality/data/winequality-red.csv</span><br><span class="line">modelPath = /tmp/mlflow/artifactStore/<span class="number">0</span>/<span class="number">96</span>cba14c6e4b452e937eb5072467bf79/artifacts/model</span><br><span class="line">Out[<span class="number">2</span>]:</span><br><span class="line">/tmp/mlflow/artifactStore/<span class="number">0</span>/<span class="number">96</span>cba14c6e4b452e937eb5072467bf79/artifacts/model</span><br><span class="line">In [<span class="number">3</span>]:</span><br><span class="line">val df = spark.read</span><br><span class="line">              .format(<span class="string">"csv"</span>)</span><br><span class="line">              .option(<span class="string">"header"</span>, <span class="string">"true"</span>)</span><br><span class="line">              .option(<span class="string">"delimiter"</span>, <span class="string">";"</span>)</span><br><span class="line">              .load(winePath)</span><br><span class="line">              .transform(normalizeSchema)</span><br><span class="line">df = [fixed_acidity: string, volatile_acidity: string ... <span class="number">10</span> more fields]</span><br><span class="line">Out[<span class="number">3</span>]:</span><br><span class="line">[fixed_acidity: string, volatile_acidity: string ... <span class="number">10</span> more fields]</span><br><span class="line">In [<span class="number">4</span>]:</span><br><span class="line">%%PySpark</span><br><span class="line"><span class="keyword">import</span> mlflow</span><br><span class="line"><span class="keyword">from</span> mlflow <span class="keyword">import</span> pyfunc</span><br><span class="line"></span><br><span class="line">model_path = <span class="string">"/tmp/mlflow/artifactStore/0/96cba14c6e4b452e937eb5072467bf79/artifacts/model"</span></span><br><span class="line">wine_quality_udf = mlflow.pyfunc.spark_udf(spark, model_path)</span><br><span class="line"></span><br><span class="line">spark.udf.register(<span class="string">"wineQuality"</span>, wine_quality_udf)</span><br><span class="line">Out[<span class="number">4</span>]:</span><br><span class="line">&lt;function spark_udf.&lt;locals&gt;.predict at <span class="number">0x1116a98c8</span>&gt;</span><br><span class="line">In [<span class="number">6</span>]:</span><br><span class="line">df.createOrReplaceTempView(<span class="string">"wines"</span>)</span><br><span class="line">In [<span class="number">10</span>]:</span><br><span class="line">%%SQL</span><br><span class="line">SELECT </span><br><span class="line">    quality,</span><br><span class="line">    wineQuality(</span><br><span class="line">        fixed_acidity,</span><br><span class="line">        volatile_acidity,</span><br><span class="line">        citric_acid,</span><br><span class="line">        residual_sugar,</span><br><span class="line">        chlorides,</span><br><span class="line">        free_sulfur_dioxide,</span><br><span class="line">        total_sulfur_dioxide,</span><br><span class="line">        density,</span><br><span class="line">        pH,</span><br><span class="line">        sulphates,</span><br><span class="line">        alcohol</span><br><span class="line">    ) AS prediction</span><br><span class="line">FROM wines</span><br><span class="line">LIMIT <span class="number">10</span></span><br><span class="line">Out[<span class="number">10</span>]:</span><br><span class="line">+-------+------------------+</span><br><span class="line">|quality|        prediction|</span><br><span class="line">+-------+------------------+</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.576883967129615</span>|</span><br><span class="line">|      <span class="number">5</span>|  <span class="number">5.50664776916154</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.525504822954496</span>|</span><br><span class="line">|      <span class="number">6</span>| <span class="number">5.504311247097457</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.576883967129615</span>|</span><br><span class="line">|      <span class="number">5</span>|<span class="number">5.5556903912725755</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.467882654744997</span>|</span><br><span class="line">|      <span class="number">7</span>| <span class="number">5.710602976324739</span>|</span><br><span class="line">|      <span class="number">7</span>| <span class="number">5.657319539336507</span>|</span><br><span class="line">|      <span class="number">5</span>| <span class="number">5.345098606538708</span>|</span><br><span class="line">+-------+------------------+</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]:</span><br><span class="line">spark.catalog.listFunctions.filter(<span class="string">'name like "%wineQuality%").show(20, false)</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br><span class="line"><span class="string">|name       |database|description|className|isTemporary|</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br><span class="line"><span class="string">|wineQuality|null    |null       |null     |true       |</span></span><br><span class="line"><span class="string">+-----------+--------+-----------+---------+-----------+</span></span><br></pre></td></tr></table></figure>
<p><a name="38ce27d8"></a></p>
<h4 id="ä¸‹ä¸€æ­¥"><a href="#ä¸‹ä¸€æ­¥" class="headerlink" title="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥</h4><p>å°½ç®¡MLflowç›®å‰å¤„äºAlphaï¼ˆğŸ¥ï¼‰ï¼Œä½†å®ƒçœ‹èµ·æ¥å¾ˆæœ‰å¸Œæœ›ã€‚åªéœ€èƒ½å¤Ÿè¿è¡Œå¤šä¸ªæœºå™¨å­¦ä¹ æ¡†æ¶å¹¶ä»åŒä¸€ç«¯ç‚¹ä½¿ç”¨å®ƒä»¬ï¼Œå®ƒå°±èƒ½å°†æ‰€æœ‰æ¨èç³»ç»Ÿæå‡åˆ°æ–°çš„æ°´å¹³ã€‚<br>æ­¤å¤–ï¼ŒMLflow é€šè¿‡åœ¨å®ƒä»¬ä¹‹é—´å»ºç«‹å…¬å…±å±‚ï¼Œä½¿&gt; <strong>æ•°æ®å·¥ç¨‹å¸ˆ</strong>å’Œæ•°æ®ç§‘å­¦å®¶&gt; <strong>æ›´åŠ æ¥è¿‘</strong> ã€‚&gt;<br>åœ¨å¯¹MLflowè¿›è¡Œè¿™é¡¹ç ”ç©¶ä¹‹åï¼Œæˆ‘ä»¬ç¡®ä¿¡æˆ‘ä»¬å°†è¿›ä¸€æ­¥ç ”ç©¶å®ƒå¹¶å¼€å§‹åœ¨Sparkç®¡é“å’Œæˆ‘ä»¬çš„æ¨èç³»ç»Ÿä¸­ä½¿ç”¨å®ƒã€‚<br>è®©æ–‡ä»¶å­˜å‚¨ä¸æ•°æ®åº“åŒæ­¥è€Œä¸æ˜¯ä½¿ç”¨FSä¼šå¾ˆå¥½ã€‚è¿™åº”è¯¥å…è®¸å¤šä¸ªç«¯ç‚¹ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶å­˜å‚¨ã€‚å°±åƒä½¿ç”¨ç›¸åŒçš„<a href="https://aws.amazon.com/glue/" target="_blank" rel="noopener">Glue Metastore</a>æœ‰å¤šä¸ª<a href="https://prestodb.io/" target="_blank" rel="noopener">Presto</a>å’Œ<a href="https://aws.amazon.com/athena/" target="_blank" rel="noopener">Athena</a>å®ä¾‹ä¸€æ ·ã€‚<a href="https://aws.amazon.com/glue/" target="_blank" rel="noopener"></a><br>æœ€åï¼Œæ„Ÿè°¢MLflowèƒŒåçš„æ‰€æœ‰ç¤¾åŒºï¼Œä½¿å…¶æˆä¸ºå¯èƒ½ï¼Œè®©æˆ‘ä»¬çš„æ•°æ®æ›´æœ‰è¶£ã€‚<br>å¦‚æœæ‚¨æ­£åœ¨ç©MLflowï¼Œè¯·<strong>éšæ—¶è”ç³»æˆ‘ä»¬</strong>å¹¶æä¾›æœ‰å…³æ‚¨å¦‚ä½•ä½¿ç”¨å®ƒçš„ä¸€äº›åé¦ˆï¼æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨MLflowã€‚</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/15/yuque/MLflowæ¨¡å‹/" rel="next" title="MLflowæ¨¡å‹">
                <i class="fa fa-chevron-left"></i> MLflowæ¨¡å‹
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/15/yuque/å°†MLæŠ•å…¥ç”Ÿäº§ï¼šåœ¨Pythonä¸­ä½¿ç”¨Apache Kafka/" rel="prev" title="å°†MLæŠ•å…¥ç”Ÿäº§ï¼šåœ¨Pythonä¸­ä½¿ç”¨Apache Kafka">
                å°†MLæŠ•å…¥ç”Ÿäº§ï¼šåœ¨Pythonä¸­ä½¿ç”¨Apache Kafka <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Zhos</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸Šä¸‹æ–‡"><span class="nav-number">1.</span> <span class="nav-text">ä¸Šä¸‹æ–‡</span></a></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#MLflow"><span class="nav-number"></span> <span class="nav-text">MLflow</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#è®¾ç½®MLflow"><span class="nav-number">1.</span> <span class="nav-text">è®¾ç½®MLflow</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¯åŠ¨è·Ÿè¸ªUI"><span class="nav-number">2.</span> <span class="nav-text">å¯åŠ¨è·Ÿè¸ªUI</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¿è¡Œæ¨¡å‹"><span class="nav-number">3.</span> <span class="nav-text">è¿è¡Œæ¨¡å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœåŠ¡æ¨¡å‹"><span class="nav-number">4.</span> <span class="nav-text">æœåŠ¡æ¨¡å‹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»Sparkè¿è¡Œæ¨¡å‹"><span class="nav-number"></span> <span class="nav-text">ä»Sparkè¿è¡Œæ¨¡å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å®‰è£…PySpark-Jupyter-Spark"><span class="nav-number">1.</span> <span class="nav-text">å®‰è£…PySpark + Jupyter + Spark</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»PySparkå¯åŠ¨Jupyter"><span class="nav-number">2.</span> <span class="nav-text">ä»PySparkå¯åŠ¨Jupyter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Scala-Spark-MLflow"><span class="nav-number">3.</span> <span class="nav-text">Scala Spark + MLflow</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸‹ä¸€æ­¥"><span class="nav-number">4.</span> <span class="nav-text">ä¸‹ä¸€æ­¥</span></a></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhos</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
